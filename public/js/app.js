"use strict";$(function(){function e(){r.keypress(function(e){var n=y[e.key];if(!0===z||!0===x&&n){var i=e.key;l(n),I.removeClass("hiddener"),I.html(i),setTimeout(a,500)}})}function n(){M=[],w=[],u()}function i(){I.toggleClass("hidden")}function o(){P=T%2==0?"Player 2":"Player 1"}function t(e){I.removeClass("hiddener"),I.html(e),setTimeout(a,500)}function a(){I.addClass("hiddener")}function s(){for(var e=0;e<k;e++){var n=Math.floor(8*Math.random());w.push(y[p[n]])}console.log("initializing!"),d()}function d(){M=[],setTimeout(function(){if(!(b<k))return b=0,void(M=[]);d(),l(w[b]),g.addClass("hidden"),g.html(P),console.log(w[b].audio),console.log(M),b++},1e3)}function l(e){h.src="src/assets/audio/"+e.audio+".wav",h.play(),t(e.audio);var n=e.element.clone();n.appendTo("main").removeClass("hidden").addClass(e.animationIn).removeClass(e.animationOut),setTimeout(function(){n.removeClass(e.animationIn).addClass(e.animationOut)},1200),setTimeout(function(){n.remove()},1900)}function u(){console.log("listening..."),r.keypress(function(e){M.push(parseInt(e.key)),m()})}function m(){var e=M.length===w.length&&M.every(function(e,n){return e===w[n].audio});if(console.log("checking"),(D+=1)===k&&0===B&&!0!==x&&!0===z)if(console.log(e),!0===e){var n=Math.floor(8*Math.random());w.push(y[p[n]]),M=[],D=0,k+=1,T+=1,o(),g.html("Pass! - next up "+P),g.removeClass("hidden"),setTimeout(d,3e3)}else!1===e&&!0!==x&&(M=[],D=0,B+=1,T+=1,setTimeout(d,3e3),o(),g.html("Fail! sudden death!! -next up "+P),g.removeClass("hidden"));else D===k&&0!==B&&!0!==x&&(!0===e?(g.html(P+" Wins!"),g.removeClass("hidden"),C.removeClass("hidden")):!1===e&&!0!==x&&(g.html(P+" Fails!! ---- TIE!"),g.removeClass("hidden"),C.removeClass("hidden")))}console.log("JS yo");var r=$(document),h=$("audio")[0],c=$(".welcome"),f=$("#game"),v=$("#playground"),g=$(".feedback"),C=($(".reset"),$(".endgame")),O=$(".switch"),I=$(".numberDisplay"),p=[1,2,3,4,5,6,7,8],y={1:{element:$(".first"),animationIn:"fadeInDownBig",animationOut:"zoomOut",audio:1},2:{element:$(".second"),animationIn:"zoomIn",animationOut:"fadeOut",audio:2},3:{element:$(".third"),animationIn:"flash",animationOut:"fadeOut",audio:3},4:{element:$(".fourth"),animationIn:"rotateIn",animationOut:"rotateOut",audio:4},5:{element:$(".fifth"),animationIn:"flashtwo",animationOut:"fadeOut",audio:5},6:{element:$(".sixth"),animationIn:"fadeInUpBig",animationOut:"lightSpeedOut",audio:6},7:{element:$(".seventh"),animationIn:"shake",animationOut:"fadeOut",audio:7},8:{element:$(".eighth"),animationIn:"slideInLeft",animationOut:"fadeOut",audio:8}},k=3,T=k,w=[],M=[],x=!1,z=!1,P="player 1";f.on("click",function(){c.hide(),z=!0,g.removeClass("hidden"),g.html(P),n(),e(),setTimeout(s,3e3)}),v.on("click",function(){c.hide(),x=!0,C.removeClass("hidden"),n(),e()}),O.on("change",function(){console.log("checked"),i()});var b=0,B=0,D=0;C.on("click",function(){k=3,T=k,w=[],M=[],z=!1,x=!1,o(),B=0,D=0,g.html(""),c.show(),C.addClass("hidden")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiJG51bWJlckRpc3BsYXkiLCJodG1sIiwiZSIsInNldFRpbWVvdXQiLCJrZXkiLCJwbGF5aW5nIiwibWVzc2luZyIsInNrZXkiLCJ2aXN1YWxpc2UiLCJyZW1vdmVDbGFzcyIsImhpZGVLZXkiLCJjb25zb2xlIiwiaGFyZE1vZGUiLCJwcm9ncmFtU2VxdWVuY2UiLCJsaXN0ZW4iLCJ0b2dnbGVDbGFzcyIsInVwZGF0ZVBsYXllciIsImN1cnJlbnRQbGF5ZXIiLCJjdXJyZW50UGxheWVyTnVtIiwiZWFzeVBsYXkiLCJwbGF5QmFjayIsInNlcXVlbmNlSW5kZXgiLCJhZGRDbGFzcyIsImkiLCJjdXJyZW50Um91bmQiLCIkZmVlZGJhY2siLCJ2aXN1YWxzIiwic291bmRzIiwicmFuZCIsImxvZyIsImF1ZGlvIiwidXNlclNlcXVlbmNlIiwiJGVsZW1lbnQiLCJjbG9uZSIsImFwcGVuZFRvIiwiYW5pbWF0aW9uSW4iLCJzcmMiLCJwbGF5IiwiJGRvY3VtZW50Iiwia2V5cHJlc3MiLCJlbGVtZW50IiwicHVzaCIsInBhcnNlSW50IiwiYW5pbWF0aW9uT3V0IiwiY29tcGFyZUFycmF5cyIsInJlbW92ZSIsImxvc3NlcyIsImNvdW50IiwidGhlU2FtZSIsIk1hdGgiLCJyYW5kb20iLCIkZW5kR2FtZSIsImRvY3VtZW50IiwiJHdlbGNvbWUiLCIkZ2FtZSIsIiRwbGF5Z3JvdW5kIiwiJHJlc2V0IiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCJidWlsZEdhbWUiLCJrZXlMaXN0ZW5lciIsImdhbWVJbml0Iiwib24iLCIkc3dpdGNoIiwic2hvdyJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0F1SE1DLFFBQUFBLEtBQ0FBLEVBQUFBLFNBQWVDLFNBQWZDLEdBQ0FDLEdBQUFBLEdBQUFBLEVBQUFELEVBQW9CRSxJQUNyQixLQUFBLElBQUFDLElBQUEsSUFBQUMsR0FBQUYsRUFBQSxDQVJILEdBQUFHLEdBQUFMLEVB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Q0FDLEVBQUFBLFlBQUFBLFVBQ0EvRCxFQUFBQSxLQUFXZ0UsR0FQYkYsSUFNRUMsSUFLRlgsV0FBWWEsRUFBWixPQUlFSCxFQUFBQSxHQUFBQSxRQUFBQSxXQUNBQyxFQUFBQSxPQUxGNUQsR0FBQSxFQUdFNkMsRUFBUzFDLFlBQVksVUFPdkJ3RCxJQUNBQyxNQXdDQUcsRUFBQUQsR0FBU3BELFNBQVQsV0FDRUwsUUFBSU8sSUFBQUEsV0FDRkQsS0F3REQsSUFmREksR0FBQSxFQTZFSUksRUFBQUEsRUFDQUEsRUFBQUEsQ0E4Qk4wQixHQUFTaUIsR0FBRyxRQUFTLFdBQ25CNUMsRUFBZSxFQUNmTixFQUFtQk0sRUFDbkJYLEtBQ0FrQixLQUNBMUIsR0FBVSxFQUNWQyxHQUFVLEVBQ1ZVLElBQ0E4QixFQUFTLEVBQ1RDLEVBQVEsRUFDUnRCLEVBQVV4QixLQUFLLElBQ2ZvRCxFQUFTaUIsT0FDVG5CLEVBQVM3QixTQUFTIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xuICBjb25zb2xlLmxvZygnSlMgeW8nKTtcblxuICBjb25zdCAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcbiAgLy8gY29uc3QgJGNoZWNrYm94ID0gJCgnY2hlY2tib3gnKTtcbiAgY29uc3QgYXVkaW8gPSAkKCdhdWRpbycpWzBdO1xuICBjb25zdCAkd2VsY29tZSA9ICQoJy53ZWxjb21lJyk7XG4gIGNvbnN0ICRnYW1lID0gJCgnI2dhbWUnKTtcbiAgY29uc3QgJHBsYXlncm91bmQgPSAkKCcjcGxheWdyb3VuZCcpO1xuICBjb25zdCAkZmVlZGJhY2sgPSAkKCcuZmVlZGJhY2snKTtcbiAgY29uc3QgJHJlc2V0ID0gJCgnLnJlc2V0Jyk7XG4gIGNvbnN0ICRlbmRHYW1lID0gJCgnLmVuZGdhbWUnKTtcbiAgY29uc3QgJHN3aXRjaCA9ICQoJy5zd2l0Y2gnKTtcbiAgY29uc3QgJG51bWJlckRpc3BsYXkgPSAkKCcubnVtYmVyRGlzcGxheScpXG5cbiAgY29uc3Qgc291bmRzID0gWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDhdO1xuXG5cbiAgY29uc3QgdmlzdWFscyA9IHtcbiAgICAxOiB7XG4gICAgICBlbGVtZW50OiAkKCcuZmlyc3QnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnZmFkZUluRG93bkJpZycsXG4gICAgICBhbmltYXRpb25PdXQ6ICd6b29tT3V0JyxcbiAgICAgIGF1ZGlvOiAxXG4gICAgfSxcbiAgICAyOiB7XG4gICAgICBlbGVtZW50OiAkKCcuc2Vjb25kJyksXG4gICAgICBhbmltYXRpb25JbjogJ3pvb21JbicsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiAyXG4gICAgfSxcbiAgICAzOiB7XG4gICAgICBlbGVtZW50OiAkKCcudGhpcmQnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnZmxhc2gnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogM1xuICAgIH0sXG4gICAgNDoge1xuICAgICAgZWxlbWVudDogJCgnLmZvdXJ0aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdyb3RhdGVJbicsXG4gICAgICBhbmltYXRpb25PdXQ6ICdyb3RhdGVPdXQnLFxuICAgICAgYXVkaW86IDRcbiAgICB9LFxuICAgIDU6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5maWZ0aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmbGFzaHR3bycsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA1XG4gICAgfSxcbiAgICA2OiB7XG4gICAgICBlbGVtZW50OiAkKCcuc2l4dGgnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnZmFkZUluVXBCaWcnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnbGlnaHRTcGVlZE91dCcsXG4gICAgICBhdWRpbzogNlxuICAgIH0sXG4gICAgNzoge1xuICAgICAgZWxlbWVudDogJCgnLnNldmVudGgnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnc2hha2UnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogN1xuICAgIH0sXG4gICAgODoge1xuICAgICAgZWxlbWVudDogJCgnLmVpZ2h0aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdzbGlkZUluTGVmdCcsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA4XG4gICAgfVxuXG4gIH07XG5cbiAgLy8gY3VycmVudCByb3VuZC4gZW1wdHkgcHJvZ3JhbVNlcXVlbmNlIGFycmF5LFxuICAvL2dldHMgZmlsbGVkIHgzIGF0IHN0YXJ0IHRoZW4gaXMgKzEgcGVyIHJvdW5kXG5cblxuICBsZXQgY3VycmVudFJvdW5kID0gMztcbiAgbGV0IGN1cnJlbnRQbGF5ZXJOdW0gPSBjdXJyZW50Um91bmQ7XG5cblxuICBsZXQgcHJvZ3JhbVNlcXVlbmNlID0gW107XG4gIGxldCB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgbGV0IG51bUNvZGUgPSBudWxsO1xuXG5cbiAgLy9QbGF5aW5nIHllcy8gbm8gc3dpdGNoXG4gIGxldCBtZXNzaW5nID0gZmFsc2U7XG4gIGxldCBwbGF5aW5nID0gZmFsc2U7XG5cblxuICBsZXQgY3VycmVudFBsYXllciA9ICdwbGF5ZXIgMSc7XG5cblxuICAkZ2FtZS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgJHdlbGNvbWUuaGlkZSgpO1xuICAgIHBsYXlpbmcgPSB0cnVlO1xuICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgJGZlZWRiYWNrLmh0bWwoY3VycmVudFBsYXllcik7XG4gICAgYnVpbGRHYW1lKCk7XG4gICAga2V5TGlzdGVuZXIoKTtcbiAgICBzZXRUaW1lb3V0KGdhbWVJbml0LCAzMDAwKTtcbiAgfSk7XG5cblxuICAkcGxheWdyb3VuZC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgJHdlbGNvbWUuaGlkZSgpO1xuICAgIG1lc3NpbmcgPSB0cnVlO1xuICAgICRlbmRHYW1lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICBidWlsZEdhbWUoKTtcbiAgICBrZXlMaXN0ZW5lcigpO1xuXG4gIH0pO1xuXG5cbiAgLy9hc3NpZ25zIHRoZSBhdWRpbyBzcmMgYWNjb3JkaW5nIHRvIGtleXByZXNzIGlkIG9mIGtleXMgMS04LlxuICBmdW5jdGlvbiBrZXlMaXN0ZW5lciAoKSB7XG4gICAgJGRvY3VtZW50LmtleXByZXNzKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGNvbnN0IGtleSA9IHZpc3VhbHNbZS5rZXldO1xuICAgICAgaWYgKChwbGF5aW5nID09PSB0cnVlKSB8fCAobWVzc2luZyA9PT0gdHJ1ZSkgJiYga2V5KSB7XG4gICAgICAgIGNvbnN0IHNrZXkgPSBlLmtleTtcbiAgICAgICAgdmlzdWFsaXNlKGtleSk7XG4gICAgICAgICRudW1iZXJEaXNwbGF5LnJlbW92ZUNsYXNzKCdoaWRkZW5lcicpO1xuICAgICAgICAkbnVtYmVyRGlzcGxheS5odG1sKHNrZXkpO1xuICAgICAgICBzZXRUaW1lb3V0KGhpZGVLZXksIDUwMCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvL3N3aXRjaGVzIHBsYXlpbmcgdmFyIHRvIHRydWUgYW5kIGluaXRpYWx6ZXMgdGhlIGdhbWUgOilcbiAgLy9oaWRlcyB0aGUgd2VsY29tZSBkaXZcblxuXG5cbiAgZnVuY3Rpb24gYnVpbGRHYW1lKCkge1xuICAgIHVzZXJTZXF1ZW5jZSA9IFtdO1xuICAgIHByb2dyYW1TZXF1ZW5jZSA9IFtdO1xuICAgIGxpc3RlbigpO1xuICB9XG5cblxuXG4gICRzd2l0Y2gub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnY2hlY2tlZCcpO1xuICAgIGhhcmRNb2RlKCk7XG4gIH0pO1xuXG5cbiAgZnVuY3Rpb24gaGFyZE1vZGUgKCkge1xuICAgICRudW1iZXJEaXNwbGF5LnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcbiAgfVxuXG5cblxuXG5cbiAgZnVuY3Rpb24gdXBkYXRlUGxheWVyICgpIHtcbiAgICBpZiAoY3VycmVudFBsYXllck51bSAlIDIgPT09IDApIHtcbiAgICAgIGN1cnJlbnRQbGF5ZXIgPSAnUGxheWVyIDInO1xuICAgICAgLy8gY29uc29sZS5sb2coY3VycmVudFJvdW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFBsYXllciA9ICdQbGF5ZXIgMSc7XG4gICAgfVxuICB9XG5cblxuICAvL1xuICBmdW5jdGlvbiBlYXN5UGxheSAoa2V5KSB7XG4gICAgJG51bWJlckRpc3BsYXkucmVtb3ZlQ2xhc3MoJ2hpZGRlbmVyJyk7XG4gICAgJG51bWJlckRpc3BsYXkuaHRtbChrZXkpO1xuICAgIHNldFRpbWVvdXQoaGlkZUtleSwgNTAwKTtcblxuICB9XG5cblxuICBmdW5jdGlvbiBoaWRlS2V5KCkge1xuICAgICRudW1iZXJEaXNwbGF5LmFkZENsYXNzKCdoaWRkZW5lcicpO1xuICB9XG5cblxuICAvL2luaXRpYWxpemVzIHRoZSBidWlsZGluZyBvZiB0aGUgcHJvZ3JhbSBhcnJheVxuICBmdW5jdGlvbiBnYW1lSW5pdCAoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50Um91bmQ7IGkrKyl7XG4gICAgICBjb25zdCByYW5kID0gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo4KSk7XG4gICAgICBwcm9ncmFtU2VxdWVuY2UucHVzaCh2aXN1YWxzW3NvdW5kc1tyYW5kXV0pO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnaW5pdGlhbGl6aW5nIScpO1xuICAgIHBsYXlCYWNrKCk7XG4gIH1cblxuXG4gIC8vIGhlcmUgZG9lcyB0aGVyZSBuZWVkIHRvIGJlIGEgZ2FtZSBhZGQgcmFuZG9tIGFkZGl0aW9uIHRvIGFycmF5IE9SIGEgd2F5IG9mIHVzaW5nIHRoZSBhYm92ZSBmdW5jdGlvbiBqdXN0IHRvIGFkZCBvbmU/XG5cbiAgLy90aGlzIHBsYXlzIGJhY2sgdGhlIGNvbnN0cnVjdGVkIHByb2dyYW0gYXJyYXlcbiAgbGV0IHNlcXVlbmNlSW5kZXggPSAwO1xuXG5cbiAgZnVuY3Rpb24gcGxheUJhY2soKSB7XG4gICAgdXNlclNlcXVlbmNlID0gW107XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2VxdWVuY2VJbmRleCA8IGN1cnJlbnRSb3VuZCkge1xuICAgICAgICBwbGF5QmFjaygpO1xuICAgICAgICAvLyBlYXN5UGxheShrZXkpO1xuICAgICAgICB2aXN1YWxpc2UocHJvZ3JhbVNlcXVlbmNlW3NlcXVlbmNlSW5kZXhdKTtcbiAgICAgICAgJGZlZWRiYWNrLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoY3VycmVudFBsYXllcik7XG4gICAgICAgIGNvbnNvbGUubG9nKHByb2dyYW1TZXF1ZW5jZVtzZXF1ZW5jZUluZGV4XS5hdWRpbyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHVzZXJTZXF1ZW5jZSk7XG4gICAgICAgIHNlcXVlbmNlSW5kZXgrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlcXVlbmNlSW5kZXggPSAwO1xuICAgICAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0sIDEwMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gdmlzdWFsaXNlIChrZXkpIHtcbiAgICBhdWRpby5zcmMgPSBgc3JjL2Fzc2V0cy9hdWRpby8ke2tleS5hdWRpb30ud2F2YDtcbiAgICBhdWRpby5wbGF5KCk7XG4gICAgZWFzeVBsYXkoa2V5LmF1ZGlvKTtcbiAgICAvLyBjb25zb2xlLmxvZygndGhpc3RoYSAnICsga2V5KTtcbiAgICAvLyBlYXN5UGxheShwcm9ncmFtU2VxdWVuY2Vbc2VxdWVuY2VJbmRleF0pO1xuICAgIGNvbnN0ICRlbGVtZW50ID0ga2V5LmVsZW1lbnQuY2xvbmUoKTtcbiAgICAkZWxlbWVudC5hcHBlbmRUbygnbWFpbicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5hZGRDbGFzcyhrZXkuYW5pbWF0aW9uSW4pLnJlbW92ZUNsYXNzKGtleS5hbmltYXRpb25PdXQpO1xuICAgIHNldFRpbWVvdXQoICgpID0+IHtcbiAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKGtleS5hbmltYXRpb25JbikuYWRkQ2xhc3Moa2V5LmFuaW1hdGlvbk91dCk7XG4gICAgfSwgMTIwMCk7XG4gICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgJGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfSwgMTkwMCk7XG5cblxuICAgIC8vIGNvbnN0ICRuZXdkaXYgPSAkKCAnPGRpdiBpZD1cImVhc3lcIj48L2Rpdj4nICk7XG4gICAgLy8gaWYgKCRzd2l0Y2guY2hlY2tlZCkge1xuICAgIC8vICAgY29uc29sZS5sb2coJ3N3aXRjaHkgY2hlY2tlZCEhJyk7XG4gICAgLy8gICAvLyAkbmV3ZGl2LmFwcGVuZFRvKCdtYWluJylcbiAgICAvLyB9XG5cbiAgfVxuXG4gIC8vRnVuY3Rpb24gcHVzaGVzIGtleSBjaGFyY29kZXMgdGhlIHVzZXIgaW5wdXRzIHRvIHRoZSB1c2VyU2VxdWVuY2UgYXJyYXkuXG4gIGZ1bmN0aW9uIGxpc3RlbigpIHtcbiAgICAvLyBpZiAocGxheWluZyA9PT0gdHJ1ZSkge1xuICAgIGNvbnNvbGUubG9nKCdsaXN0ZW5pbmcuLi4nKTtcbiAgICAkZG9jdW1lbnQua2V5cHJlc3MoZnVuY3Rpb24oZSkge1xuICAgICAgdXNlclNlcXVlbmNlLnB1c2gocGFyc2VJbnQoZS5rZXkpKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHVzZXJTZXF1ZW5jZSk7XG4gICAgICBjb21wYXJlQXJyYXlzKCk7XG4gICAgfSk7XG5cbiAgfVxuXG4gIGxldCBsb3NzZXMgPSAwO1xuICBsZXQgY291bnQgID0gMDtcblxuXG5cbiAgLy8gY29tcGFyZXMgdGhlIHR3byBhcnJheXMgd2hlbiB0aGUgbGVuZ3RoIG1hdGNoZXMgdGhlIGN1cnJlbnQgcm91bmQuXG4gIC8vIG5vdCBzdXBlciBzaWNrLGNvdWxkbnQgZ2V0IGl0IHN0b3AgdHJpZ2dlcmluZyBvbiBldmVyeSBrZXlwcmVzc1xuICAvLyBpZiBwbGF5ZXIgcGFzc2VzIHRlc3QgKzEgaXMgYWRkZWQgdG8gcm91bmQgbGVuZ3RoIGFuZCBwbGF5YmFjayBzdGFydHMgYWdhaW4uXG4gIGZ1bmN0aW9uIGNvbXBhcmVBcnJheXMoKSB7XG4gICAgY29uc3QgdGhlU2FtZSA9IHVzZXJTZXF1ZW5jZS5sZW5ndGggPT09IHByb2dyYW1TZXF1ZW5jZS5sZW5ndGggJiYgdXNlclNlcXVlbmNlLmV2ZXJ5KCh2LGkpID0+IHYgPT09IHByb2dyYW1TZXF1ZW5jZVtpXS5hdWRpbyk7XG4gICAgY29uc29sZS5sb2coJ2NoZWNraW5nJyk7XG4gICAgY291bnQgKz0gMTtcbiAgICBpZiAoKGNvdW50ID09PSBjdXJyZW50Um91bmQpICYmIChsb3NzZXMgPT09IDApICYmIChtZXNzaW5nICE9PSB0cnVlKSAmJiAocGxheWluZyA9PT0gdHJ1ZSkpIHtcbiAgICAgIGNvbnNvbGUubG9nKHRoZVNhbWUpO1xuICAgICAgaWYgKHRoZVNhbWUgPT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgcmFuZCA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqOCkpO1xuICAgICAgICBwcm9ncmFtU2VxdWVuY2UucHVzaCh2aXN1YWxzW3NvdW5kc1tyYW5kXV0pO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9ncmFtU2VxdWVuY2UpO1xuICAgICAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICAgICAgY291bnQgPSAwO1xuICAgICAgICBjdXJyZW50Um91bmQgKz0gMTtcbiAgICAgICAgY3VycmVudFBsYXllck51bSArPSAxO1xuICAgICAgICB1cGRhdGVQbGF5ZXIoKTtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoJ1Bhc3MhIC0gbmV4dCB1cCAnICsgY3VycmVudFBsYXllcik7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIHNldFRpbWVvdXQocGxheUJhY2ssIDMwMDApO1xuICAgICAgfSBlbHNlIGlmICgodGhlU2FtZSA9PT0gZmFsc2UpICYmIChtZXNzaW5nICE9PSB0cnVlKSkge1xuICAgICAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICAgICAgY291bnQgPSAwO1xuICAgICAgICBsb3NzZXMgKz0gMTtcbiAgICAgICAgY3VycmVudFBsYXllck51bSArPSAxO1xuICAgICAgICBzZXRUaW1lb3V0KHBsYXlCYWNrLCAzMDAwKTtcbiAgICAgICAgdXBkYXRlUGxheWVyKCk7XG4gICAgICAgICRmZWVkYmFjay5odG1sKCdGYWlsISBzdWRkZW4gZGVhdGghISAtbmV4dCB1cCAnICsgY3VycmVudFBsYXllcik7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cblxuXG4gICAgICAgIC8vdGhpcyBib3R0b20gcGFydCBvZiB0aGUgaWYgZWxzZSBhY3RzIGFzIHRoZSBzdWRkZW4gZGVhdGggY2FsY3VsYXRvciBwb3J0aW9uIG9mIHRoZSBnYW1lLCB3b3JrcyBvbiB3aGV0aGVyIGEgbG9zcyB3YXMgc3RvcmVkIGluIHRoZSAnbG9zc2VzJyB2YXIuXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgoY291bnQgPT09IGN1cnJlbnRSb3VuZCkgJiYgKGxvc3NlcyAhPT0gMCkgJiYgKG1lc3NpbmcgIT09IHRydWUpKXtcbiAgICAgIGlmICh0aGVTYW1lID09PSB0cnVlKSB7XG4gICAgICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIgKyAnIFdpbnMhJyk7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRlbmRHYW1lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSBpZiAoKHRoZVNhbWUgPT09IGZhbHNlKSAmJiAobWVzc2luZyAhPT0gdHJ1ZSkpIHtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoY3VycmVudFBsYXllciArICcgRmFpbHMhISAtLS0tIFRJRSEnKTtcbiAgICAgICAgJGZlZWRiYWNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgJGVuZEdhbWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgJGVuZEdhbWUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIGN1cnJlbnRSb3VuZCA9IDM7XG4gICAgY3VycmVudFBsYXllck51bSA9IGN1cnJlbnRSb3VuZDtcbiAgICBwcm9ncmFtU2VxdWVuY2UgPSBbXTtcbiAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICBwbGF5aW5nID0gZmFsc2U7XG4gICAgbWVzc2luZyA9IGZhbHNlO1xuICAgIHVwZGF0ZVBsYXllcigpO1xuICAgIGxvc3NlcyA9IDA7XG4gICAgY291bnQgPSAwO1xuICAgICRmZWVkYmFjay5odG1sKCcnKTtcbiAgICAkd2VsY29tZS5zaG93KCk7XG4gICAgJGVuZEdhbWUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICB9KTtcblxuXG59KTtcbiJdfQ==
