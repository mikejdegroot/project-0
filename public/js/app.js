"use strict";$(function(){function e(){P=[],M=[],b=3,w=b,m(),D=0,E=0,x="Player 1"}function n(e){var n=null;if(n=$(e.target).is("button")?$(e.target).html():e.key,(F||z)&&T[n]){var t=T[n],i=n;s(t),P.push(parseInt(n)),y.removeClass("hiddener"),y.html(i),setTimeout(a,500),d()}}function t(e){y.removeClass("hiddener"),y.html(e),setTimeout(a,500)}function a(){y.addClass("hiddener")}function i(){for(var e=0;e<b;e++){var n=Math.floor(8*Math.random());M.push(T[k[n]])}o()}function o(){setTimeout(function(){S<b?(s(M[S]),O.addClass("hidden"),O.html(x),o(),S++):(S=0,c.keypress(n))},1e3)}function s(e){f.src="src/assets/audio/"+e.audio+".wav",f.play(),t(e.audio);var n=e.element.clone();n.appendTo("main").removeClass("hidden").addClass(e.animationIn).removeClass(e.animationOut),setTimeout(function(){n.removeClass(e.animationIn).addClass(e.animationOut)},1200),setTimeout(function(){n.remove()},1900)}function d(){var e=P.length===M.length&&P.every(function(e,n){return e===M[n].audio});E+=1,E===b&&0===D&&F?(console.log(e),e?(b+=1,u(),l(),O.html("Pass! - next up "+x),O.removeClass("hidden"),r(),setTimeout(o,3e3)):e||(D+=1,l(),r(),setTimeout(o,3e3),O.html("Fail! sudden death!! -next up "+x),O.removeClass("hidden"))):E===b&&0!==D&&(e?(O.html(x+" Wins!"),O.removeClass("hidden"),g.removeClass("hidden")):e||(O.html(x+" Fails!! ---- TIE!"),O.removeClass("hidden"),g.removeClass("hidden")))}function u(){var e=Math.floor(8*Math.random());M.push(T[k[e]])}function l(){P=[],E=0,w+=1,m()}function m(){x=w%2==0?"Player 2":"Player 1"}function r(){c.unbind("keypress",n)}console.log("JS yo");var h=$(".number"),c=$(document),f=$("audio")[0],v=$(".splash"),C=$("#game"),p=$("#playground"),O=$(".feedback"),g=$(".endgame"),I=$(".switch"),y=$(".numberDisplay"),k=[1,2,3,4,5,6,7,8],T={1:{element:$(".first"),animationIn:"pulse",animationOut:"zoomOut",audio:1},2:{element:$(".second"),animationIn:"zoomIn",animationOut:"fadeOut",audio:2},3:{element:$(".third"),animationIn:"flash",animationOut:"fadeOut",audio:3},4:{element:$(".fourth"),animationIn:"rotateIn",animationOut:"rotateOut",audio:4},5:{element:$(".fifth"),animationIn:"flashtwo",animationOut:"fadeOut",audio:5},6:{element:$(".sixth"),animationIn:"",animationOut:"lightSpeedOut",audio:6},7:{element:$(".seventh"),animationIn:"",animationOut:"fadeOut",audio:7},8:{element:$(".eighth"),animationIn:"slideInRight",animationOut:"fadeOut",audio:8}},b=3,w=b,M=[],P=[],x="player 1",z=!1,F=!1;C.on("click",function(){v.hide(),h.removeClass("hidden"),F=!0,z=!1,e(),O.removeClass("hidden"),O.html(x),setTimeout(i,3e3)}),p.on("click",function(){h.removeClass("hidden"),v.hide(),z=!0,F=!1,g.removeClass("hidden"),e(),c.keypress(n)}),$(".number").on("click",n),I.on("change",function(){console.log("checked"),y.toggleClass("hidden")});var S=0,D=0,E=0;g.on("click",function(){F=!1,z=!1,D=0,E=0,h.addClass("hidden"),O.html(""),v.show(),g.addClass("hidden"),r()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiYnVpbGRHYW1lIiwidXNlclNlcXVlbmNlIiwicHJvZ3JhbVNlcXVlbmNlIiwiY3VycmVudFJvdW5kIiwiY3VycmVudFBsYXllck51bSIsInVwZGF0ZVBsYXllciIsImxvc3NlcyIsImNvdW50IiwiY3VycmVudFBsYXllciIsImtleUxpc3RlbmVyIiwiZSIsIm51bWJlciIsImlzIiwidGFyZ2V0IiwiaHRtbCIsImtleSIsInBsYXlpbmciLCJtZXNzaW5nIiwidmlzdWFscyIsInNrZXkiLCJ2aXN1YWxpc2UiLCJwdXNoIiwicGFyc2VJbnQiLCIkbnVtYmVyRGlzcGxheSIsInJlbW92ZUNsYXNzIiwic2V0VGltZW91dCIsImhpZGVLZXkiLCJjb21wYXJlQXJyYXlzIiwiYWRkQ2xhc3MiLCJyYW5kIiwic291bmRzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicGxheUJhY2siLCJzZXF1ZW5jZUluZGV4IiwiJGZlZWRiYWNrIiwiJGRvY3VtZW50Iiwia2V5cHJlc3MiLCJhdWRpbyIsInBsYXkiLCJlYXN5UGxheSIsIiRlbGVtZW50IiwiYXBwZW5kVG8iLCJlbGVtZW50IiwiY2xvbmUiLCJhbmltYXRpb25PdXQiLCJhbmltYXRpb25JbiIsInJlbW92ZSIsInRoZVNhbWUiLCJsZW5ndGgiLCJldmVyeSIsInYiLCJpIiwiY29uc29sZSIsImxvZyIsInJvdW5kQWRkTWF0aCIsInJvdW5kUmVzZXQiLCJzdG9wQmluZCIsIiRlbmRHYW1lIiwidW5iaW5kIiwiZG9jdW1lbnQiLCIkbnVtYmVyIiwiJHNwbGFzaCIsIiRnYW1lIiwiJHBsYXlncm91bmQiLCIkc3dpdGNoIiwiMSIsIm9uIiwiaGlkZSIsInRvZ2dsZUNsYXNzIiwic2hvdyJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0EwR0EsUUFBU0MsS0FDUEMsS0FDQUMsS0FDQUMsRUFBZSxFQUNmQyxFQUFtQkQsRUFDbkJFLElBQ0FDLEVBQVMsRUFDVEMsRUFBUSxFQUNSQyxFQUFnQixXQU9sQixRQUFTQyxHQUFZQyxHQUVuQixHQUFJQyxHQUFTLElBT2IsSUFMRUEsRUFERlosRUFBR0EsRUFBRVcsUUFBRkUsR0FBQSxVQUNRYixFQUFFVyxFQUFFRyxRQUFRQyxPQUVaSixFQUFFSyxLQUdSQyxHQUFXQyxJQUFZQyxFQUFRUCxHQUFTLENBQzNDLEdBQU1JLEdBQU1HLEVBQVFQLEdBQ2RRLEVBQU9SLENBQ2JTLEdBQVVMLEdBQ1ZkLEVBQWFvQixLQUFLQyxTQUFTWCxJQUMzQlksRUFBZUMsWUFBWSxZQUMzQkQsRUFBZVQsS0FBS0ssR0FDcEJNLFdBQVdDLEVBQVMsS0FDcEJDLEtBYUZKLFFBQUFBLEdBQWVDLEdBQ2ZELEVBQWVULFlBQWYsWUFDQVcsRUFBV0MsS0FBU1gsR0FFckJVLFdBQUFDLEVBQUEsS0FLQSxRQUFBQSxLQURDSCxFQUFlSyxTQUFTLFlBTXRCLFFBQU1DLEtBQ04zQixJQUFBQSxHQUFBQSxHQUFBQSxFQUFBQSxFQUFnQm1CLEVBQWFTLElBQU9ELENBQ3JDLEdBQUFBLEdBQUFFLEtBQUFDLE1BQUEsRUFBQUQsS0FBQUUsU0FDREMsR0FBQUEsS0FBQUEsRUFBQUEsRUFBQUEsS0FBQUEsSUFTRSxRQUFJQyxLQUNGZixXQUFBQSxXQUNBZ0IsRUFBQWpDLEdBQ0FpQyxFQUFVdEIsRUFBS04sSUFDZjRCLEVBQUFSLFNBQUEsVUFDQU0sRUFBQUEsS0FBQUEsR0FMRkEsSUFRRUMsTUFFREEsRUFBQSxFQUNBRSxFQVpIQyxTQUFBN0IsS0FZRyxLQU1IOEIsUUFBTUMsR0FBTnpCLEdBQ0EwQixFQUFBQSxJQUFBQSxvQkFBQTFCLEVBQUF3QixNQUFBRSxPQUNBRixFQUFNRyxPQUNOQSxFQUFTQyxFQUFBQSxNQUNUbEIsSUFBQUEsR0FBWVYsRUFBQTZCLFFBQU1DLE9BQ2hCSCxHQUFBQSxTQUFTbEIsUUFBWVQsWUFBckIsVUFBQWEsU0FBbURrQixFQUFBQSxhQUFuRHRCLFlBQUFULEVBQUErQixjQUNEckIsV0FGRCxXQUdBQSxFQUFZRCxZQUFNVCxFQUFBZ0MsYUFBQW5CLFNBQUFiLEVBQUErQixlQUNoQkosTUFDRGpCLFdBRkQsV0FHRGlCLEVBQUFNLFVBREksTUFTa0YsUUFBQXJCLEtBQUEsR0FBckZzQixHQUFBaEQsRUFBQWlELFNBQUFoRCxFQUFBZ0QsUUFBQWpELEVBQUFrRCxNQUFBLFNBQUFDLEVBQUFDLEdBQUEsTUFBQUQsS0FBQWxELEVBQUFtRCxHQUFBZCxPQUNBaEMsSUFBUyxFQUNKQSxJQUFVSixHQUFYLElBQTZCRyxHQUFrQlUsR0FDakRzQyxRQUFRQyxJQUFJTixHQUNSQSxHQUNGOUMsR0FBZ0IsRUFDaEJxRCxJQUNBQyxJQUNBckIsRUFBVXRCLEtBQUssbUJBQXFCTixHQUNwQzRCLEVBQVVaLFlBQVksVUFDdEJrQyxJQUNBakMsV0FBV1MsRUFBVSxNQUNYZSxJQUNWM0MsR0FBVSxFQUNWbUQsSUFDQUMsSUFDQWpDLFdBQVdTLEVBQVUsS0FDckJFLEVBQVV0QixLQUFLLGlDQUFtQ04sR0FDbEQ0QixFQUFVWixZQUFZLFlBR2RqQixJQUFVSixHQUFnQyxJQUFkRyxJQUNsQzJDLEdBQ0ZiLEVBQVV0QixLQUFLTixFQUFnQixVQUMvQjRCLEVBQVVaLFlBQVksVUFDdEJtQyxFQUFTbkMsWUFBWSxXQUNYeUIsSUFDVmIsRUFBVXRCLEtBQUtOLEVBQWdCLHNCQUMvQjRCLEVBQVVaLFlBQVksVUFDdEJtQyxFQUFTbkMsWUFBWSxZQVF6QixRQUFNSyxLQUNOM0IsR0FBQUEsR0FBQUEsS0FBZ0JtQixNQUFvQlEsRUFBZlgsS0FBUVksU0FDOUI1QixHQUFBbUIsS0FBQUgsRUFBQVksRUFBQUQsS0FJQzVCLFFBQUFBLEtBQ0FNLEtBQ0FILEVBQUFBLEVBQ0FDLEdBQUFBLEVBQ0RBLElBSUMsUUFBSUQsS0FBSkksRUFDRUEsRUFBZ0IsR0FBaEIsRUFDSyxXQUVOLFdBSUQ2QixRQUFBQSxLQUNEQSxFQUFBdUIsT0FBQSxXQUFBbkQsR0EvUUQ2QyxRQUFRQyxJQUFJLFFBQVpELElBQUFBLEdBQVl2RCxFQUFBLFdBR05zQyxFQUFZdEMsRUFBRThELFVBRGRDLEVBQVUvRCxFQUFFLFNBQUYsR0FDVnNDLEVBQVl0QyxFQUFFOEQsV0FDZHRCLEVBQVV4QyxFQUFBLFNBQ1ZnRSxFQUFZaEUsRUFBQSxlQUNaaUUsRUFBVWpFLEVBQUEsYUFDVmtFLEVBQUFBLEVBQWNsRSxZQUNkcUMsRUFBWXJDLEVBQUUsV0FDZDRELEVBQWE1RCxFQUFBLGtCQUNibUUsR0FBWSxFQUFBLEVBQUEsRUFBRixFQUFoQixFQUFBLEVBQUEsRUFBQSxHQUNNM0MsR0FDTjRDLEdBQ01qRCxRQUFBQSxFQUFVLFVBQ2Q2QixZQUFHLFFBQ0RILGFBQVcsVUFDWEcsTUFBQUEsR0FFQVIsR0FMWUssUUFBQTdDLEVBQUEsV0FPZGdELFlBQUcsU0FDREgsYUFBVyxVQUNYRyxNQUFBQSxHQUVBUixHQVhZSyxRQUFBN0MsRUFBQSxVQWFkZ0QsWUFBRyxRQUNESCxhQUFXLFVBQ1hHLE1BQUFBLEdBRUFSLEdBakJZSyxRQUFBN0MsRUFBQSxXQW1CZGdELFlBQUcsV0FDREgsYUFBVyxZQUNYRyxNQUFBQSxHQUVBUixHQXZCWUssUUFBQTdDLEVBQUEsVUF5QmRnRCxZQUFHLFdBQ0RILGFBQVcsVUFDWEcsTUFBQUEsR0FFQVIsR0E3QllLLFFBQUE3QyxFQUFBLFVBK0JkZ0QsWUFBRyxHQUNESCxhQUFXLGdCQUNYRyxNQUFBQSxHQUVBUixHQW5DWUssUUFBQTdDLEVBQUEsWUFxQ2RnRCxZQUFHLEdBQ0RILGFBQVcsVUFDWEcsTUFBQUEsR0FFQVIsR0F6Q1lLLFFBQUE3QyxFQUFBLFdBMkNkZ0QsWUFBRyxlQUNESCxhQUFXLFVBQ1hHLE1BQUFBLElBU0o1QyxFQUFBLEVBQ0lBLEVBQUpBLEVBQ0lDLEtBQ0FGLEtBQ0FELEVBQWUsV0FHbkJnQixHQUFBLEVBQ0lBLEdBQVUsQ0FLZCtDLEdBQUFJLEdBQUEsUUFBQSxXQUNBSixFQUFTSyxPQUNQTixFQUFRTSxZQUFSLFVBQ0FQLEdBQVF0QyxFQUNSUixHQUFVLEVBQ1ZDLElBQ0FqQixFQUFBQSxZQUFBQSxVQUNBb0MsRUFBVVosS0FBQUEsR0FDVlksV0FBVXRCLEVBQUtOLE9BSWpCeUQsRUFBQUcsR0FBQSxRQUFBLFdBQ0FILEVBQUFBLFlBQUEsVUFDRUgsRUFBUXRDLE9BQ1J1QyxHQUFRTSxFQUNScEQsR0FBVSxFQUNWRCxFQUFBQSxZQUFBLFVBQ0EyQyxJQUNBM0QsRUFBQUEsU0FBQUEsS0FpQmlCRCxFQUFBLFdBQ1ZxRSxHQUFHLFFBQVMzRCxHQXlCckJ5RCxFQUFRRSxHQUFHLFNBQVUsV0FDbkJkLFFBQVFDLElBQUksV0FDWmhDLEVBQWUrQyxZQUFZLFdBNkI3QixJQUFBbkMsR0FBQSxFQWdDSTdCLEVBQVMsRUFHYkMsRUFBQSxDQWtFRVMsR0FBQUEsR0FBVSxRQUFWLFdBQ0FDLEdBQVUsRUFDVlgsR0FBQSxFQUNBQyxFQUFBLEVBQ0F1RCxFQUFRbEMsRUFDUlEsRUFBQUEsU0FBQSxVQUNBMkIsRUFBUVEsS0FBUixJQUNBWixFQUFBQSxPQUNBRCxFQUFBQSxTQUFBQSxVQVRGQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKCgpID0+IHtcbiAgY29uc29sZS5sb2coJ0pTIHlvJyk7XG5cbiAgY29uc3QgJG51bWJlciA9ICQoJy5udW1iZXInKTtcbiAgY29uc3QgJGRvY3VtZW50ID0gJChkb2N1bWVudCk7XG4gIGNvbnN0IGF1ZGlvID0gJCgnYXVkaW8nKVswXTtcbiAgY29uc3QgJHNwbGFzaCA9ICQoJy5zcGxhc2gnKTtcbiAgY29uc3QgJGdhbWUgPSAkKCcjZ2FtZScpO1xuICBjb25zdCAkcGxheWdyb3VuZCA9ICQoJyNwbGF5Z3JvdW5kJyk7XG4gIGNvbnN0ICRmZWVkYmFjayA9ICQoJy5mZWVkYmFjaycpO1xuICBjb25zdCAkZW5kR2FtZSA9ICQoJy5lbmRnYW1lJyk7XG4gIGNvbnN0ICRzd2l0Y2ggPSAkKCcuc3dpdGNoJyk7XG4gIGNvbnN0ICRudW1iZXJEaXNwbGF5ID0gJCgnLm51bWJlckRpc3BsYXknKTtcbiAgY29uc3Qgc291bmRzID0gWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDhdO1xuICBjb25zdCB2aXN1YWxzID0ge1xuICAgIDE6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5maXJzdCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdwdWxzZScsXG4gICAgICBhbmltYXRpb25PdXQ6ICd6b29tT3V0JyxcbiAgICAgIGF1ZGlvOiAxXG4gICAgfSxcbiAgICAyOiB7XG4gICAgICBlbGVtZW50OiAkKCcuc2Vjb25kJyksXG4gICAgICBhbmltYXRpb25JbjogJ3pvb21JbicsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiAyXG4gICAgfSxcbiAgICAzOiB7XG4gICAgICBlbGVtZW50OiAkKCcudGhpcmQnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnZmxhc2gnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogM1xuICAgIH0sXG4gICAgNDoge1xuICAgICAgZWxlbWVudDogJCgnLmZvdXJ0aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdyb3RhdGVJbicsXG4gICAgICBhbmltYXRpb25PdXQ6ICdyb3RhdGVPdXQnLFxuICAgICAgYXVkaW86IDRcbiAgICB9LFxuICAgIDU6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5maWZ0aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmbGFzaHR3bycsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA1XG4gICAgfSxcbiAgICA2OiB7XG4gICAgICBlbGVtZW50OiAkKCcuc2l4dGgnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2xpZ2h0U3BlZWRPdXQnLFxuICAgICAgYXVkaW86IDZcbiAgICB9LFxuICAgIDc6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5zZXZlbnRoJyksXG4gICAgICBhbmltYXRpb25JbjogJycsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA3XG4gICAgfSxcbiAgICA4OiB7XG4gICAgICBlbGVtZW50OiAkKCcuZWlnaHRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ3NsaWRlSW5SaWdodCcsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA4XG4gICAgfVxuXG4gIH07XG5cblxuICAvLyBjdXJyZW50IHJvdW5kLiBlbXB0eSBwcm9ncmFtU2VxdWVuY2UgYXJyYXksXG4gIC8vZ2V0cyBmaWxsZWQgeDMgYXQgc3RhcnQgdGhlbiBpcyArMSBwZXIgcm91bmRcbiAgbGV0IGN1cnJlbnRSb3VuZCA9IDM7XG4gIGxldCBjdXJyZW50UGxheWVyTnVtID0gY3VycmVudFJvdW5kO1xuICBsZXQgcHJvZ3JhbVNlcXVlbmNlID0gW107XG4gIGxldCB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgbGV0IGN1cnJlbnRQbGF5ZXIgPSAncGxheWVyIDEnO1xuXG4gIC8vUGxheWluZy9tZXNzaW5nIG1vZGUgdmFycyBmb3IgZ2FtZSBvciBwbGF5Z3JvdW5kXG4gIGxldCBtZXNzaW5nID0gZmFsc2U7XG4gIGxldCBwbGF5aW5nID0gZmFsc2U7XG5cbiAgLy8gJG51bWJlci5oaWRlKCk7XG5cbiAgLy9nYW1lIGJ1dHRvbiBjbGljayBmdW5jdGlvbi0gc2hvd3MgY3VycmVudCBwbGF5ZXIsIHN3aXRjaGVzIHBsYXlpbmcgdG8gdHJ1ZSBhbmQgIGxhdW5jaGVzIHRoZSBrZXkgbGlzdGVuZXIgYW5kIHRoZSBidWlsZGdhbWUgZnVuY3Rpb24uXG4gICRnYW1lLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkc3BsYXNoLmhpZGUoKTtcbiAgICAkbnVtYmVyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICBwbGF5aW5nID0gdHJ1ZTtcbiAgICBtZXNzaW5nID0gZmFsc2U7XG4gICAgYnVpbGRHYW1lKCk7XG4gICAgJGZlZWRiYWNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAkZmVlZGJhY2suaHRtbChjdXJyZW50UGxheWVyKTtcbiAgICBzZXRUaW1lb3V0KGdhbWVJbml0LCAzMDAwKTtcbiAgfSk7XG5cbiAgLy9wbGF5Z3JvdW5kIGJ1dHRvbiBrZXkgbGlzdGVuZXIuXG4gICRwbGF5Z3JvdW5kLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkbnVtYmVyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAkc3BsYXNoLmhpZGUoKTtcbiAgICBtZXNzaW5nID0gdHJ1ZTtcbiAgICBwbGF5aW5nID0gZmFsc2U7XG4gICAgJGVuZEdhbWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgIGJ1aWxkR2FtZSgpO1xuICAgICRkb2N1bWVudC5rZXlwcmVzcyhrZXlMaXN0ZW5lcik7XG5cbiAgfSk7XG5cbiAgLy9zZXRzIHRoZSBnYW1lIGJvYXJkIHVwIGFzIGl0IHNob3VsZCBiZSBhdCB0aGUgYmVnaW5uaW5nIG9mIHJvdW5kLSBlc3BlY2lhbGx5IG1hdHRlcnMgYWZ0ZXIgdGhlIHJlc2V0IGlzIHByZXNzZWQuXG4gIGZ1bmN0aW9uIGJ1aWxkR2FtZSgpIHtcbiAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICBwcm9ncmFtU2VxdWVuY2UgPSBbXTtcbiAgICBjdXJyZW50Um91bmQgPSAzO1xuICAgIGN1cnJlbnRQbGF5ZXJOdW0gPSBjdXJyZW50Um91bmQ7XG4gICAgdXBkYXRlUGxheWVyKCk7XG4gICAgbG9zc2VzID0gMDtcbiAgICBjb3VudCA9IDA7XG4gICAgY3VycmVudFBsYXllciA9ICdQbGF5ZXIgMSc7XG4gIH1cblxuICBjb25zdCAkbnVtYmVycyA9ICQoJy5udW1iZXInKTtcbiAgJG51bWJlcnMub24oJ2NsaWNrJywga2V5TGlzdGVuZXIpO1xuXG4gIC8vYWN0aXZhdGVzIHRoZSBrZXkgbGlzdGVuZXIgZnVuY3Rpb24gd2hlbiBjYWxsZWQgYW5kIGF0dGFjaGVkIHRvIHRoZSBkb2N1bWVudCBmcm9tIHRoZSBnYW1lL3BsYXlncm91bmQgYnV0dG9ucy4gdGhlbiBwdXNoZXMgdGhlIGtleSBjb2RlICgxLTgpIGRvd24gdG8gdGhlIHZpc3VhbGlzZSBmdW5jdGlvbiBhbmQgbnVtYmVyRGlzcGxheSBlbGVtZW50KGZvciB0aGUgZWFzeSBtb2RlKS5cbiAgZnVuY3Rpb24ga2V5TGlzdGVuZXIoZSkge1xuICAgIC8vIGNoZWNrIHdoaWNoIGVsZW1lbnQgZmlyZWQgdGhlIGZ1bmN0aW9uXG4gICAgbGV0IG51bWJlciA9IG51bGw7XG4gICAgaWYoJChlLnRhcmdldCkuaXMoJ2J1dHRvbicpKSB7XG4gICAgICBudW1iZXIgPSAkKGUudGFyZ2V0KS5odG1sKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG51bWJlciA9IGUua2V5O1xuICAgIH1cblxuICAgIGlmICgocGxheWluZyB8fCBtZXNzaW5nKSAmJiB2aXN1YWxzW251bWJlcl0pIHtcbiAgICAgIGNvbnN0IGtleSA9IHZpc3VhbHNbbnVtYmVyXTtcbiAgICAgIGNvbnN0IHNrZXkgPSBudW1iZXI7XG4gICAgICB2aXN1YWxpc2Uoa2V5KTtcbiAgICAgIHVzZXJTZXF1ZW5jZS5wdXNoKHBhcnNlSW50KG51bWJlcikpO1xuICAgICAgJG51bWJlckRpc3BsYXkucmVtb3ZlQ2xhc3MoJ2hpZGRlbmVyJyk7XG4gICAgICAkbnVtYmVyRGlzcGxheS5odG1sKHNrZXkpO1xuICAgICAgc2V0VGltZW91dChoaWRlS2V5LCA1MDApO1xuICAgICAgY29tcGFyZUFycmF5cygpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGFjdGl2YXRlcyB0aGUgaGFyZCBtb2RlIHdoZW4gYnV0dG9uIGlzIGNoZWNrZWQsIHJlbW92aW5nIHRoZSBsYXJnZSBudW1iZXJzXG4gICRzd2l0Y2gub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnY2hlY2tlZCcpO1xuICAgICRudW1iZXJEaXNwbGF5LnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblxuICB9KTtcblxuICAvL3RoaXMgZnVuY3Rpb24gdGFrZXMgdGhlIGtleXMgcHVzaGVkIGZyb20gdGhlIHZpc3VhbHMgZnVuY3Rpb24gYW5kIHRyYW5zbGF0ZXMgdGhlbSBpbnRvIHRoZSBlYXN5bW9kZSBsYXJnZSBudW1iZXJzIG9uIHNjcmVlblxuICBmdW5jdGlvbiBlYXN5UGxheSAoa2V5KSB7XG4gICAgJG51bWJlckRpc3BsYXkucmVtb3ZlQ2xhc3MoJ2hpZGRlbmVyJyk7XG4gICAgJG51bWJlckRpc3BsYXkuaHRtbChrZXkpO1xuICAgIHNldFRpbWVvdXQoaGlkZUtleSwgNTAwKTtcblxuICB9XG5cbiAgLy9oaWRlcyB0aGUgZWFzeSBudW1zIGFmdGVyIHRoZSB0aW1lIGRpY3RhdGVkIGluIHRoZSBmdW5jdGlvbnMgYWJvdmUuXG4gIGZ1bmN0aW9uIGhpZGVLZXkoKSB7XG4gICAgJG51bWJlckRpc3BsYXkuYWRkQ2xhc3MoJ2hpZGRlbmVyJyk7XG4gIH1cblxuICAvL2luaXRpYWxpemVzIHRoZSBidWlsZGluZyBvZiB0aGUgcHJvZ3JhbSBhcnJheSwgZ2VuZXJhdGVzIGEgbnVtYmVyIGZyb20gMS04IHJhbmRvbWx5IGFuZCAqMyB0byBjcmVhdGUgZmlyc3QgYXJyYXkuXG4gIGZ1bmN0aW9uIGdhbWVJbml0ICgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRSb3VuZDsgaSsrKXtcbiAgICAgIGNvbnN0IHJhbmQgPSAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjgpKTtcbiAgICAgIHByb2dyYW1TZXF1ZW5jZS5wdXNoKHZpc3VhbHNbc291bmRzW3JhbmRdXSk7XG4gICAgfVxuICAgIHBsYXlCYWNrKCk7XG4gIH1cblxuICAvL2FsbG93cyB0aGUgc2VxdWVuY2UgdG8gcmVzdGFydCBhZnRlciB0aGUgbGFzdCByb3VuZCwgc3RvcHBpbmcgaXQgZnJvbSBqdXN0IHBsYXlpbmcgdGhlIGVuZCBudW1iZXIuXG4gIGxldCBzZXF1ZW5jZUluZGV4ID0gMDtcblxuICAvL3RoaXMgcGxheXMgYmFjayB0aGUgY29uc3RydWN0ZWQgcHJvZ3JhbSBhcnJheSBmcm9tIHN0YXJ0IHRvIGZpbmlzaC4gYWxzbyBoaWRlcyB0aGUgY3VycmVudCBwbGF5ZXIgZmVlZGJhY2suIGFuZCBjb25zb2xlIGxvZ3MgdGhlIHByb2dyYW0gc2VxIGFycmF5IGZvciBjaGVhdGluZy5cbiAgZnVuY3Rpb24gcGxheUJhY2soKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2VxdWVuY2VJbmRleCA8IGN1cnJlbnRSb3VuZCkge1xuICAgICAgICB2aXN1YWxpc2UocHJvZ3JhbVNlcXVlbmNlW3NlcXVlbmNlSW5kZXhdKTtcbiAgICAgICAgJGZlZWRiYWNrLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoY3VycmVudFBsYXllcik7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2dyYW1TZXF1ZW5jZVtzZXF1ZW5jZUluZGV4XS5hdWRpbyk7XG4gICAgICAgIHBsYXlCYWNrKCk7XG4gICAgICAgIHNlcXVlbmNlSW5kZXgrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlcXVlbmNlSW5kZXggPSAwO1xuICAgICAgICAkZG9jdW1lbnQua2V5cHJlc3Moa2V5TGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH0sIDEwMDApO1xuICB9XG5cbiAgLy90YWtlcyB0aGUgY29kZSBwdXNoZWQgZG93biBmcm9tIHRoZSBrZXlsaXN0ZW5lciBhbmQgdGhlIHBsYXliYWNrIGFuZCB0cmFuc2xhdGVzIGl0IHRvIHBsYXkgdGhlIGF1ZGlvIHNyYyBhbmQgYW5pbWF0ZSB0aGUgZGl2cyBhdCB0aGUgc2FtZSB0aW1lLiBjbG9uZXMgdGhlIHJlbGV2YW50IGRpdiBhbmQgYXBwZW5kcyBpdCB0byB0aGUgYm9keSBhbHNvLCBhbGxvd2luZyBmb3Igb3ZlcmxhcHMuIHRoZW4gZGVsZXRlcyBpdHNlbGYgYWZ0ZXIgbmVhcmx5IDIgc2Vjcy5cbiAgZnVuY3Rpb24gdmlzdWFsaXNlIChrZXkpIHtcbiAgICBhdWRpby5zcmMgPSBgc3JjL2Fzc2V0cy9hdWRpby8ke2tleS5hdWRpb30ud2F2YDtcbiAgICBhdWRpby5wbGF5KCk7XG4gICAgZWFzeVBsYXkoa2V5LmF1ZGlvKTtcbiAgICBjb25zdCAkZWxlbWVudCA9IGtleS5lbGVtZW50LmNsb25lKCk7XG4gICAgJGVsZW1lbnQuYXBwZW5kVG8oJ21haW4nKS5yZW1vdmVDbGFzcygnaGlkZGVuJykuYWRkQ2xhc3Moa2V5LmFuaW1hdGlvbkluKS5yZW1vdmVDbGFzcyhrZXkuYW5pbWF0aW9uT3V0KTtcbiAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcyhrZXkuYW5pbWF0aW9uSW4pLmFkZENsYXNzKGtleS5hbmltYXRpb25PdXQpO1xuICAgIH0sIDEyMDApO1xuICAgIHNldFRpbWVvdXQoICgpID0+IHtcbiAgICAgICRlbGVtZW50LnJlbW92ZSgpO1xuICAgIH0sIDE5MDApO1xuICB9XG5cbiAgbGV0IGxvc3NlcyA9IDA7XG4gIGxldCBjb3VudCAgPSAwO1xuXG4gIC8vIGNvbXBhcmVzIHRoZSB0d28gYXJyYXlzIHdoZW4gdGhlIGxlbmd0aCBtYXRjaGVzIHRoZSBjdXJyZW50IHJvdW5kLlxuICAvLyBpZiBwbGF5ZXIgcGFzc2VzIHRlc3QgKzEgaXMgYWRkZWQgdG8gcm91bmQgbGVuZ3RoIGFuZCBwbGF5YmFjayBzdGFydHMgYWdhaW4uXG4gIGZ1bmN0aW9uIGNvbXBhcmVBcnJheXMoKSB7XG4gICAgY29uc3QgdGhlU2FtZSA9IHVzZXJTZXF1ZW5jZS5sZW5ndGggPT09IHByb2dyYW1TZXF1ZW5jZS5sZW5ndGggJiYgdXNlclNlcXVlbmNlLmV2ZXJ5KCh2LGkpID0+IHYgPT09IHByb2dyYW1TZXF1ZW5jZVtpXS5hdWRpbyk7XG4gICAgY291bnQgKz0gMTtcbiAgICBpZiAoKGNvdW50ID09PSBjdXJyZW50Um91bmQpICYmIChsb3NzZXMgPT09IDApICYmIChwbGF5aW5nKSkge1xuICAgICAgY29uc29sZS5sb2codGhlU2FtZSk7XG4gICAgICBpZiAodGhlU2FtZSkge1xuICAgICAgICBjdXJyZW50Um91bmQgKz0gMTtcbiAgICAgICAgcm91bmRBZGRNYXRoKCk7XG4gICAgICAgIHJvdW5kUmVzZXQoKTtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoJ1Bhc3MhIC0gbmV4dCB1cCAnICsgY3VycmVudFBsYXllcik7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIHN0b3BCaW5kKCk7XG4gICAgICAgIHNldFRpbWVvdXQocGxheUJhY2ssIDMwMDApO1xuICAgICAgfSBlbHNlIGlmICghdGhlU2FtZSkge1xuICAgICAgICBsb3NzZXMgKz0gMTtcbiAgICAgICAgcm91bmRSZXNldCgpO1xuICAgICAgICBzdG9wQmluZCgpO1xuICAgICAgICBzZXRUaW1lb3V0KHBsYXlCYWNrLCAzMDAwKTtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoJ0ZhaWwhIHN1ZGRlbiBkZWF0aCEhIC1uZXh0IHVwICcgKyBjdXJyZW50UGxheWVyKTtcbiAgICAgICAgJGZlZWRiYWNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgLy90aGlzIGJvdHRvbSBwYXJ0IG9mIHRoZSBpZiBlbHNlIGFjdHMgYXMgdGhlIHN1ZGRlbiBkZWF0aCBjYWxjdWxhdG9yIHBvcnRpb24gb2YgdGhlIGdhbWUsIHdvcmtzIG9uIHdoZXRoZXIgYSBsb3NzIHdhcyBzdG9yZWQgaW4gdGhlICdsb3NzZXMnIHZhci5cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKChjb3VudCA9PT0gY3VycmVudFJvdW5kKSAmJiAobG9zc2VzICE9PSAwKSl7XG4gICAgICBpZiAodGhlU2FtZSkge1xuICAgICAgICAkZmVlZGJhY2suaHRtbChjdXJyZW50UGxheWVyICsgJyBXaW5zIScpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAkZW5kR2FtZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2UgaWYgKCF0aGVTYW1lKSB7XG4gICAgICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIgKyAnIEZhaWxzISEgLS0tLSBUSUUhJyk7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRlbmRHYW1lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vZnVuY3Rpb24gaXMgY2FsbGVkIGZyb20gdGhlIGNvbXBhcmUgYXJyYXlzIGZ1bmN0aW9uIGFuZCB1cHMgdGhlIHByb2dyYW0gYXJyYXkgYnkgMSByYW5kb21seSBnZW5lcmF0ZWQgbnVtYmVyLlxuICBmdW5jdGlvbiByb3VuZEFkZE1hdGggKCkge1xuICAgIGNvbnN0IHJhbmQgPSAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjgpKTtcbiAgICBwcm9ncmFtU2VxdWVuY2UucHVzaCh2aXN1YWxzW3NvdW5kc1tyYW5kXV0pO1xuICB9XG5cbiAgLy8gdGhpcyByZXNldHMgdGhlIHJvdW5kIGFmdGVyIGEgZmlyc3QgdGltZSB3aW4gb3IgZmFpbCwgYWxsb3dpbmcgZm9yIHRoZSBjdXJyZW50IHBsYXllciB0byBjaGFuZ2UgYnV0IG5vdCB0aGUgcm91bmQgbnVtYmVyIGZvciBzdWRkZW4gZGVhdGguXG4gIGZ1bmN0aW9uIHJvdW5kUmVzZXQgKCkge1xuICAgIHVzZXJTZXF1ZW5jZSA9IFtdO1xuICAgIGNvdW50ID0gMDtcbiAgICBjdXJyZW50UGxheWVyTnVtICs9IDE7XG4gICAgdXBkYXRlUGxheWVyKCk7XG4gIH1cblxuICAvL3VwZGF0ZXMgdGhlIGN1cnJlbnQgcGxheWVyIGFzIHRoZSByb3VuZHMgaW5jcmVhc2UtIGhhcyB0byBiZSBjdXJyZW50IHBsYXllciBudW0gZHVlIHRvIHRoZSBjdXJyZW50IHBsYXllciBuZWVkaW5nIHRvIHVwZGF0ZSBpbmRlcGVuZGVudGx5IGZyb20gdGhlIGN1cnJlbnQgcm91bmQgZm9yIHRoZSBzdWRkZW4gZGVhdGggcm91bmRcbiAgZnVuY3Rpb24gdXBkYXRlUGxheWVyICgpIHtcbiAgICBpZiAoY3VycmVudFBsYXllck51bSAlIDIgPT09IDApIHtcbiAgICAgIGN1cnJlbnRQbGF5ZXIgPSAnUGxheWVyIDInO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50UGxheWVyID0gJ1BsYXllciAxJztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wQmluZCAoKSB7XG4gICAgJGRvY3VtZW50LnVuYmluZCgna2V5cHJlc3MnLCBrZXlMaXN0ZW5lcik7XG4gIH1cblxuICAkZW5kR2FtZS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgcGxheWluZyA9IGZhbHNlO1xuICAgIG1lc3NpbmcgPSBmYWxzZTtcbiAgICBsb3NzZXMgPSAwO1xuICAgIGNvdW50ID0gMDtcbiAgICAkbnVtYmVyLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkZmVlZGJhY2suaHRtbCgnJyk7XG4gICAgJHNwbGFzaC5zaG93KCk7XG4gICAgJGVuZEdhbWUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgIHN0b3BCaW5kKCk7XG4gIH0pO1xuXG59KTtcblxuXG5cbi8vdG8gZG8gLSBtYWtlIHRoZSBrZXkgbGlzdGVuIG9ubHkgd29yayBvbmNlIHRoZSBrZXkgaGFzIHBsYXllZCBiYWNrXG4vL21hc3NpdmVseSByZWR1Y2UgdGhlIGNvbXBhcmUgYXJyYXlzIGZ1bmN0aW9uLCBtYXliZSBtb3ZlIGFkZCBtYXRoIG91dC5cbiJdfQ==
