"use strict";$(function(){function n(){for(var n=0;n<r;n++){var o=Math.floor(8*Math.random());h.push(m[d[o]])}console.log("initializing!"),e()}function e(){f=[],setTimeout(function(){if(!(g<r))return void(g=0);e(),o(h[g]),u.addClass("hidden"),console.log(h[g].audio),g++},1e3)}function o(n){t.src="audio/"+n.audio+".wav",t.play();var e=n.element.clone();e.appendTo("main").removeClass("hidden").addClass(n.animationIn).removeClass(n.animationOut),setTimeout(function(){e.removeClass(n.animationIn).addClass(n.animationOut)},1200),setTimeout(function(){e.remove()},1900)}function a(){var n=f.length===h.length&&f.every(function(n,e){return n===h[e].audio});if((I+=1)===r&&0===O)if(console.log(n),!0===n){var o=Math.floor(8*Math.random());h.push(m[d[o]]),f=[],I=0,e(),r+=1,u.html("Pass!"),u.removeClass("hidden")}else!1===n&&(console.log("sudden death!"),I=0,O+=1,r+=1,u.html("Fail!"),u.removeClass("hidden"),e());else I===r&&0!==O&&(!0===n?(console.log("winner winner!"),u.html("Pass!"),u.removeClass("hidden")):!1===n&&(console.log("tie"),u.html("Fail ---- TIE!"),u.removeClass("hidden")))}console.log("JS yo");var i=$(document),t=$("audio")[0],l=$(".welcome"),s=$("#game"),d=[49,50,51,52,53,54,55,56],u=$(".feedback"),m={49:{element:$(".first"),animationIn:"fadeInDownBig",animationOut:"zoomOut",audio:49},50:{element:$(".second"),animationIn:"zoomIn",animationOut:"fadeOut",audio:50},51:{element:$(".third"),animationIn:"flash",animationOut:"fadeOut",audio:51},52:{element:$(".fourth"),animationIn:"rotateIn",animationOut:"rotateOut",audio:52},53:{element:$(".fifth"),animationIn:"flashtwo",animationOut:"fadeOut",audio:53},54:{element:$(".sixth"),animationIn:"fadeInUpBig",animationOut:"lightSpeedOut",audio:54},55:{element:$(".seventh"),animationIn:"shake",animationOut:"fadeOut",audio:55},56:{element:$(".eighth"),animationIn:"slideInLeft",animationOut:"fadeOut",audio:56}},r=3,h=[],f=[],c=!1,v="Player 1";v=r%2==0?"Player 2":"Player 1",i.keypress(function(n){o(m[""+n.charCode])}),s.on("click",function(){l.hide(),c=!0,n(),u.removeClass("hidden"),u.html(v)});var g=0;!function(){console.log("listening..."),i.keypress(function(n){f.push(n.charCode),console.log(f),a()})}();var O=0,I=0});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwicmFuZCIsInByb2dyYW1TZXF1ZW5jZSIsInB1c2giLCJzb3VuZHMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjb25zb2xlIiwidmlzdWFscyIsImxvZyIsInBsYXlCYWNrIiwidXNlclNlcXVlbmNlIiwic2VxdWVuY2VJbmRleCIsInZpc3VhbGlzZSIsIiRmZWVkYmFjayIsImFkZENsYXNzIiwiYXVkaW8iLCIkZWxlbWVudCIsInBhdHRlcm4iLCJzZXRUaW1lb3V0IiwiZWxlbWVudCIsImNsb25lIiwicmVtb3ZlQ2xhc3MiLCJhbmltYXRpb25JbiIsImFuaW1hdGlvbk91dCIsInJlbW92ZSIsImxpc3RlbiIsInRoZVNhbWUiLCJsZW5ndGgiLCJldmVyeSIsInYiLCJpIiwibG9zc2VzIiwiY291bnQiLCJjdXJyZW50Um91bmQiLCJodG1sIiwiZG9jdW1lbnQiLCIkZG9jdW1lbnQiLCIkd2VsY29tZSIsIiRnYW1lIiwiNDkiLCJwbGF5aW5nIiwiY3VycmVudFBsYXllciIsImUiLCJjaGFyQ29kZSIsImdhbWVJbml0IiwiY29tcGFyZUFycmF5cyIsImtleXByZXNzIl0sIm1hcHBpbmdzIjoiWUFBQUEsR0FBRSxXQXNHSSxRQUFNQyxLQUNOQyxJQUFBQSxHQUFBQSxHQUFBQSxFQUFBQSxFQUFnQkMsRUFBYUMsSUFBT0gsQ0FDckMsR0FBQUEsR0FBQUksS0FBQUMsTUFBQSxFQUFBRCxLQUFBRSxTQUNEQyxHQUFZTCxLQUFBTSxFQUFaTCxFQUFBSCxLQUVETyxRQUFBRSxJQUFBLGlCQURDQyxJQWNFLFFBQUFBLEtBQ0FDLEtBQ0VELFdBQUFBLFdBR0FILEtBQUFBLEVBQVlOLEdBTVosWUFFRFcsRUFmSCxFQVFJQSxLQUxGQyxFQU1PWixFQUFBVyxJQUhMRSxFQUFVQyxTQUFTLFVBS25CSCxRQUFBQSxJQUFBQSxFQUFBQSxHQUFBSSxPQUhBSixLQVdKLEtBR0EsUUFBTUssR0FBV0MsR0FFakJDLEVBQUFBLElBQUFBLFNB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TURoQyxFQUFBVCxLQUFBeUMsRUFBQUMsVUFDRHJDLFFBQUFFLElBQUFFLEdBQ0FlLFFBU0EsSUFBQU0sR0FBQSxFQUNBQyxFQUFTYSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKCgpID0+IHtcbiAgY29uc29sZS5sb2coJ0pTIHlvJyk7XG5cbiAgY29uc3QgJGRvY3VtZW50ID0gJChkb2N1bWVudCk7XG4gIGNvbnN0IGF1ZGlvID0gJCgnYXVkaW8nKVswXTtcbiAgY29uc3QgJHdlbGNvbWUgPSAkKCcud2VsY29tZScpO1xuICBjb25zdCAkZ2FtZSA9ICQoJyNnYW1lJyk7XG4gIGNvbnN0IHNvdW5kcyA9IFs0OSw1MCw1MSw1Miw1Myw1NCw1NSw1Nl07XG4gIGNvbnN0ICRmZWVkYmFjayA9ICQoJy5mZWVkYmFjaycpO1xuICBjb25zdCB2aXN1YWxzID0ge1xuICAgIDQ5OiB7XG4gICAgICBlbGVtZW50OiAkKCcuZmlyc3QnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnZmFkZUluRG93bkJpZycsXG4gICAgICBhbmltYXRpb25PdXQ6ICd6b29tT3V0JyxcbiAgICAgIGF1ZGlvOiA0OVxuICAgIH0sXG4gICAgNTA6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5zZWNvbmQnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnem9vbUluJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2ZhZGVPdXQnLFxuICAgICAgYXVkaW86IDUwXG4gICAgfSxcbiAgICA1MToge1xuICAgICAgZWxlbWVudDogJCgnLnRoaXJkJyksXG4gICAgICBhbmltYXRpb25JbjogJ2ZsYXNoJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2ZhZGVPdXQnLFxuICAgICAgYXVkaW86IDUxXG4gICAgfSxcbiAgICA1Mjoge1xuICAgICAgZWxlbWVudDogJCgnLmZvdXJ0aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdyb3RhdGVJbicsXG4gICAgICBhbmltYXRpb25PdXQ6ICdyb3RhdGVPdXQnLFxuICAgICAgYXVkaW86IDUyXG4gICAgfSxcbiAgICA1Mzoge1xuICAgICAgZWxlbWVudDogJCgnLmZpZnRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ2ZsYXNodHdvJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2ZhZGVPdXQnLFxuICAgICAgYXVkaW86IDUzXG4gICAgfSxcbiAgICA1NDoge1xuICAgICAgZWxlbWVudDogJCgnLnNpeHRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ2ZhZGVJblVwQmlnJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2xpZ2h0U3BlZWRPdXQnLFxuICAgICAgYXVkaW86IDU0XG4gICAgfSxcbiAgICA1NToge1xuICAgICAgZWxlbWVudDogJCgnLnNldmVudGgnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnc2hha2UnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogNTVcbiAgICB9LFxuICAgIDU2OiB7XG4gICAgICBlbGVtZW50OiAkKCcuZWlnaHRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ3NsaWRlSW5MZWZ0JyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2ZhZGVPdXQnLFxuICAgICAgYXVkaW86IDU2XG4gICAgfVxuXG4gIH07XG5cbiAgLy8gY3VycmVudCByb3VuZC4gZW1wdHkgcHJvZ3JhbVNlcXVlbmNlIGFycmF5LFxuICAvL2dldHMgZmlsbGVkIHgzIGF0IHN0YXJ0IHRoZW4gKG5lZWRzIHRvIGJlICsgMSBvciAyIHBlciByb3VuZCkhISEhXG4gIGxldCBjdXJyZW50Um91bmQgPSAzO1xuICBsZXQgcHJvZ3JhbVNlcXVlbmNlID0gW107XG4gIGxldCB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgbGV0IG51bUNvZGUgPSBudWxsO1xuXG5cbiAgLy9QbGF5aW5nIHllcy8gbm8gc3dpdGNoXG4gIGxldCBwbGF5aW5nID0gZmFsc2U7XG5cblxuICBsZXQgY3VycmVudFBsYXllciA9ICdQbGF5ZXIgMSdcblxuICBpZiAoY3VycmVudFJvdW5kICUgMiA9PT0gMCkge1xuICAgIGN1cnJlbnRQbGF5ZXIgPSAnUGxheWVyIDInO1xuICB9IGVsc2Uge1xuICAgIGN1cnJlbnRQbGF5ZXIgPSAnUGxheWVyIDEnO1xuICB9XG5cblxuICAvL2Fzc2lnbnMgdGhlIGF1ZGlvIHNyYyBhY2NvcmRpbmcgdG8ga2V5cHJlc3MgaWQgb2Yga2V5cyAxLTguXG4gICRkb2N1bWVudC5rZXlwcmVzcyhmdW5jdGlvbihlKSB7XG4gICAgY29uc3QgcGF0dGVybiA9IHZpc3VhbHNbYCR7ZS5jaGFyQ29kZX1gXTtcbiAgICB2aXN1YWxpc2UocGF0dGVybik7XG4gIH0pO1xuXG5cbiAgLy9zd2l0Y2hlcyBwbGF5aW5nIHZhciB0byB0cnVlIGFuZCBpbml0aWFsemVzIHRoZSBnYW1lIDopXG4gIC8vaGlkZXMgdGhlIHdlbGNvbWUgZGl2XG4gICRnYW1lLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkd2VsY29tZS5oaWRlKCk7XG4gICAgcGxheWluZyA9IHRydWU7XG4gICAgZ2FtZUluaXQoKTtcbiAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIpO1xuICB9KTtcblxuICAvL2luaXRpYWxpemVzIHRoZSBidWlsZGluZyBvZiB0aGUgcHJvZ3JhbSBhcnJheVxuICBmdW5jdGlvbiBnYW1lSW5pdCAoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50Um91bmQ7IGkrKyl7XG4gICAgICBjb25zdCByYW5kID0gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo4KSk7XG4gICAgICBwcm9ncmFtU2VxdWVuY2UucHVzaCh2aXN1YWxzW3NvdW5kc1tyYW5kXV0pO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnaW5pdGlhbGl6aW5nIScpO1xuICAgIHBsYXlCYWNrKCk7XG4gIH1cblxuXG4gIC8vIGhlcmUgZG9lcyB0aGVyZSBuZWVkIHRvIGJlIGEgZ2FtZSBhZGQgcmFuZG9tIGFkZGl0aW9uIHRvIGFycmF5IE9SIGEgd2F5IG9mIHVzaW5nIHRoZSBhYm92ZSBmdW5jdGlvbiBqdXN0IHRvIGFkZCBvbmU/XG5cbiAgLy90aGlzIHBsYXlzIGJhY2sgdGhlIGNvbnN0cnVjdGVkIHByb2dyYW0gYXJyYXlcbiAgbGV0IHNlcXVlbmNlSW5kZXggPSAwO1xuXG5cbiAgZnVuY3Rpb24gcGxheUJhY2soKSB7XG4gICAgdXNlclNlcXVlbmNlID0gW107XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBhdWRpby5zcmMgPSBgYXVkaW8vJHtwcm9ncmFtU2VxdWVuY2Vbc2VxdWVuY2VJbmRleF0uYXVkaW99LndhdmA7XG4gICAgICAvLyBhdWRpby5wbGF5KCk7XG4gICAgICBpZiAoc2VxdWVuY2VJbmRleCA8IGN1cnJlbnRSb3VuZCkge1xuICAgICAgICBwbGF5QmFjaygpO1xuICAgICAgICB2aXN1YWxpc2UocHJvZ3JhbVNlcXVlbmNlW3NlcXVlbmNlSW5kZXhdKTtcbiAgICAgICAgJGZlZWRiYWNrLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvZ3JhbVNlcXVlbmNlW3NlcXVlbmNlSW5kZXhdLmF1ZGlvKTtcbiAgICAgICAgc2VxdWVuY2VJbmRleCsrO1xuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBzZXF1ZW5jZUluZGV4ID0gMDtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSwgMTAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiB2aXN1YWxpc2UgKHBhdHRlcm4pIHtcbiAgICAvLyBjb25zdCBwYXR0ZXJuID0gdmlzdWFsc1tpXTtcbiAgICBhdWRpby5zcmMgPSBgYXVkaW8vJHtwYXR0ZXJuLmF1ZGlvfS53YXZgO1xuICAgIGF1ZGlvLnBsYXkoKTtcbiAgICBjb25zdCAkZWxlbWVudCA9IHBhdHRlcm4uZWxlbWVudC5jbG9uZSgpO1xuICAgICRlbGVtZW50LmFwcGVuZFRvKCdtYWluJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmFkZENsYXNzKHBhdHRlcm4uYW5pbWF0aW9uSW4pLnJlbW92ZUNsYXNzKHBhdHRlcm4uYW5pbWF0aW9uT3V0KTtcbiAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcyhwYXR0ZXJuLmFuaW1hdGlvbkluKS5hZGRDbGFzcyhwYXR0ZXJuLmFuaW1hdGlvbk91dCk7XG4gICAgfSwgMTIwMCk7XG4gICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgJGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfSwgMTkwMCk7XG4gIH1cbiAgLy9GdW5jdGlvbiBwdXNoZXMga2V5IGNoYXJjb2RlcyB0aGUgdXNlciBpbnB1dHMgdG8gdGhlIHVzZXJTZXF1ZW5jZSBhcnJheS5cbiAgZnVuY3Rpb24gbGlzdGVuKCkge1xuICAgIGNvbnNvbGUubG9nKCdsaXN0ZW5pbmcuLi4nKTtcbiAgICAkZG9jdW1lbnQua2V5cHJlc3MoZnVuY3Rpb24oZSkge1xuICAgICAgdXNlclNlcXVlbmNlLnB1c2goZS5jaGFyQ29kZSk7XG4gICAgICBjb25zb2xlLmxvZyh1c2VyU2VxdWVuY2UpO1xuICAgICAgY29tcGFyZUFycmF5cygpO1xuICAgIH0pO1xuXG4gIH1cbiAgLy9cbiAgbGlzdGVuKCk7XG5cbiAgbGV0IGxvc3NlcyA9IDA7XG4gIGxldCBjb3VudCAgPSAwO1xuXG5cblxuICAvLyBjb21wYXJlcyB0aGUgdHdvIGFycmF5cyB3aGVuIHRoZSBsZW5ndGggbWF0Y2hlcyB0aGUgY3VycmVudCByb3VuZC5cbiAgLy8gbm90IHN1cGVyIHNpY2ssY291bGRudCBnZXQgaXQgc3RvcCB0cmlnZ2VyaW5nIG9uIGV2ZXJ5IGtleXByZXNzXG4gIC8vIGlmIHBsYXllciBwYXNzZXMgdGVzdCArMSBpcyBhZGRlZCB0byByb3VuZCBsZW5ndGggYW5kIHBsYXliYWNrIHN0YXJ0cyBhZ2Fpbi5cbiAgZnVuY3Rpb24gY29tcGFyZUFycmF5cygpIHtcbiAgICBjb25zdCB0aGVTYW1lID0gdXNlclNlcXVlbmNlLmxlbmd0aCA9PT0gcHJvZ3JhbVNlcXVlbmNlLmxlbmd0aCAmJiB1c2VyU2VxdWVuY2UuZXZlcnkoKHYsaSkgPT4gdiA9PT0gcHJvZ3JhbVNlcXVlbmNlW2ldLmF1ZGlvKTtcbiAgICBjb3VudCArPSAxO1xuICAgIGlmICgoY291bnQgPT09IGN1cnJlbnRSb3VuZCkgJiYgKGxvc3NlcyA9PT0gMCkpe1xuICAgICAgY29uc29sZS5sb2codGhlU2FtZSk7XG4gICAgICBpZiAodGhlU2FtZSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zdCByYW5kID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjgpO1xuICAgICAgICBwcm9ncmFtU2VxdWVuY2UucHVzaCh2aXN1YWxzW3NvdW5kc1tyYW5kXV0pO1xuICAgICAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICAgICAgY291bnQgPSAwO1xuICAgICAgICBwbGF5QmFjaygpO1xuICAgICAgICBjdXJyZW50Um91bmQgKz0gMTtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoJ1Bhc3MhJyk7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2UgaWYgKHRoZVNhbWUgPT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzdWRkZW4gZGVhdGghJyk7XG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgbG9zc2VzICs9IDE7XG4gICAgICAgIGN1cnJlbnRSb3VuZCArPSAxO1xuXG4gICAgICAgICRmZWVkYmFjay5odG1sKCdGYWlsIScpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICBwbGF5QmFjaygpO1xuXG4vL3RoaXMgYm90dG9tIHBhcnQgb2YgdGhlIGlmIGVsc2UgYWN0cyBhcyB0aGUgc3VkZGVuIGRlYXRoIGNhbGN1bGF0b3IgcG9ydGlvbiBvZiB0aGUgZ2FtZSwgd29ya3Mgb24gd2hldGhlciBhIGxvc3Mgd2FzIHN0b3JlZCBpbiB0aGUgJ2xvc3NlcycgdmFyLlxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKGNvdW50ID09PSBjdXJyZW50Um91bmQpICYmIChsb3NzZXMgIT09IDApKXtcbiAgICAgIGlmICh0aGVTYW1lID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd3aW5uZXIgd2lubmVyIScpO1xuICAgICAgICAkZmVlZGJhY2suaHRtbCgnUGFzcyEnKTtcbiAgICAgICAgJGZlZWRiYWNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSBpZiAodGhlU2FtZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3RpZScpO1xuICAgICAgICAkZmVlZGJhY2suaHRtbCgnRmFpbCAtLS0tIFRJRSEnKTtcbiAgICAgICAgJGZlZWRiYWNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG59KTtcbiJdfQ==
