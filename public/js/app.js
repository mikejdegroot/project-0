"use strict";$(function(){function e(){I=v%2==0?"Player 2":"Player 1"}function n(){for(var e=0;e<c;e++){var n=Math.floor(8*Math.random());O.push(f[h[n]])}console.log("initializing!"),a()}function a(){g=[],setTimeout(function(){if(!(p<c))return void(p=0);a(),t(O[p]),m.addClass("hidden"),m.html(I),console.log(O[p].audio),p++},1e3)}function t(e){m.html(I),s.src="audio/"+e.audio+".wav",s.play();var n=e.element.clone();n.appendTo("main").removeClass("hidden").addClass(e.animationIn).removeClass(e.animationOut),setTimeout(function(){n.removeClass(e.animationIn).addClass(e.animationOut)},1200),setTimeout(function(){n.remove()},1900)}function i(){var n=g.length===O.length&&g.every(function(e,n){return e===O[n].audio});if((T+=1)===c&&0===y)if(console.log(n),!0===n){var t=Math.floor(8*Math.random());O.push(f[h[t]]),console.log(O),g=[],T=0,c+=1,v+=1,e(),m.html("Pass! - next up "+I),m.removeClass("hidden"),setTimeout(a,3e3)}else!1===n&&(g=[],T=0,y+=1,v+=1,setTimeout(a,3e3),e(),m.html("Fail! sudden death!! -next up "+I),m.removeClass("hidden"));else T===c&&0!==y&&(!0===n?(m.html(I+" Wins!"),m.removeClass("hidden"),u.removeClass("hidden")):!1===n&&(m.html(I+" Fails!! ---- TIE!"),m.removeClass("hidden"),r.removeClass("hidden")))}console.log("JS yo");var o=$(document),s=$("audio")[0],d=$(".welcome"),l=$("#game"),m=$(".feedback"),u=$(".reset"),r=$(".endgame"),h=[49,50,51,52,53,54,55,56],f={49:{element:$(".first"),animationIn:"fadeInDownBig",animationOut:"zoomOut",audio:49},50:{element:$(".second"),animationIn:"zoomIn",animationOut:"fadeOut",audio:50},51:{element:$(".third"),animationIn:"flash",animationOut:"fadeOut",audio:51},52:{element:$(".fourth"),animationIn:"rotateIn",animationOut:"rotateOut",audio:52},53:{element:$(".fifth"),animationIn:"flashtwo",animationOut:"fadeOut",audio:53},54:{element:$(".sixth"),animationIn:"fadeInUpBig",animationOut:"lightSpeedOut",audio:54},55:{element:$(".seventh"),animationIn:"shake",animationOut:"fadeOut",audio:55},56:{element:$(".eighth"),animationIn:"slideInLeft",animationOut:"fadeOut",audio:56}},c=3,v=c,O=[],g=[],C=!1,I="player 1";o.keypress(function(e){t(f[""+e.charCode])}),l.on("click",function(){d.hide(),C=!0,m.removeClass("hidden"),m.html(I),setTimeout(n,3e3)});var p=0;!function(){console.log("listening..."),o.keypress(function(e){g.push(e.charCode),i()})}();var y=0,T=0;r.on("click",function(){c=3,v=c,O=[],g=[],C=!1,e(),y=0,T=0,m.html(""),d.show(),r.addClass("hidden")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwidXBkYXRlUGxheWVyIiwiY3VycmVudFBsYXllciIsImdhbWVJbml0IiwiY29uc29sZSIsImxvZyIsImkiLCJjdXJyZW50Um91bmQiLCJwbGF5QmFjayIsInByb2dyYW1TZXF1ZW5jZSIsInB1c2giLCJ2aXN1YWxzIiwic291bmRzIiwicmFuZCIsIiRmZWVkYmFjayIsInNlcXVlbmNlSW5kZXgiLCJ2aXN1YWxpc2UiLCJodG1sIiwiYXVkaW8iLCJzZXRUaW1lb3V0IiwicGF0dGVybiIsIiRlbGVtZW50IiwicmVtb3ZlQ2xhc3MiLCJzcmMiLCJlbGVtZW50IiwiY2xvbmUiLCJhcHBlbmRUbyIsImFkZENsYXNzIiwiYW5pbWF0aW9uSW4iLCJhbmltYXRpb25PdXQiLCJsaXN0ZW4iLCJyZW1vdmUiLCIkZG9jdW1lbnQiLCJsZW5ndGgiLCJ1c2VyU2VxdWVuY2UiLCJldmVyeSIsInYiLCJjb3VudCIsImxvc3NlcyIsImN1cnJlbnRQbGF5ZXJOdW0iLCJ0aGVTYW1lIiwiJGVuZEdhbWUiLCJkb2N1bWVudCIsIiR3ZWxjb21lIiwiJGdhbWUiLCI0OSIsIjUwIiwiNTEiLCI1MiIsIjUzIiwiNTQiLCI1NSIsIjU2IiwicGxheWluZyIsImtleXByZXNzIiwiZSIsImNoYXJDb2RlIiwic2hvdyJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0EyR0csUUFBTUMsS0FFTkMsRUFEQ0EsRUFBZ0IsR0FBaEIsRUFDRCxXQUdrQixXQUlsQixRQUFBQyxLQUNEQyxJQUFBQSxHQUFRQyxHQUFJLEVBQUFDLEVBQUFDLEVBQVpELElBQUEsQ0FDQUUsR0FBQUEsR0FBQUEsS0FBQUEsTUFBQUEsRUFBQUEsS0FBQUEsU0FDREMsR0FBQUMsS0FBQUMsRUFBQUMsRUFBQUMsS0FHRFQsUUFBQUMsSUFBQSxpQkFKRUcsSUFnQklNLFFBQUFBLEtBQ0FBLEtBQ0FWLFdBQUFBLFdBQ0FXLEtBQUFBLEVBQUFBLEdBV0pELFlBUklDLEVBQWdCLEVBVGxCUCxL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Q0F5QixLQUtBbUIsR0FBVSxFQU1kbkQsRUFBQSxVQUlDOEIsR0FIRHNCLFNBQUEsU0FBQUMsR0FNQXZDLEVBTGtCTCxFQUFBQSxHQUFXNEMsRUFBRUMsYUFXN0IxQyxFQUFBQSxHQUFBQSxRQUFlWixXQUNmaUIsRUFBQUEsT0FMRmtDLEdBQUEsRUFHRXZDLEVBQVVRLFlBQVksVUFLeEJSLEVBQVNiLEtBQUFBLEdBQ1BrQixXQUFJb0IsRUFBQUEsTUEyQkYsSUFBQXhCLEdBQUlBLEdBcUNMLFdBRUZYLFFBQUFDLElBQUEsZ0JBQ0QyQixFQUFBc0IsU0FBQSxTQUFBQyxHQUNBekIsRUFBQUEsS0FBQUEsRUFBQUEsVUFFSVEsUUFTRixJQUFBQSxHQUFNRSxFQUErRUgsRUFBU0QsQ0FzRDlGTyxHQUFBQSxHQUFTYyxRQUFULFdBQ0FoQixFQUFTZCxFQVhYWSxFQUFBaEMsRUFuT0ZFLEtBdU9JeUIsS0FDQW1CLEdBQVUsRUFDVnBELElBQ0FxQyxFQUFTLEVBQ1RELEVBQVEsRUFDUnZCLEVBQVVHLEtBQUssSUFDZjBCLEVBQVNjLE9BQ1RoQixFQUFTZCxTQUFTIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xuICBjb25zb2xlLmxvZygnSlMgeW8nKTtcblxuICBjb25zdCAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcbiAgY29uc3QgYXVkaW8gPSAkKCdhdWRpbycpWzBdO1xuICBjb25zdCAkd2VsY29tZSA9ICQoJy53ZWxjb21lJyk7XG4gIGNvbnN0ICRnYW1lID0gJCgnI2dhbWUnKTtcbiAgY29uc3QgJGZlZWRiYWNrID0gJCgnLmZlZWRiYWNrJyk7XG4gIGNvbnN0ICRyZXNldCA9ICQoJy5yZXNldCcpO1xuICBjb25zdCAkZW5kR2FtZSA9ICQoJy5lbmRnYW1lJylcblxuICBjb25zdCBzb3VuZHMgPSBbNDksIDUwLCA1MSwgNTIsIDUzLCA1NCwgNTUsIDU2XTtcblxuXG4gIGNvbnN0IHZpc3VhbHMgPSB7XG4gICAgNDk6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5maXJzdCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmYWRlSW5Eb3duQmlnJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ3pvb21PdXQnLFxuICAgICAgYXVkaW86IDQ5XG4gICAgfSxcbiAgICA1MDoge1xuICAgICAgZWxlbWVudDogJCgnLnNlY29uZCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICd6b29tSW4nLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogNTBcbiAgICB9LFxuICAgIDUxOiB7XG4gICAgICBlbGVtZW50OiAkKCcudGhpcmQnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnZmxhc2gnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogNTFcbiAgICB9LFxuICAgIDUyOiB7XG4gICAgICBlbGVtZW50OiAkKCcuZm91cnRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ3JvdGF0ZUluJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ3JvdGF0ZU91dCcsXG4gICAgICBhdWRpbzogNTJcbiAgICB9LFxuICAgIDUzOiB7XG4gICAgICBlbGVtZW50OiAkKCcuZmlmdGgnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnZmxhc2h0d28nLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogNTNcbiAgICB9LFxuICAgIDU0OiB7XG4gICAgICBlbGVtZW50OiAkKCcuc2l4dGgnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnZmFkZUluVXBCaWcnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnbGlnaHRTcGVlZE91dCcsXG4gICAgICBhdWRpbzogNTRcbiAgICB9LFxuICAgIDU1OiB7XG4gICAgICBlbGVtZW50OiAkKCcuc2V2ZW50aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdzaGFrZScsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA1NVxuICAgIH0sXG4gICAgNTY6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5laWdodGgnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnc2xpZGVJbkxlZnQnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogNTZcbiAgICB9XG5cbiAgfTtcblxuICAvLyBjdXJyZW50IHJvdW5kLiBlbXB0eSBwcm9ncmFtU2VxdWVuY2UgYXJyYXksXG4gIC8vZ2V0cyBmaWxsZWQgeDMgYXQgc3RhcnQgdGhlbiBpcyArMSBwZXIgcm91bmRcblxuXG4gIGxldCBjdXJyZW50Um91bmQgPSAzO1xuICBsZXQgY3VycmVudFBsYXllck51bSA9IGN1cnJlbnRSb3VuZDtcblxuXG4gIGxldCBwcm9ncmFtU2VxdWVuY2UgPSBbXTtcbiAgbGV0IHVzZXJTZXF1ZW5jZSA9IFtdO1xuICBsZXQgbnVtQ29kZSA9IG51bGw7XG5cblxuICAvL1BsYXlpbmcgeWVzLyBubyBzd2l0Y2hcbiAgbGV0IHBsYXlpbmcgPSBmYWxzZTtcblxuXG4gIGxldCBjdXJyZW50UGxheWVyID0gJ3BsYXllciAxJztcblxuXG4gIC8vYXNzaWducyB0aGUgYXVkaW8gc3JjIGFjY29yZGluZyB0byBrZXlwcmVzcyBpZCBvZiBrZXlzIDEtOC5cbiAgJGRvY3VtZW50LmtleXByZXNzKGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCBwYXR0ZXJuID0gdmlzdWFsc1tgJHtlLmNoYXJDb2RlfWBdO1xuICAgIHZpc3VhbGlzZShwYXR0ZXJuKTtcbiAgfSk7XG5cblxuICAvL3N3aXRjaGVzIHBsYXlpbmcgdmFyIHRvIHRydWUgYW5kIGluaXRpYWx6ZXMgdGhlIGdhbWUgOilcbiAgLy9oaWRlcyB0aGUgd2VsY29tZSBkaXZcbiAgJGdhbWUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICR3ZWxjb21lLmhpZGUoKTtcbiAgICBwbGF5aW5nID0gdHJ1ZTtcbiAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIpO1xuICAgIHNldFRpbWVvdXQoZ2FtZUluaXQsIDMwMDApO1xuICB9KTtcblxuICBmdW5jdGlvbiB1cGRhdGVQbGF5ZXIgKCkge1xuICAgIGlmIChjdXJyZW50UGxheWVyTnVtICUgMiA9PT0gMCkge1xuICAgICAgY3VycmVudFBsYXllciA9ICdQbGF5ZXIgMic7XG4gICAgICAvLyBjb25zb2xlLmxvZyhjdXJyZW50Um91bmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50UGxheWVyID0gJ1BsYXllciAxJztcbiAgICB9XG4gIH1cbiAgLy9pbml0aWFsaXplcyB0aGUgYnVpbGRpbmcgb2YgdGhlIHByb2dyYW0gYXJyYXlcbiAgZnVuY3Rpb24gZ2FtZUluaXQgKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudFJvdW5kOyBpKyspe1xuICAgICAgY29uc3QgcmFuZCA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqOCkpO1xuICAgICAgcHJvZ3JhbVNlcXVlbmNlLnB1c2godmlzdWFsc1tzb3VuZHNbcmFuZF1dKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ2luaXRpYWxpemluZyEnKTtcbiAgICBwbGF5QmFjaygpO1xuICB9XG5cblxuICAvLyBoZXJlIGRvZXMgdGhlcmUgbmVlZCB0byBiZSBhIGdhbWUgYWRkIHJhbmRvbSBhZGRpdGlvbiB0byBhcnJheSBPUiBhIHdheSBvZiB1c2luZyB0aGUgYWJvdmUgZnVuY3Rpb24ganVzdCB0byBhZGQgb25lP1xuXG4gIC8vdGhpcyBwbGF5cyBiYWNrIHRoZSBjb25zdHJ1Y3RlZCBwcm9ncmFtIGFycmF5XG4gIGxldCBzZXF1ZW5jZUluZGV4ID0gMDtcblxuXG4gIGZ1bmN0aW9uIHBsYXlCYWNrKCkge1xuICAgIHVzZXJTZXF1ZW5jZSA9IFtdO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNlcXVlbmNlSW5kZXggPCBjdXJyZW50Um91bmQpIHtcbiAgICAgICAgcGxheUJhY2soKTtcbiAgICAgICAgdmlzdWFsaXNlKHByb2dyYW1TZXF1ZW5jZVtzZXF1ZW5jZUluZGV4XSk7XG4gICAgICAgICRmZWVkYmFjay5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIpO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9ncmFtU2VxdWVuY2Vbc2VxdWVuY2VJbmRleF0uYXVkaW8pO1xuICAgICAgICBzZXF1ZW5jZUluZGV4Kys7XG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIHNlcXVlbmNlSW5kZXggPSAwO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9LCAxMDAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZpc3VhbGlzZSAocGF0dGVybikge1xuICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIpO1xuICAgIGF1ZGlvLnNyYyA9IGBhdWRpby8ke3BhdHRlcm4uYXVkaW99LndhdmA7XG4gICAgYXVkaW8ucGxheSgpO1xuICAgIGNvbnN0ICRlbGVtZW50ID0gcGF0dGVybi5lbGVtZW50LmNsb25lKCk7XG4gICAgJGVsZW1lbnQuYXBwZW5kVG8oJ21haW4nKS5yZW1vdmVDbGFzcygnaGlkZGVuJykuYWRkQ2xhc3MocGF0dGVybi5hbmltYXRpb25JbikucmVtb3ZlQ2xhc3MocGF0dGVybi5hbmltYXRpb25PdXQpO1xuICAgIHNldFRpbWVvdXQoICgpID0+IHtcbiAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKHBhdHRlcm4uYW5pbWF0aW9uSW4pLmFkZENsYXNzKHBhdHRlcm4uYW5pbWF0aW9uT3V0KTtcbiAgICB9LCAxMjAwKTtcbiAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAkZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9LCAxOTAwKTtcbiAgfVxuXG4gIC8vRnVuY3Rpb24gcHVzaGVzIGtleSBjaGFyY29kZXMgdGhlIHVzZXIgaW5wdXRzIHRvIHRoZSB1c2VyU2VxdWVuY2UgYXJyYXkuXG4gIGZ1bmN0aW9uIGxpc3RlbigpIHtcbiAgICBjb25zb2xlLmxvZygnbGlzdGVuaW5nLi4uJyk7XG4gICAgJGRvY3VtZW50LmtleXByZXNzKGZ1bmN0aW9uKGUpIHtcbiAgICAgIHVzZXJTZXF1ZW5jZS5wdXNoKGUuY2hhckNvZGUpO1xuICAgICAgLy8gY29uc29sZS5sb2codXNlclNlcXVlbmNlKTtcbiAgICAgIGNvbXBhcmVBcnJheXMoKTtcbiAgICB9KTtcblxuICB9XG4gIC8vXG4gIGxpc3RlbigpO1xuXG4gIGxldCBsb3NzZXMgPSAwO1xuICBsZXQgY291bnQgID0gMDtcblxuXG5cbiAgLy8gY29tcGFyZXMgdGhlIHR3byBhcnJheXMgd2hlbiB0aGUgbGVuZ3RoIG1hdGNoZXMgdGhlIGN1cnJlbnQgcm91bmQuXG4gIC8vIG5vdCBzdXBlciBzaWNrLGNvdWxkbnQgZ2V0IGl0IHN0b3AgdHJpZ2dlcmluZyBvbiBldmVyeSBrZXlwcmVzc1xuICAvLyBpZiBwbGF5ZXIgcGFzc2VzIHRlc3QgKzEgaXMgYWRkZWQgdG8gcm91bmQgbGVuZ3RoIGFuZCBwbGF5YmFjayBzdGFydHMgYWdhaW4uXG4gIGZ1bmN0aW9uIGNvbXBhcmVBcnJheXMoKSB7XG4gICAgY29uc3QgdGhlU2FtZSA9IHVzZXJTZXF1ZW5jZS5sZW5ndGggPT09IHByb2dyYW1TZXF1ZW5jZS5sZW5ndGggJiYgdXNlclNlcXVlbmNlLmV2ZXJ5KCh2LGkpID0+IHYgPT09IHByb2dyYW1TZXF1ZW5jZVtpXS5hdWRpbyk7XG4gICAgY291bnQgKz0gMTtcbiAgICBpZiAoKGNvdW50ID09PSBjdXJyZW50Um91bmQpICYmIChsb3NzZXMgPT09IDApKXtcbiAgICAgIGNvbnNvbGUubG9nKHRoZVNhbWUpO1xuICAgICAgaWYgKHRoZVNhbWUgPT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgcmFuZCA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqOCkpO1xuICAgICAgICBwcm9ncmFtU2VxdWVuY2UucHVzaCh2aXN1YWxzW3NvdW5kc1tyYW5kXV0pO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9ncmFtU2VxdWVuY2UpO1xuICAgICAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICAgICAgY291bnQgPSAwO1xuICAgICAgICBjdXJyZW50Um91bmQgKz0gMTtcbiAgICAgICAgY3VycmVudFBsYXllck51bSArPSAxO1xuICAgICAgICB1cGRhdGVQbGF5ZXIoKTtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoJ1Bhc3MhIC0gbmV4dCB1cCAnICsgY3VycmVudFBsYXllcik7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIHNldFRpbWVvdXQocGxheUJhY2ssIDMwMDApO1xuICAgICAgfSBlbHNlIGlmICh0aGVTYW1lID09PSBmYWxzZSkge1xuICAgICAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICAgICAgY291bnQgPSAwO1xuICAgICAgICBsb3NzZXMgKz0gMTtcbiAgICAgICAgY3VycmVudFBsYXllck51bSArPSAxO1xuICAgICAgICBzZXRUaW1lb3V0KHBsYXlCYWNrLCAzMDAwKTtcbiAgICAgICAgdXBkYXRlUGxheWVyKCk7XG4gICAgICAgICRmZWVkYmFjay5odG1sKCdGYWlsISBzdWRkZW4gZGVhdGghISAtbmV4dCB1cCAnICsgY3VycmVudFBsYXllcik7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cblxuXG4gICAgICAgIC8vdGhpcyBib3R0b20gcGFydCBvZiB0aGUgaWYgZWxzZSBhY3RzIGFzIHRoZSBzdWRkZW4gZGVhdGggY2FsY3VsYXRvciBwb3J0aW9uIG9mIHRoZSBnYW1lLCB3b3JrcyBvbiB3aGV0aGVyIGEgbG9zcyB3YXMgc3RvcmVkIGluIHRoZSAnbG9zc2VzJyB2YXIuXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgoY291bnQgPT09IGN1cnJlbnRSb3VuZCkgJiYgKGxvc3NlcyAhPT0gMCkpe1xuICAgICAgaWYgKHRoZVNhbWUgPT09IHRydWUpIHtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoY3VycmVudFBsYXllciArICcgV2lucyEnKTtcbiAgICAgICAgJGZlZWRiYWNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgJHJlc2V0LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSBpZiAodGhlU2FtZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoY3VycmVudFBsYXllciArICcgRmFpbHMhISAtLS0tIFRJRSEnKTtcbiAgICAgICAgJGZlZWRiYWNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgJGVuZEdhbWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgJGVuZEdhbWUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIGN1cnJlbnRSb3VuZCA9IDM7XG4gICAgY3VycmVudFBsYXllck51bSA9IGN1cnJlbnRSb3VuZDtcbiAgICBwcm9ncmFtU2VxdWVuY2UgPSBbXTtcbiAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICBwbGF5aW5nID0gZmFsc2U7XG4gICAgdXBkYXRlUGxheWVyKCk7XG4gICAgbG9zc2VzID0gMDtcbiAgICBjb3VudCA9IDA7XG4gICAgJGZlZWRiYWNrLmh0bWwoJycpO1xuICAgICR3ZWxjb21lLnNob3coKTtcbiAgICAkZW5kR2FtZS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gIH0pO1xuXG5cbn0pO1xuIl19
