"use strict";$(function(){function e(){T=O%2==0?"Player 2":"Player 1"}function n(e){f.removeClass("hiddener"),f.html(e),setTimeout(o,500)}function o(){f.addClass("hiddener")}function i(){for(var e=0;e<C;e++){var n=Math.floor(8*Math.random());p.push(g[v[n]])}console.log("initializing!"),a()}function a(){I=[],setTimeout(function(){if(!(w<C))return void(w=0);a(),t(p[w]),h.addClass("hidden"),h.html(T),console.log(p[w].audio),console.log(I),w++},1e3)}function t(e){d.src="src/assets/audio/"+e.audio+".wav",d.play(),n(e.audio);var o=e.element.clone();o.appendTo("main").removeClass("hidden").addClass(e.animationIn).removeClass(e.animationOut),setTimeout(function(){o.removeClass(e.animationIn).addClass(e.animationOut)},1200),setTimeout(function(){o.remove()},1900)}function s(){var n=I.length===p.length&&I.every(function(e,n){return e===p[n].audio});if(console.log("userSequence",I),console.log("programSequence",p),(S+=1)===C&&0===M&&!0!==y)if(console.log(n),!0===n){var o=Math.floor(8*Math.random());p.push(g[v[o]]),console.log(p),I=[],S=0,C+=1,O+=1,e(),h.html("Pass! - next up "+T),h.removeClass("hidden"),setTimeout(a,3e3)}else!1===n&&!0!==y&&(I=[],S=0,M+=1,O+=1,setTimeout(a,3e3),e(),h.html("Fail! sudden death!! -next up "+T),h.removeClass("hidden"));else S===C&&0!==M&&!0!==y&&(!0===n?(h.html(T+" Wins!"),h.removeClass("hidden"),c.removeClass("hidden")):!1===n&&!0!==y&&(h.html(T+" Fails!! ---- TIE!"),h.removeClass("hidden"),c.removeClass("hidden")))}console.log("JS yo");var l=$(document),d=$("audio")[0],u=$(".welcome"),m=$("#game"),r=$("#playground"),h=$(".feedback"),c=($(".reset"),$(".endgame")),f=($(".switch"),$(".numberDisplay")),v=[1,2,3,4,5,6,7,8],g={1:{element:$(".first"),animationIn:"fadeInDownBig",animationOut:"zoomOut",audio:1},2:{element:$(".second"),animationIn:"zoomIn",animationOut:"fadeOut",audio:2},3:{element:$(".third"),animationIn:"flash",animationOut:"fadeOut",audio:3},4:{element:$(".fourth"),animationIn:"rotateIn",animationOut:"rotateOut",audio:4},5:{element:$(".fifth"),animationIn:"flashtwo",animationOut:"fadeOut",audio:5},6:{element:$(".sixth"),animationIn:"fadeInUpBig",animationOut:"lightSpeedOut",audio:6},7:{element:$(".seventh"),animationIn:"shake",animationOut:"fadeOut",audio:7},8:{element:$(".eighth"),animationIn:"slideInLeft",animationOut:"fadeOut",audio:8}},C=3,O=C,p=[],I=[],y=!1,k=!1,T="player 1";l.keypress(function(e){var n=g[e.key];if(!0===k||!0===y&&n){var i=e.key;t(n),f.removeClass("hiddener"),f.html(i),setTimeout(o,500)}}),m.on("click",function(){u.hide(),k=!0,h.removeClass("hidden"),h.html(T),setTimeout(i,3e3)}),r.on("click",function(){u.hide(),y=!0,c.removeClass("hidden")});var w=0;!function(){console.log("listening..."),l.keypress(function(e){I.push(parseInt(e.key)),s()})}();var M=0,S=0;c.on("click",function(){C=3,O=C,p=[],I=[],k=!1,y=!1,e(),M=0,S=0,h.html(""),u.show(),c.addClass("hidden")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwidXBkYXRlUGxheWVyIiwiY3VycmVudFBsYXllciIsImVhc3lNb2RlIiwia2V5IiwiJG51bWJlckRpc3BsYXkiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic2V0VGltZW91dCIsImhpZGVLZXkiLCIkZmVlZGJhY2siLCJodG1sIiwiZ2FtZUluaXQiLCJzZXF1ZW5jZUluZGV4IiwiY3VycmVudFJvdW5kIiwiaSIsInJhbmQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwcm9ncmFtU2VxdWVuY2UiLCJwdXNoIiwidmlzdWFscyIsInNvdW5kcyIsImNvbnNvbGUiLCJsb2ciLCJwbGF5QmFjayIsIiRlbGVtZW50IiwidmlzdWFsaXNlIiwiYXVkaW8iLCJ1c2VyU2VxdWVuY2UiLCIkZG9jdW1lbnQiLCJjb21wYXJlQXJyYXlzIiwic3JjIiwicGxheSIsImxvc3NlcyIsImVsZW1lbnQiLCJjbG9uZSIsImNvdW50IiwiYW5pbWF0aW9uSW4iLCJhbmltYXRpb25PdXQiLCJ0aGVTYW1lIiwibGVuZ3RoIiwiZXZlcnkiLCJ2IiwiJGVuZEdhbWUiLCJtZXNzaW5nIiwiY3VycmVudFBsYXllck51bSIsInBsYXlpbmciLCIkd2VsY29tZSIsImRvY3VtZW50IiwiJGdhbWUiLCIkcGxheWdyb3VuZCIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4Iiwic2tleSIsImUiLCJvbiIsImhpZGUiLCJzaG93Il0sIm1hcHBpbmdzIjoiWUFBQUEsR0FBRSxXQTJIRyxRQUFNQyxLQUVOQyxFQURDQSxFQUFnQixHQUFoQixFQUNELFdBSUgsV0FDQSxRQUFTQyxHQUFVQyxHQTJCbkJDLEVBQUFDLFlBQW1CLFlBQ2pCRCxFQUFlRSxLQUFBQSxHQUNoQkMsV0FBQUMsRUFBQSxLQTJCS0MsUUFBQUEsS0FDQUEsRUFBVUMsU0FBS1QsWUF4QnJCLFFBQVNVLEtBOEJIQyxJQUFBQSxHQUFBQSxHQUFBQSxFQUFBQSxFQUFnQkMsRUFBaEJDLElB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LEdBQUFBLEVBQ0FQLEVBQUFBLENBc0JONEMsR0FBU2tCLEdBQUcsUUFBUyxXQUNuQmpELEVBQWUsRUFDZmlDLEVBQW1CakMsRUFDbkJNLEtBQ0FVLEtBQ0FrQixHQUFVLEVBQ1ZGLEdBQVUsRUFDVjdDLElBQ0FrQyxFQUFTLEVBQ1RHLEVBQVEsRUFDUjVCLEVBQVVDLEtBQUssSUFDZnNDLEVBQVNnQixPQUNUcEIsRUFBU3RDLFNBQVMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdKUyB5bycpO1xuXG4gIGNvbnN0ICRkb2N1bWVudCA9ICQoZG9jdW1lbnQpO1xuICBjb25zdCBhdWRpbyA9ICQoJ2F1ZGlvJylbMF07XG4gIGNvbnN0ICR3ZWxjb21lID0gJCgnLndlbGNvbWUnKTtcbiAgY29uc3QgJGdhbWUgPSAkKCcjZ2FtZScpO1xuICBjb25zdCAkcGxheWdyb3VuZCA9ICQoJyNwbGF5Z3JvdW5kJyk7XG4gIGNvbnN0ICRmZWVkYmFjayA9ICQoJy5mZWVkYmFjaycpO1xuICBjb25zdCAkcmVzZXQgPSAkKCcucmVzZXQnKTtcbiAgY29uc3QgJGVuZEdhbWUgPSAkKCcuZW5kZ2FtZScpO1xuICBjb25zdCAkc3dpdGNoID0gJCgnLnN3aXRjaCcpO1xuICBjb25zdCAkbnVtYmVyRGlzcGxheSA9ICQoJy5udW1iZXJEaXNwbGF5JylcblxuICBjb25zdCBzb3VuZHMgPSBbMSwgMiwgMywgNCwgNSwgNiwgNywgOF07XG5cblxuICBjb25zdCB2aXN1YWxzID0ge1xuICAgIDE6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5maXJzdCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmYWRlSW5Eb3duQmlnJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ3pvb21PdXQnLFxuICAgICAgYXVkaW86IDFcbiAgICB9LFxuICAgIDI6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5zZWNvbmQnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnem9vbUluJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2ZhZGVPdXQnLFxuICAgICAgYXVkaW86IDJcbiAgICB9LFxuICAgIDM6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy50aGlyZCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmbGFzaCcsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiAzXG4gICAgfSxcbiAgICA0OiB7XG4gICAgICBlbGVtZW50OiAkKCcuZm91cnRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ3JvdGF0ZUluJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ3JvdGF0ZU91dCcsXG4gICAgICBhdWRpbzogNFxuICAgIH0sXG4gICAgNToge1xuICAgICAgZWxlbWVudDogJCgnLmZpZnRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ2ZsYXNodHdvJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2ZhZGVPdXQnLFxuICAgICAgYXVkaW86IDVcbiAgICB9LFxuICAgIDY6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5zaXh0aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmYWRlSW5VcEJpZycsXG4gICAgICBhbmltYXRpb25PdXQ6ICdsaWdodFNwZWVkT3V0JyxcbiAgICAgIGF1ZGlvOiA2XG4gICAgfSxcbiAgICA3OiB7XG4gICAgICBlbGVtZW50OiAkKCcuc2V2ZW50aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdzaGFrZScsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA3XG4gICAgfSxcbiAgICA4OiB7XG4gICAgICBlbGVtZW50OiAkKCcuZWlnaHRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ3NsaWRlSW5MZWZ0JyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2ZhZGVPdXQnLFxuICAgICAgYXVkaW86IDhcbiAgICB9XG5cbiAgfTtcblxuICAvLyBjdXJyZW50IHJvdW5kLiBlbXB0eSBwcm9ncmFtU2VxdWVuY2UgYXJyYXksXG4gIC8vZ2V0cyBmaWxsZWQgeDMgYXQgc3RhcnQgdGhlbiBpcyArMSBwZXIgcm91bmRcblxuXG4gIGxldCBjdXJyZW50Um91bmQgPSAzO1xuICBsZXQgY3VycmVudFBsYXllck51bSA9IGN1cnJlbnRSb3VuZDtcblxuXG4gIGxldCBwcm9ncmFtU2VxdWVuY2UgPSBbXTtcbiAgbGV0IHVzZXJTZXF1ZW5jZSA9IFtdO1xuICBsZXQgbnVtQ29kZSA9IG51bGw7XG5cblxuICAvL1BsYXlpbmcgeWVzLyBubyBzd2l0Y2hcbiAgbGV0IG1lc3NpbmcgPSBmYWxzZTtcbiAgbGV0IHBsYXlpbmcgPSBmYWxzZTtcblxuXG4gIGxldCBjdXJyZW50UGxheWVyID0gJ3BsYXllciAxJztcblxuXG4gIC8vYXNzaWducyB0aGUgYXVkaW8gc3JjIGFjY29yZGluZyB0byBrZXlwcmVzcyBpZCBvZiBrZXlzIDEtOC5cbiAgJGRvY3VtZW50LmtleXByZXNzKGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCBrZXkgPSB2aXN1YWxzW2Uua2V5XTtcbiAgICBpZiAoKHBsYXlpbmcgPT09IHRydWUpIHx8IChtZXNzaW5nID09PSB0cnVlKSAmJiBrZXkpIHtcbiAgICAgIGNvbnN0IHNrZXkgPSBlLmtleTtcbiAgICAgIHZpc3VhbGlzZShrZXkpO1xuICAgICAgJG51bWJlckRpc3BsYXkucmVtb3ZlQ2xhc3MoJ2hpZGRlbmVyJyk7XG4gICAgICAkbnVtYmVyRGlzcGxheS5odG1sKHNrZXkpO1xuICAgICAgc2V0VGltZW91dChoaWRlS2V5LCA1MDApO1xuICAgIH1cbiAgfSk7XG5cblxuICAvL3N3aXRjaGVzIHBsYXlpbmcgdmFyIHRvIHRydWUgYW5kIGluaXRpYWx6ZXMgdGhlIGdhbWUgOilcbiAgLy9oaWRlcyB0aGUgd2VsY29tZSBkaXZcbiAgJGdhbWUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICR3ZWxjb21lLmhpZGUoKTtcbiAgICBwbGF5aW5nID0gdHJ1ZTtcbiAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIpO1xuICAgIHNldFRpbWVvdXQoZ2FtZUluaXQsIDMwMDApO1xuICB9KTtcblxuICAkcGxheWdyb3VuZC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgJHdlbGNvbWUuaGlkZSgpO1xuICAgIG1lc3NpbmcgPSB0cnVlO1xuICAgICRlbmRHYW1lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gdXBkYXRlUGxheWVyICgpIHtcbiAgICBpZiAoY3VycmVudFBsYXllck51bSAlIDIgPT09IDApIHtcbiAgICAgIGN1cnJlbnRQbGF5ZXIgPSAnUGxheWVyIDInO1xuICAgICAgLy8gY29uc29sZS5sb2coY3VycmVudFJvdW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFBsYXllciA9ICdQbGF5ZXIgMSc7XG4gICAgfVxuICB9XG5cblxuICAvL1xuICBmdW5jdGlvbiBlYXN5TW9kZSAoa2V5KSB7XG4gICAgJG51bWJlckRpc3BsYXkucmVtb3ZlQ2xhc3MoJ2hpZGRlbmVyJyk7XG4gICAgJG51bWJlckRpc3BsYXkuaHRtbChrZXkpO1xuICAgIHNldFRpbWVvdXQoaGlkZUtleSwgNTAwKTtcblxuICB9XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4gIGZ1bmN0aW9uIGhpZGVLZXkoKSB7XG4gICAgJG51bWJlckRpc3BsYXkuYWRkQ2xhc3MoJ2hpZGRlbmVyJyk7XG4gIH1cblxuXG4gIC8vaW5pdGlhbGl6ZXMgdGhlIGJ1aWxkaW5nIG9mIHRoZSBwcm9ncmFtIGFycmF5XG4gIGZ1bmN0aW9uIGdhbWVJbml0ICgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRSb3VuZDsgaSsrKXtcbiAgICAgIGNvbnN0IHJhbmQgPSAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjgpKTtcbiAgICAgIHByb2dyYW1TZXF1ZW5jZS5wdXNoKHZpc3VhbHNbc291bmRzW3JhbmRdXSk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdpbml0aWFsaXppbmchJyk7XG4gICAgcGxheUJhY2soKTtcbiAgfVxuXG5cbiAgLy8gaGVyZSBkb2VzIHRoZXJlIG5lZWQgdG8gYmUgYSBnYW1lIGFkZCByYW5kb20gYWRkaXRpb24gdG8gYXJyYXkgT1IgYSB3YXkgb2YgdXNpbmcgdGhlIGFib3ZlIGZ1bmN0aW9uIGp1c3QgdG8gYWRkIG9uZT9cblxuICAvL3RoaXMgcGxheXMgYmFjayB0aGUgY29uc3RydWN0ZWQgcHJvZ3JhbSBhcnJheVxuICBsZXQgc2VxdWVuY2VJbmRleCA9IDA7XG5cblxuICBmdW5jdGlvbiBwbGF5QmFjaygpIHtcbiAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZXF1ZW5jZUluZGV4IDwgY3VycmVudFJvdW5kKSB7XG4gICAgICAgIHBsYXlCYWNrKCk7XG4gICAgICAgIC8vIGVhc3lNb2RlKGtleSk7XG4gICAgICAgIHZpc3VhbGlzZShwcm9ncmFtU2VxdWVuY2Vbc2VxdWVuY2VJbmRleF0pO1xuICAgICAgICAkZmVlZGJhY2suYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAkZmVlZGJhY2suaHRtbChjdXJyZW50UGxheWVyKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvZ3JhbVNlcXVlbmNlW3NlcXVlbmNlSW5kZXhdLmF1ZGlvKTtcbiAgICAgICAgY29uc29sZS5sb2codXNlclNlcXVlbmNlKTtcbiAgICAgICAgc2VxdWVuY2VJbmRleCsrO1xuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBzZXF1ZW5jZUluZGV4ID0gMDtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSwgMTAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiB2aXN1YWxpc2UgKGtleSkge1xuICAgIGF1ZGlvLnNyYyA9IGBzcmMvYXNzZXRzL2F1ZGlvLyR7a2V5LmF1ZGlvfS53YXZgO1xuICAgIGF1ZGlvLnBsYXkoKTtcbiAgICBlYXN5TW9kZShrZXkuYXVkaW8pO1xuICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzdGhhICcgKyBrZXkpO1xuICAgIC8vIGVhc3lNb2RlKHByb2dyYW1TZXF1ZW5jZVtzZXF1ZW5jZUluZGV4XSk7XG4gICAgY29uc3QgJGVsZW1lbnQgPSBrZXkuZWxlbWVudC5jbG9uZSgpO1xuICAgICRlbGVtZW50LmFwcGVuZFRvKCdtYWluJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmFkZENsYXNzKGtleS5hbmltYXRpb25JbikucmVtb3ZlQ2xhc3Moa2V5LmFuaW1hdGlvbk91dCk7XG4gICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3Moa2V5LmFuaW1hdGlvbkluKS5hZGRDbGFzcyhrZXkuYW5pbWF0aW9uT3V0KTtcbiAgICB9LCAxMjAwKTtcbiAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAkZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9LCAxOTAwKTtcblxuXG4gICAgLy8gY29uc3QgJG5ld2RpdiA9ICQoICc8ZGl2IGlkPVwiZWFzeVwiPjwvZGl2PicgKTtcbiAgICAvLyBpZiAoJHN3aXRjaC5jaGVja2VkKSB7XG4gICAgLy8gICBjb25zb2xlLmxvZygnc3dpdGNoeSBjaGVja2VkISEnKTtcbiAgICAvLyAgIC8vICRuZXdkaXYuYXBwZW5kVG8oJ21haW4nKVxuICAgIC8vIH1cblxuICB9XG5cbiAgLy9GdW5jdGlvbiBwdXNoZXMga2V5IGNoYXJjb2RlcyB0aGUgdXNlciBpbnB1dHMgdG8gdGhlIHVzZXJTZXF1ZW5jZSBhcnJheS5cbiAgZnVuY3Rpb24gbGlzdGVuKCkge1xuICAgIC8vIGlmIChwbGF5aW5nID09PSB0cnVlKSB7XG4gICAgY29uc29sZS5sb2coJ2xpc3RlbmluZy4uLicpO1xuICAgICRkb2N1bWVudC5rZXlwcmVzcyhmdW5jdGlvbihlKSB7XG4gICAgICB1c2VyU2VxdWVuY2UucHVzaChwYXJzZUludChlLmtleSkpO1xuICAgICAgLy8gY29uc29sZS5sb2codXNlclNlcXVlbmNlKTtcbiAgICAgIGNvbXBhcmVBcnJheXMoKTtcbiAgICB9KTtcblxuICB9XG5cbiAgbGlzdGVuKCk7XG5cbiAgbGV0IGxvc3NlcyA9IDA7XG4gIGxldCBjb3VudCAgPSAwO1xuXG5cblxuICAvLyBjb21wYXJlcyB0aGUgdHdvIGFycmF5cyB3aGVuIHRoZSBsZW5ndGggbWF0Y2hlcyB0aGUgY3VycmVudCByb3VuZC5cbiAgLy8gbm90IHN1cGVyIHNpY2ssY291bGRudCBnZXQgaXQgc3RvcCB0cmlnZ2VyaW5nIG9uIGV2ZXJ5IGtleXByZXNzXG4gIC8vIGlmIHBsYXllciBwYXNzZXMgdGVzdCArMSBpcyBhZGRlZCB0byByb3VuZCBsZW5ndGggYW5kIHBsYXliYWNrIHN0YXJ0cyBhZ2Fpbi5cbiAgZnVuY3Rpb24gY29tcGFyZUFycmF5cygpIHtcbiAgICBjb25zdCB0aGVTYW1lID0gdXNlclNlcXVlbmNlLmxlbmd0aCA9PT0gcHJvZ3JhbVNlcXVlbmNlLmxlbmd0aCAmJiB1c2VyU2VxdWVuY2UuZXZlcnkoKHYsaSkgPT4gdiA9PT0gcHJvZ3JhbVNlcXVlbmNlW2ldLmF1ZGlvKTtcbiAgICBjb25zb2xlLmxvZygndXNlclNlcXVlbmNlJywgdXNlclNlcXVlbmNlKTtcbiAgICBjb25zb2xlLmxvZygncHJvZ3JhbVNlcXVlbmNlJywgcHJvZ3JhbVNlcXVlbmNlKTtcbiAgICBjb3VudCArPSAxO1xuICAgIGlmICgoY291bnQgPT09IGN1cnJlbnRSb3VuZCkgJiYgKGxvc3NlcyA9PT0gMCkgJiYgKG1lc3NpbmcgIT09IHRydWUpKSB7XG4gICAgICBjb25zb2xlLmxvZyh0aGVTYW1lKTtcbiAgICAgIGlmICh0aGVTYW1lID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IHJhbmQgPSAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjgpKTtcbiAgICAgICAgcHJvZ3JhbVNlcXVlbmNlLnB1c2godmlzdWFsc1tzb3VuZHNbcmFuZF1dKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvZ3JhbVNlcXVlbmNlKTtcbiAgICAgICAgdXNlclNlcXVlbmNlID0gW107XG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgY3VycmVudFJvdW5kICs9IDE7XG4gICAgICAgIGN1cnJlbnRQbGF5ZXJOdW0gKz0gMTtcbiAgICAgICAgdXBkYXRlUGxheWVyKCk7XG4gICAgICAgICRmZWVkYmFjay5odG1sKCdQYXNzISAtIG5leHQgdXAgJyArIGN1cnJlbnRQbGF5ZXIpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICBzZXRUaW1lb3V0KHBsYXlCYWNrLCAzMDAwKTtcbiAgICAgIH0gZWxzZSBpZiAoKHRoZVNhbWUgPT09IGZhbHNlKSAmJiAobWVzc2luZyAhPT0gdHJ1ZSkpIHtcbiAgICAgICAgdXNlclNlcXVlbmNlID0gW107XG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgbG9zc2VzICs9IDE7XG4gICAgICAgIGN1cnJlbnRQbGF5ZXJOdW0gKz0gMTtcbiAgICAgICAgc2V0VGltZW91dChwbGF5QmFjaywgMzAwMCk7XG4gICAgICAgIHVwZGF0ZVBsYXllcigpO1xuICAgICAgICAkZmVlZGJhY2suaHRtbCgnRmFpbCEgc3VkZGVuIGRlYXRoISEgLW5leHQgdXAgJyArIGN1cnJlbnRQbGF5ZXIpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXG5cblxuICAgICAgICAvL3RoaXMgYm90dG9tIHBhcnQgb2YgdGhlIGlmIGVsc2UgYWN0cyBhcyB0aGUgc3VkZGVuIGRlYXRoIGNhbGN1bGF0b3IgcG9ydGlvbiBvZiB0aGUgZ2FtZSwgd29ya3Mgb24gd2hldGhlciBhIGxvc3Mgd2FzIHN0b3JlZCBpbiB0aGUgJ2xvc3NlcycgdmFyLlxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKGNvdW50ID09PSBjdXJyZW50Um91bmQpICYmIChsb3NzZXMgIT09IDApICYmIChtZXNzaW5nICE9PSB0cnVlKSl7XG4gICAgICBpZiAodGhlU2FtZSA9PT0gdHJ1ZSkge1xuICAgICAgICAkZmVlZGJhY2suaHRtbChjdXJyZW50UGxheWVyICsgJyBXaW5zIScpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAkZW5kR2FtZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2UgaWYgKCh0aGVTYW1lID09PSBmYWxzZSkgJiYgKG1lc3NpbmcgIT09IHRydWUpKSB7XG4gICAgICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIgKyAnIEZhaWxzISEgLS0tLSBUSUUhJyk7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRlbmRHYW1lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICRlbmRHYW1lLm9uKCdjbGljaycsICgpID0+IHtcbiAgICBjdXJyZW50Um91bmQgPSAzO1xuICAgIGN1cnJlbnRQbGF5ZXJOdW0gPSBjdXJyZW50Um91bmQ7XG4gICAgcHJvZ3JhbVNlcXVlbmNlID0gW107XG4gICAgdXNlclNlcXVlbmNlID0gW107XG4gICAgcGxheWluZyA9IGZhbHNlO1xuICAgIG1lc3NpbmcgPSBmYWxzZTtcbiAgICB1cGRhdGVQbGF5ZXIoKTtcbiAgICBsb3NzZXMgPSAwO1xuICAgIGNvdW50ID0gMDtcbiAgICAkZmVlZGJhY2suaHRtbCgnJyk7XG4gICAgJHdlbGNvbWUuc2hvdygpO1xuICAgICRlbmRHYW1lLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgfSk7XG5cblxufSk7XG4iXX0=
