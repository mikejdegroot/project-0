"use strict";$(function(){function e(){b=[],w=[],k=3,T=k,m(),B=0,D=0,p.removeClass("hidden"),p.html(M)}function n(e){if((z||x)&&I[e.key]){var n=I[e.key],i=e.key;s(n),b.push(parseInt(e.key)),O.removeClass("hiddener"),O.html(i),setTimeout(t,500),d()}}function i(e){O.removeClass("hiddener"),O.html(e),setTimeout(t,500)}function t(){O.addClass("hiddener")}function a(){for(var e=0;e<k;e++){var n=Math.floor(8*Math.random());w.push(I[y[n]])}console.log("initializing!"),o()}function o(){b=[],setTimeout(function(){P<k?(o(),s(w[P]),p.addClass("hidden"),p.html(M),console.log(w[P].audio),P++):(P=0,b=[],r.keypress(n))},1e3)}function s(e){h.src="src/assets/audio/"+e.audio+".wav",h.play(),i(e.audio);var n=e.element.clone();n.appendTo("main").removeClass("hidden").addClass(e.animationIn).removeClass(e.animationOut),setTimeout(function(){n.removeClass(e.animationIn).addClass(e.animationOut)},1200),setTimeout(function(){n.remove()},1900)}function d(){var e=b.length===w.length&&b.every(function(e,n){return e===w[n].audio});D+=1,D===k&&0===B&&!0!==x&&!0===z?(console.log(e),e?(k+=1,u(),l(),p.html("Pass! - next up "+M),p.removeClass("hidden"),r.unbind("keypress",n),setTimeout(o,3e3)):e||x||(B+=1,l(),r.unbind("keypress",n),setTimeout(o,3e3),p.html("Fail! sudden death!! -next up "+M),p.removeClass("hidden"))):D!==k||0===B||x||(!0===e?(p.html(M+" Wins!"),p.removeClass("hidden"),C.removeClass("hidden")):e||x||(p.html(M+" Fails!! ---- TIE!"),p.removeClass("hidden"),C.removeClass("hidden")))}function u(){var e=Math.floor(8*Math.random());w.push(I[y[e]])}function l(){b=[],D=0,T+=1,m()}function m(){M=T%2==0?"Player 2":"Player 1"}console.log("JS yo");var r=$(document),h=$("audio")[0],c=$(".welcome"),f=$("#game"),v=$("#playground"),p=$(".feedback"),C=($(".reset"),$(".endgame")),g=$(".switch"),O=$(".numberDisplay"),y=[1,2,3,4,5,6,7,8],I={1:{element:$(".first"),animationIn:"fadeInDownBig",animationOut:"zoomOut",audio:1},2:{element:$(".second"),animationIn:"zoomIn",animationOut:"fadeOut",audio:2},3:{element:$(".third"),animationIn:"flash",animationOut:"fadeOut",audio:3},4:{element:$(".fourth"),animationIn:"rotateIn",animationOut:"rotateOut",audio:4},5:{element:$(".fifth"),animationIn:"flashtwo",animationOut:"fadeOut",audio:5},6:{element:$(".sixth"),animationIn:"fadeInUpBig",animationOut:"lightSpeedOut",audio:6},7:{element:$(".seventh"),animationIn:"shake",animationOut:"fadeOut",audio:7},8:{element:$(".eighth"),animationIn:"slideInLeft",animationOut:"fadeOut",audio:8}},k=3,T=k,w=[],b=[],M="player 1",x=!1,z=!1;f.on("click",function(){c.hide(),z=!0,e(),setTimeout(a,3e3)}),v.on("click",function(){c.hide(),x=!0,C.removeClass("hidden"),e(),r.keypress(n)}),g.on("change",function(){console.log("checked"),O.toggleClass("hidden")});var P=0,B=0,D=0;C.on("click",function(){z=!1,x=!1,B=0,D=0,p.html(""),c.show(),C.addClass("hidden"),r.unbind("keypress",n)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiYnVpbGRHYW1lIiwidXNlclNlcXVlbmNlIiwicHJvZ3JhbVNlcXVlbmNlIiwiY3VycmVudFJvdW5kIiwiY3VycmVudFBsYXllck51bSIsInVwZGF0ZVBsYXllciIsImxvc3NlcyIsIiRmZWVkYmFjayIsInJlbW92ZUNsYXNzIiwia2V5TGlzdGVuZXIiLCJlIiwicGxheWluZyIsInZpc3VhbHMiLCJrZXkiLCJtZXNzaW5nIiwidmlzdWFsaXNlIiwic2tleSIsInB1c2giLCJwYXJzZUludCIsIiRudW1iZXJEaXNwbGF5Iiwic2V0VGltZW91dCIsImh0bWwiLCJoaWRlS2V5IiwiYWRkQ2xhc3MiLCJnYW1lSW5pdCIsImNvbnNvbGUiLCJsb2ciLCJpIiwicGxheUJhY2siLCJzb3VuZHMiLCJyYW5kIiwic2VxdWVuY2VJbmRleCIsImN1cnJlbnRQbGF5ZXIiLCIkZG9jdW1lbnQiLCJrZXlwcmVzcyIsImF1ZGlvIiwiJGVsZW1lbnQiLCJlYXN5UGxheSIsImVsZW1lbnQiLCJjbG9uZSIsImFuaW1hdGlvbkluIiwiYW5pbWF0aW9uT3V0IiwiY291bnQiLCJyZW1vdmUiLCJ0aGVTYW1lIiwibGVuZ3RoIiwiZXZlcnkiLCJ2Iiwicm91bmRBZGRNYXRoIiwicm91bmRSZXNldCIsInVuYmluZCIsIiRlbmRHYW1lIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwib24iLCJkb2N1bWVudCIsIiR3ZWxjb21lIiwiJGdhbWUiLCIkcGxheWdyb3VuZCIsIiRyZXNldCIsIjEiLCJoaWRlIiwiJHN3aXRjaCIsInRvZ2dsZUNsYXNzIiwic2hvdyJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0FrR0EsUUFBQUMsS0FDQUMsS0FDRUEsS0FDQUMsRUFBQUEsRUFDQUMsRUFBQUEsRUFDQUMsSUFDQUMsRUFBQUEsRUFDQUMsRUFBQUEsRUFFQUMsRUFBQUMsWUFBQSxVQUNBRCxFQUFVQyxLQUFBQSxHQUlaLFFBQUFDLEdBQUFDLEdBQ0EsSUFBQUMs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LElBQ0FxQyxFQUFTM0MsU0FBQUEsS0FrQ1h1RCxFQUFBUixHQUFBLFNBQUEsV0FDQVEsUUFBQXJDLElBQVcsV0FDVEQsRUFBWXVDLFlBQVosV0F1Q0E1QyxJQUFBQSxHQUFXLEVBeUNYZCxFQUFNc0MsRUFBK0VGLEVBQVNLLENBcUU5RmQsR0FBQUEsR0FBVWlCLFFBQU8sV0FSbkJ2QyxHQUFBLEVBN1FGRyxHQUFBLEVBZ1JJUixFQUFTLEVBYWJvQyxFQUFBLEVBQ0FuQyxFQUFBYyxLQUFBLElBWElvQyxFQUFTUSxPQUNUZCxFQUFTNUIsU0FBUyxVQUNsQlUsRUFBVWlCLE9BQU8sV0FBWXpDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xuICBjb25zb2xlLmxvZygnSlMgeW8nKTtcblxuICBjb25zdCAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcbiAgY29uc3QgYXVkaW8gPSAkKCdhdWRpbycpWzBdO1xuICBjb25zdCAkd2VsY29tZSA9ICQoJy53ZWxjb21lJyk7XG4gIGNvbnN0ICRnYW1lID0gJCgnI2dhbWUnKTtcbiAgY29uc3QgJHBsYXlncm91bmQgPSAkKCcjcGxheWdyb3VuZCcpO1xuICBjb25zdCAkZmVlZGJhY2sgPSAkKCcuZmVlZGJhY2snKTtcbiAgY29uc3QgJHJlc2V0ID0gJCgnLnJlc2V0Jyk7XG4gIGNvbnN0ICRlbmRHYW1lID0gJCgnLmVuZGdhbWUnKTtcbiAgY29uc3QgJHN3aXRjaCA9ICQoJy5zd2l0Y2gnKTtcbiAgY29uc3QgJG51bWJlckRpc3BsYXkgPSAkKCcubnVtYmVyRGlzcGxheScpXG5cbiAgY29uc3Qgc291bmRzID0gWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDhdO1xuICBjb25zdCB2aXN1YWxzID0ge1xuICAgIDE6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5maXJzdCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmYWRlSW5Eb3duQmlnJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ3pvb21PdXQnLFxuICAgICAgYXVkaW86IDFcbiAgICB9LFxuICAgIDI6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5zZWNvbmQnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnem9vbUluJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2ZhZGVPdXQnLFxuICAgICAgYXVkaW86IDJcbiAgICB9LFxuICAgIDM6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy50aGlyZCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmbGFzaCcsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiAzXG4gICAgfSxcbiAgICA0OiB7XG4gICAgICBlbGVtZW50OiAkKCcuZm91cnRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ3JvdGF0ZUluJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ3JvdGF0ZU91dCcsXG4gICAgICBhdWRpbzogNFxuICAgIH0sXG4gICAgNToge1xuICAgICAgZWxlbWVudDogJCgnLmZpZnRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ2ZsYXNodHdvJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2ZhZGVPdXQnLFxuICAgICAgYXVkaW86IDVcbiAgICB9LFxuICAgIDY6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5zaXh0aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmYWRlSW5VcEJpZycsXG4gICAgICBhbmltYXRpb25PdXQ6ICdsaWdodFNwZWVkT3V0JyxcbiAgICAgIGF1ZGlvOiA2XG4gICAgfSxcbiAgICA3OiB7XG4gICAgICBlbGVtZW50OiAkKCcuc2V2ZW50aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdzaGFrZScsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA3XG4gICAgfSxcbiAgICA4OiB7XG4gICAgICBlbGVtZW50OiAkKCcuZWlnaHRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ3NsaWRlSW5MZWZ0JyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2ZhZGVPdXQnLFxuICAgICAgYXVkaW86IDhcbiAgICB9XG5cbiAgfTtcblxuICAvLyBjdXJyZW50IHJvdW5kLiBlbXB0eSBwcm9ncmFtU2VxdWVuY2UgYXJyYXksXG4gIC8vZ2V0cyBmaWxsZWQgeDMgYXQgc3RhcnQgdGhlbiBpcyArMSBwZXIgcm91bmRcbiAgbGV0IGN1cnJlbnRSb3VuZCA9IDM7XG4gIGxldCBjdXJyZW50UGxheWVyTnVtID0gY3VycmVudFJvdW5kO1xuICBsZXQgcHJvZ3JhbVNlcXVlbmNlID0gW107XG4gIGxldCB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgbGV0IGN1cnJlbnRQbGF5ZXIgPSAncGxheWVyIDEnO1xuXG4gIC8vUGxheWluZy9tZXNzaW5nIG1vZGUgdmFycyBmb3IgZ2FtZSBvciBwbGF5Z3JvdW5kXG4gIGxldCBtZXNzaW5nID0gZmFsc2U7XG4gIGxldCBwbGF5aW5nID0gZmFsc2U7XG5cbiAgLy9nYW1lIGJ1dHRvbiBjbGljayBmdW5jdGlvbi0gc2hvd3MgY3VycmVudCBwbGF5ZXIsIHN3aXRjaGVzIHBsYXlpbmcgdG8gdHJ1ZSBhbmQgIGxhdW5jaGVzIHRoZSBrZXkgbGlzdGVuZXIgYW5kIHRoZSBidWlsZGdhbWUgZnVuY3Rpb24uXG4gICRnYW1lLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkd2VsY29tZS5oaWRlKCk7XG4gICAgcGxheWluZyA9IHRydWU7XG4gICAgYnVpbGRHYW1lKCk7XG4gICAgLy8gJGRvY3VtZW50LmtleXByZXNzKGtleUxpc3RlbmVyKTtcbiAgICBzZXRUaW1lb3V0KGdhbWVJbml0LCAzMDAwKTtcbiAgfSk7XG5cbiAgLy9wbGF5Z3JvdW5kIGJ1dHRvbiBrZXkgbGlzdGVuZXIuXG4gICRwbGF5Z3JvdW5kLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkd2VsY29tZS5oaWRlKCk7XG4gICAgbWVzc2luZyA9IHRydWU7XG4gICAgJGVuZEdhbWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgIGJ1aWxkR2FtZSgpO1xuICAgICRkb2N1bWVudC5rZXlwcmVzcyhrZXlMaXN0ZW5lcik7XG5cbiAgfSk7XG5cbiAgLy9zZXRzIHRoZSBnYW1lIGJvYXJkIHVwIGFzIGl0IHNob3VsZCBiZSBhdCB0aGUgYmVnaW5uaW5nIG9mIHJvdW5kLSBlc3BlY2lhbGx5IG1hdHRlcnMgYWZ0ZXIgdGhlIHJlc2V0IGlzIHByZXNzZWQuXG4gIGZ1bmN0aW9uIGJ1aWxkR2FtZSgpIHtcbiAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICBwcm9ncmFtU2VxdWVuY2UgPSBbXTtcbiAgICBjdXJyZW50Um91bmQgPSAzO1xuICAgIGN1cnJlbnRQbGF5ZXJOdW0gPSBjdXJyZW50Um91bmQ7XG4gICAgdXBkYXRlUGxheWVyKCk7XG4gICAgbG9zc2VzID0gMDtcbiAgICBjb3VudCA9IDA7XG4gICAgLy8gY3VycmVudFBsYXllciA9ICdQbGF5ZXIgMSc7XG4gICAgJGZlZWRiYWNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAkZmVlZGJhY2suaHRtbChjdXJyZW50UGxheWVyKTtcbiAgfVxuXG4gIC8vYWN0aXZhdGVzIHRoZSBrZXkgbGlzdGVuZXIgZnVuY3Rpb24gd2hlbiBjYWxsZWQgYW5kIGF0dGFjaGVkIHRvIHRoZSBkb2N1bWVudCBmcm9tIHRoZSBnYW1lL3BsYXlncm91bmQgYnV0dG9ucy4gdGhlbiBwdXNoZXMgdGhlIGtleSBjb2RlICgxLTgpIGRvd24gdG8gdGhlIHZpc3VhbGlzZSBmdW5jdGlvbiBhbmQgbnVtYmVyRGlzcGxheSBlbGVtZW50KGZvciB0aGUgZWFzeSBtb2RlKS5cbiAgZnVuY3Rpb24ga2V5TGlzdGVuZXIoZSkge1xuICAgIGlmICgocGxheWluZyB8fCBtZXNzaW5nKSAmJiB2aXN1YWxzW2Uua2V5XSkge1xuICAgICAgY29uc3Qga2V5ID0gdmlzdWFsc1tlLmtleV07XG4gICAgICBjb25zdCBza2V5ID0gZS5rZXk7XG4gICAgICB2aXN1YWxpc2Uoa2V5KTtcbiAgICAgIHVzZXJTZXF1ZW5jZS5wdXNoKHBhcnNlSW50KGUua2V5KSk7XG4gICAgICAkbnVtYmVyRGlzcGxheS5yZW1vdmVDbGFzcygnaGlkZGVuZXInKTtcbiAgICAgICRudW1iZXJEaXNwbGF5Lmh0bWwoc2tleSk7XG4gICAgICBzZXRUaW1lb3V0KGhpZGVLZXksIDUwMCk7XG4gICAgICBjb21wYXJlQXJyYXlzKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gYWN0aXZhdGVzIHRoZSBoYXJkIG1vZGUgd2hlbiBidXR0b24gaXMgY2hlY2tlZCwgcmVtb3ZpbmcgdGhlIGxhcmdlIG51bWJlcnNcbiAgJHN3aXRjaC5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdjaGVja2VkJyk7XG4gICAgJG51bWJlckRpc3BsYXkudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXG4gIH0pO1xuXG5cbiAgLy90aGlzIGZ1bmN0aW9uIHRha2VzIHRoZSBrZXlzIHB1c2hlZCBmcm9tIHRoZSB2aXN1YWxzIGZ1bmN0aW9uIGFuZCB0cmFuc2xhdGVzIHRoZW0gaW50byB0aGUgZWFzeW1vZGUgbGFyZ2UgbnVtYmVycyBvbiBzY3JlZW5cbiAgZnVuY3Rpb24gZWFzeVBsYXkgKGtleSkge1xuICAgICRudW1iZXJEaXNwbGF5LnJlbW92ZUNsYXNzKCdoaWRkZW5lcicpO1xuICAgICRudW1iZXJEaXNwbGF5Lmh0bWwoa2V5KTtcbiAgICBzZXRUaW1lb3V0KGhpZGVLZXksIDUwMCk7XG5cbiAgfVxuXG5cbiAgLy9oaWRlcyB0aGUgZWFzeSBudW1zIGFmdGVyIHRoZSB0aW1lIGRpY3RhdGVkIGluIHRoZSBmdW5jdGlvbnMgYWJvdmUuXG4gIGZ1bmN0aW9uIGhpZGVLZXkoKSB7XG4gICAgJG51bWJlckRpc3BsYXkuYWRkQ2xhc3MoJ2hpZGRlbmVyJyk7XG4gIH1cblxuXG4gIC8vaW5pdGlhbGl6ZXMgdGhlIGJ1aWxkaW5nIG9mIHRoZSBwcm9ncmFtIGFycmF5LCBnZW5lcmF0ZXMgYSBudW1iZXIgZnJvbSAxLTggcmFuZG9tbHkgYW5kICozIHRvIGNyZWF0ZSBmaXJzdCBhcnJheS5cbiAgZnVuY3Rpb24gZ2FtZUluaXQgKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudFJvdW5kOyBpKyspe1xuICAgICAgY29uc3QgcmFuZCA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqOCkpO1xuICAgICAgcHJvZ3JhbVNlcXVlbmNlLnB1c2godmlzdWFsc1tzb3VuZHNbcmFuZF1dKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ2luaXRpYWxpemluZyEnKTtcbiAgICBwbGF5QmFjaygpO1xuICB9XG5cblxuICAvL2FsbG93cyB0aGUgc2VxdWVuY2UgdG8gcmVzdGFydCBhZnRlciB0aGUgbGFzdCByb3VuZCwgc3RvcHBpbmcgaXQgZnJvbSBqdXN0IHBsYXlpbmcgdGhlIGVuZCBudW1iZXIuXG5cbiAgbGV0IHNlcXVlbmNlSW5kZXggPSAwO1xuXG4gIC8vdGhpcyBwbGF5cyBiYWNrIHRoZSBjb25zdHJ1Y3RlZCBwcm9ncmFtIGFycmF5IGZyb20gc3RhcnQgdG8gZmluaXNoLiBhbHNvIGhpZGVzIHRoZSBjdXJyZW50IHBsYXllciBmZWVkYmFjay4gYW5kIGNvbnNvbGUgbG9ncyB0aGUgcHJvZ3JhbSBzZXEgYXJyYXkgZm9yIGNoZWF0aW5nLlxuICBmdW5jdGlvbiBwbGF5QmFjaygpIHtcbiAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZXF1ZW5jZUluZGV4IDwgY3VycmVudFJvdW5kKSB7XG4gICAgICAgIHBsYXlCYWNrKCk7XG4gICAgICAgIHZpc3VhbGlzZShwcm9ncmFtU2VxdWVuY2Vbc2VxdWVuY2VJbmRleF0pO1xuICAgICAgICAkZmVlZGJhY2suYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAkZmVlZGJhY2suaHRtbChjdXJyZW50UGxheWVyKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvZ3JhbVNlcXVlbmNlW3NlcXVlbmNlSW5kZXhdLmF1ZGlvKTtcbiAgICAgICAgc2VxdWVuY2VJbmRleCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VxdWVuY2VJbmRleCA9IDA7XG4gICAgICAgIHVzZXJTZXF1ZW5jZSA9IFtdO1xuICAgICAgICAkZG9jdW1lbnQua2V5cHJlc3Moa2V5TGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH0sIDEwMDApO1xuICB9XG5cbiAgLy90YWtlcyB0aGUgY29kZSBwdXNoZWQgZG93biBmcm9tIHRoZSBrZXlsaXN0ZW5lciBhbmQgdGhlIHBsYXliYWNrIGFuZCB0cmFuc2xhdGVzIGl0IHRvIHBsYXkgdGhlIGF1ZGlvIHNyYyBhbmQgYW5pbWF0ZSB0aGUgZGl2cyBhdCB0aGUgc2FtZSB0aW1lLiBjbG9uZXMgdGhlIHJlbGV2YW50IGRpdiBhbmQgYXBwZW5kcyBpdCB0byB0aGUgYm9keSBhbHNvLCBhbGxvd2luZyBmb3Igb3ZlcmxhcHMuIHRoZW4gZGVsZXRlcyBpdHNlbGYgYWZ0ZXIgbmVhcmx5IDIgc2Vjcy5cblxuICBmdW5jdGlvbiB2aXN1YWxpc2UgKGtleSkge1xuICAgIGF1ZGlvLnNyYyA9IGBzcmMvYXNzZXRzL2F1ZGlvLyR7a2V5LmF1ZGlvfS53YXZgO1xuICAgIGF1ZGlvLnBsYXkoKTtcbiAgICBlYXN5UGxheShrZXkuYXVkaW8pO1xuICAgIGNvbnN0ICRlbGVtZW50ID0ga2V5LmVsZW1lbnQuY2xvbmUoKTtcbiAgICAkZWxlbWVudC5hcHBlbmRUbygnbWFpbicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5hZGRDbGFzcyhrZXkuYW5pbWF0aW9uSW4pLnJlbW92ZUNsYXNzKGtleS5hbmltYXRpb25PdXQpO1xuICAgIHNldFRpbWVvdXQoICgpID0+IHtcbiAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKGtleS5hbmltYXRpb25JbikuYWRkQ2xhc3Moa2V5LmFuaW1hdGlvbk91dCk7XG4gICAgfSwgMTIwMCk7XG4gICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgJGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfSwgMTkwMCk7XG5cbiAgfVxuXG5cbiAgbGV0IGxvc3NlcyA9IDA7XG4gIGxldCBjb3VudCAgPSAwO1xuXG4gIC8vIGNvbXBhcmVzIHRoZSB0d28gYXJyYXlzIHdoZW4gdGhlIGxlbmd0aCBtYXRjaGVzIHRoZSBjdXJyZW50IHJvdW5kLlxuICAvLyBpZiBwbGF5ZXIgcGFzc2VzIHRlc3QgKzEgaXMgYWRkZWQgdG8gcm91bmQgbGVuZ3RoIGFuZCBwbGF5YmFjayBzdGFydHMgYWdhaW4uXG5cbiAgZnVuY3Rpb24gY29tcGFyZUFycmF5cygpIHtcbiAgICBjb25zdCB0aGVTYW1lID0gdXNlclNlcXVlbmNlLmxlbmd0aCA9PT0gcHJvZ3JhbVNlcXVlbmNlLmxlbmd0aCAmJiB1c2VyU2VxdWVuY2UuZXZlcnkoKHYsaSkgPT4gdiA9PT0gcHJvZ3JhbVNlcXVlbmNlW2ldLmF1ZGlvKTtcbiAgICBjb3VudCArPSAxO1xuICAgIGlmICgoY291bnQgPT09IGN1cnJlbnRSb3VuZCkgJiYgKGxvc3NlcyA9PT0gMCkgJiYgKG1lc3NpbmcgIT09IHRydWUpICYmIChwbGF5aW5nID09PSB0cnVlKSkge1xuICAgICAgY29uc29sZS5sb2codGhlU2FtZSk7XG4gICAgICBpZiAodGhlU2FtZSkge1xuICAgICAgICBjdXJyZW50Um91bmQgKz0gMTtcbiAgICAgICAgcm91bmRBZGRNYXRoKCk7XG4gICAgICAgIHJvdW5kUmVzZXQoKTtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoJ1Bhc3MhIC0gbmV4dCB1cCAnICsgY3VycmVudFBsYXllcik7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRkb2N1bWVudC51bmJpbmQoJ2tleXByZXNzJywga2V5TGlzdGVuZXIpO1xuICAgICAgICBzZXRUaW1lb3V0KHBsYXlCYWNrLCAzMDAwKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoZVNhbWUgJiYgIW1lc3NpbmcpIHtcbiAgICAgICAgbG9zc2VzICs9IDE7XG4gICAgICAgIHJvdW5kUmVzZXQoKTtcbiAgICAgICAgJGRvY3VtZW50LnVuYmluZCgna2V5cHJlc3MnLCBrZXlMaXN0ZW5lcik7XG4gICAgICAgIHNldFRpbWVvdXQocGxheUJhY2ssIDMwMDApO1xuICAgICAgICAkZmVlZGJhY2suaHRtbCgnRmFpbCEgc3VkZGVuIGRlYXRoISEgLW5leHQgdXAgJyArIGN1cnJlbnRQbGF5ZXIpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXG5cbiAgICAgICAgLy90aGlzIGJvdHRvbSBwYXJ0IG9mIHRoZSBpZiBlbHNlIGFjdHMgYXMgdGhlIHN1ZGRlbiBkZWF0aCBjYWxjdWxhdG9yIHBvcnRpb24gb2YgdGhlIGdhbWUsIHdvcmtzIG9uIHdoZXRoZXIgYSBsb3NzIHdhcyBzdG9yZWQgaW4gdGhlICdsb3NzZXMnIHZhci5cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvdW50ID09PSBjdXJyZW50Um91bmQgJiYgbG9zc2VzICE9PSAwICYmICFtZXNzaW5nKXtcbiAgICAgIGlmICh0aGVTYW1lID09PSB0cnVlKSB7XG4gICAgICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIgKyAnIFdpbnMhJyk7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRlbmRHYW1lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoZVNhbWUgJiYgIW1lc3NpbmcpIHtcbiAgICAgICAgJGZlZWRiYWNrLmh0bWwoY3VycmVudFBsYXllciArICcgRmFpbHMhISAtLS0tIFRJRSEnKTtcbiAgICAgICAgJGZlZWRiYWNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgJGVuZEdhbWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy9mdW5jdGlvbiBpcyBjYWxsZWQgZnJvbSB0aGUgY29tcGFyZSBhcnJheXMgZnVuY3Rpb24gYW5kIHVwcyB0aGUgcHJvZ3JhbSBhcnJheSBieSAxIHJhbmRvbWx5IGdlbmVyYXRlZCBudW1iZXIuXG4gIGZ1bmN0aW9uIHJvdW5kQWRkTWF0aCAoKSB7XG4gICAgY29uc3QgcmFuZCA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqOCkpO1xuICAgIHByb2dyYW1TZXF1ZW5jZS5wdXNoKHZpc3VhbHNbc291bmRzW3JhbmRdXSk7XG4gIH1cblxuXG4gIC8vIHRoaXMgcmVzZXRzIHRoZSByb3VuZCBhZnRlciBhIGZpcnN0IHRpbWUgd2luIG9yIGZhaWwsIGFsbG93aW5nIGZvciB0aGUgY3VycmVudCBwbGF5ZXIgdG8gY2hhbmdlIGJ1dCBub3QgdGhlIHJvdW5kIG51bWJlciBmb3Igc3VkZGVuIGRlYXRoLlxuICBmdW5jdGlvbiByb3VuZFJlc2V0ICgpIHtcbiAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICBjb3VudCA9IDA7XG4gICAgY3VycmVudFBsYXllck51bSArPSAxO1xuICAgIHVwZGF0ZVBsYXllcigpO1xuICB9XG5cbiAgLy91cGRhdGVzIHRoZSBjdXJyZW50IHBsYXllciBhcyB0aGUgcm91bmRzIGluY3JlYXNlLSBoYXMgdG8gYmUgY3VycmVudCBwbGF5ZXIgbnVtIGR1ZSB0byB0aGUgY3VycmVudCBwbGF5ZXIgbmVlZGluZyB0byB1cGRhdGUgaW5kZXBlbmRlbnRseSBmcm9tIHRoZSBjdXJyZW50IHJvdW5kIGZvciB0aGUgc3VkZGVuIGRlYXRoIHJvdW5kXG4gIGZ1bmN0aW9uIHVwZGF0ZVBsYXllciAoKSB7XG4gICAgaWYgKGN1cnJlbnRQbGF5ZXJOdW0gJSAyID09PSAwKSB7XG4gICAgICBjdXJyZW50UGxheWVyID0gJ1BsYXllciAyJztcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFBsYXllciA9ICdQbGF5ZXIgMSc7XG4gICAgfVxuICB9XG5cbiAgJGVuZEdhbWUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIHBsYXlpbmcgPSBmYWxzZTtcbiAgICBtZXNzaW5nID0gZmFsc2U7XG4gICAgbG9zc2VzID0gMDtcbiAgICBjb3VudCA9IDA7XG4gICAgJGZlZWRiYWNrLmh0bWwoJycpO1xuICAgICR3ZWxjb21lLnNob3coKTtcbiAgICAkZW5kR2FtZS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGRvY3VtZW50LnVuYmluZCgna2V5cHJlc3MnLCBrZXlMaXN0ZW5lcik7XG4gIH0pO1xuXG5cbn0pO1xuXG5cblxuLy90byBkbyAtIG1ha2UgdGhlIGtleSBsaXN0ZW4gb25seSB3b3JrIG9uY2UgdGhlIGtleSBoYXMgcGxheWVkIGJhY2tcbi8vbWFzc2l2ZWx5IHJlZHVjZSB0aGUgY29tcGFyZSBhcnJheXMgZnVuY3Rpb24sIG1heWJlIG1vdmUgYWRkIG1hdGggb3V0LlxuIl19
