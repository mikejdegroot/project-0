"use strict";$(function(){function e(){k=O%2==0?"Player 2":"Player 1"}function n(){c.addClass("hiddener")}function a(){for(var e=0;e<C;e++){var n=Math.floor(8*Math.random());g.push(v[f[n]])}console.log("initializing!"),i()}function i(){I=[],setTimeout(function(){if(!(T<C))return void(T=0);i(),t(g[T]),r.addClass("hidden"),r.html(k),console.log(g[T].audio),T++},1e3)}function t(e){d.src="src/assets/audio/"+e.audio+".wav",d.play();var n=e.element.clone();n.appendTo("main").removeClass("hidden").addClass(e.animationIn).removeClass(e.animationOut),c.html(e.key),setTimeout(function(){n.removeClass(e.animationIn).addClass(e.animationOut)},1200),setTimeout(function(){n.remove()},1900)}function o(){var n=I.length===g.length&&I.every(function(e,n){return e===g[n].audio});if((M+=1)===C&&0===w&&!0!==p)if(console.log(n),!0===n){var a=Math.floor(8*Math.random());g.push(v[f[a]]),console.log(g),I=[],M=0,C+=1,O+=1,e(),r.html("Pass! - next up "+k),r.removeClass("hidden"),setTimeout(i,3e3)}else!1===n&&!0!==p&&(I=[],M=0,w+=1,O+=1,setTimeout(i,3e3),e(),r.html("Fail! sudden death!! -next up "+k),r.removeClass("hidden"));else M===C&&0!==w&&!0!==p&&(!0===n?(r.html(k+" Wins!"),r.removeClass("hidden"),h.removeClass("hidden")):!1===n&&!0!==p&&(r.html(k+" Fails!! ---- TIE!"),r.removeClass("hidden"),h.removeClass("hidden")))}console.log("JS yo");var s=$(document),d=$("audio")[0],l=$(".welcome"),m=$("#game"),u=$("#playground"),r=$(".feedback"),h=($(".reset"),$(".endgame")),c=($(".switch"),$(".numberDisplay")),f=[49,50,51,52,53,54,55,56],v={49:{element:$(".first"),animationIn:"fadeInDownBig",animationOut:"zoomOut",audio:49},50:{element:$(".second"),animationIn:"zoomIn",animationOut:"fadeOut",audio:50},51:{element:$(".third"),animationIn:"flash",animationOut:"fadeOut",audio:51},52:{element:$(".fourth"),animationIn:"rotateIn",animationOut:"rotateOut",audio:52},53:{element:$(".fifth"),animationIn:"flashtwo",animationOut:"fadeOut",audio:53},54:{element:$(".sixth"),animationIn:"fadeInUpBig",animationOut:"lightSpeedOut",audio:54},55:{element:$(".seventh"),animationIn:"shake",animationOut:"fadeOut",audio:55},56:{element:$(".eighth"),animationIn:"slideInLeft",animationOut:"fadeOut",audio:56}},C=3,O=C,g=[],I=[],p=!1,y=!1,k="player 1";s.keypress(function(e){var a=v[e.charCode];(!0===y||!0===p&&a)&&(t(a),c.removeClass("hiddener"),c.html(e.key),setTimeout(n,500))}),m.on("click",function(){l.hide(),y=!0,r.removeClass("hidden"),r.html(k),setTimeout(a,3e3)}),u.on("click",function(){l.hide(),p=!0,h.removeClass("hidden")});var T=0;!function(){console.log("listening..."),s.keypress(function(e){I.push(e.charCode),o()})}();var w=0,M=0;h.on("click",function(){C=3,O=C,g=[],I=[],y=!1,p=!1,e(),w=0,M=0,r.html(""),l.show(),h.addClass("hidden")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwidXBkYXRlUGxheWVyIiwiY3VycmVudFBsYXllciIsImhpZGVLZXkiLCIkbnVtYmVyRGlzcGxheSIsImFkZENsYXNzIiwiY29uc29sZSIsInBsYXlCYWNrIiwicmFuZCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInByb2dyYW1TZXF1ZW5jZSIsInB1c2giLCJ2aXN1YWxzIiwic291bmRzIiwibG9nIiwiJGZlZWRiYWNrIiwic2VxdWVuY2VJbmRleCIsImN1cnJlbnRSb3VuZCIsImF1ZGlvIiwicGF0dGVybiIsImh0bWwiLCJzZXRUaW1lb3V0Iiwic3JjIiwiJGVsZW1lbnQiLCJlbGVtZW50IiwiY2xvbmUiLCJhcHBlbmRUbyIsInJlbW92ZUNsYXNzIiwiYW5pbWF0aW9uSW4iLCJhbmltYXRpb25PdXQiLCJrZXkiLCJyZW1vdmUiLCJjb3VudCIsImxlbmd0aCIsInVzZXJTZXF1ZW5jZSIsImV2ZXJ5IiwidiIsImkiLCJjdXJyZW50UGxheWVyTnVtIiwidGhlU2FtZSIsIm1lc3NpbmciLCJsb3NzZXMiLCIkZW5kR2FtZSIsInBsYXlpbmciLCJkb2N1bWVudCIsIiRkb2N1bWVudCIsIiR3ZWxjb21lIiwiJGdhbWUiLCIkcGxheWdyb3VuZCIsIjQ5IiwiNTAiLCI1MSIsIjUyIiwiNTMiLCI1NCIsIjU1IiwiNTYiLCJ2aXN1YWxpc2UiLCJlIiwib24iLCJoaWRlIiwiY2hhckNvZGUiLCJjb21wYXJlQXJyYXlzIiwic2hvdyJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0EwSEcsUUFBTUMsS0FFTkMsRUFEQ0EsRUFBZ0IsR0FBaEIsRUFDRCxXQUdnQixXQUtuQixRQUFBQyxLQUNBQyxFQUFBQyxTQUFxQixZQUtuQkMsUUFBQUEsS0FDQUMsSUFBQUEsR0FBQUEsR0FBQUEsRUFBQUEsRUFBQUEsRUFBQUEsSUFBQUEsQ0FDRCxHQUFBQyxHQUFBQyxLQUFBQyxNQUFBLEVBQUFELEtBQUFFLFNBSkdDLEdBQWdCQyxLQUFLQyxF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QVMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdKUyB5bycpO1xuXG4gIGNvbnN0ICRkb2N1bWVudCA9ICQoZG9jdW1lbnQpO1xuICBjb25zdCBhdWRpbyA9ICQoJ2F1ZGlvJylbMF07XG4gIGNvbnN0ICR3ZWxjb21lID0gJCgnLndlbGNvbWUnKTtcbiAgY29uc3QgJGdhbWUgPSAkKCcjZ2FtZScpO1xuICBjb25zdCAkcGxheWdyb3VuZCA9ICQoJyNwbGF5Z3JvdW5kJyk7XG4gIGNvbnN0ICRmZWVkYmFjayA9ICQoJy5mZWVkYmFjaycpO1xuICBjb25zdCAkcmVzZXQgPSAkKCcucmVzZXQnKTtcbiAgY29uc3QgJGVuZEdhbWUgPSAkKCcuZW5kZ2FtZScpO1xuICBjb25zdCAkc3dpdGNoID0gJCgnLnN3aXRjaCcpO1xuICBjb25zdCAkbnVtYmVyRGlzcGxheSA9ICQoJy5udW1iZXJEaXNwbGF5JylcblxuICBjb25zdCBzb3VuZHMgPSBbNDksIDUwLCA1MSwgNTIsIDUzLCA1NCwgNTUsIDU2XTtcblxuXG4gIGNvbnN0IHZpc3VhbHMgPSB7XG4gICAgNDk6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5maXJzdCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmYWRlSW5Eb3duQmlnJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ3pvb21PdXQnLFxuICAgICAgYXVkaW86IDQ5XG4gICAgfSxcbiAgICA1MDoge1xuICAgICAgZWxlbWVudDogJCgnLnNlY29uZCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICd6b29tSW4nLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogNTBcbiAgICB9LFxuICAgIDUxOiB7XG4gICAgICBlbGVtZW50OiAkKCcudGhpcmQnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnZmxhc2gnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogNTFcbiAgICB9LFxuICAgIDUyOiB7XG4gICAgICBlbGVtZW50OiAkKCcuZm91cnRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ3JvdGF0ZUluJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ3JvdGF0ZU91dCcsXG4gICAgICBhdWRpbzogNTJcbiAgICB9LFxuICAgIDUzOiB7XG4gICAgICBlbGVtZW50OiAkKCcuZmlmdGgnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnZmxhc2h0d28nLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogNTNcbiAgICB9LFxuICAgIDU0OiB7XG4gICAgICBlbGVtZW50OiAkKCcuc2l4dGgnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnZmFkZUluVXBCaWcnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnbGlnaHRTcGVlZE91dCcsXG4gICAgICBhdWRpbzogNTRcbiAgICB9LFxuICAgIDU1OiB7XG4gICAgICBlbGVtZW50OiAkKCcuc2V2ZW50aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdzaGFrZScsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA1NVxuICAgIH0sXG4gICAgNTY6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5laWdodGgnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAnc2xpZGVJbkxlZnQnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnZmFkZU91dCcsXG4gICAgICBhdWRpbzogNTZcbiAgICB9XG5cbiAgfTtcblxuICAvLyBjdXJyZW50IHJvdW5kLiBlbXB0eSBwcm9ncmFtU2VxdWVuY2UgYXJyYXksXG4gIC8vZ2V0cyBmaWxsZWQgeDMgYXQgc3RhcnQgdGhlbiBpcyArMSBwZXIgcm91bmRcblxuXG4gIGxldCBjdXJyZW50Um91bmQgPSAzO1xuICBsZXQgY3VycmVudFBsYXllck51bSA9IGN1cnJlbnRSb3VuZDtcblxuXG4gIGxldCBwcm9ncmFtU2VxdWVuY2UgPSBbXTtcbiAgbGV0IHVzZXJTZXF1ZW5jZSA9IFtdO1xuICBsZXQgbnVtQ29kZSA9IG51bGw7XG5cblxuICAvL1BsYXlpbmcgeWVzLyBubyBzd2l0Y2hcbiAgbGV0IG1lc3NpbmcgPSBmYWxzZTtcbiAgbGV0IHBsYXlpbmcgPSBmYWxzZTtcblxuXG4gIGxldCBjdXJyZW50UGxheWVyID0gJ3BsYXllciAxJztcblxuXG4gIC8vYXNzaWducyB0aGUgYXVkaW8gc3JjIGFjY29yZGluZyB0byBrZXlwcmVzcyBpZCBvZiBrZXlzIDEtOC5cbiAgJGRvY3VtZW50LmtleXByZXNzKGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCBwYXR0ZXJuID0gdmlzdWFsc1tlLmNoYXJDb2RlXTtcbiAgICBpZiAoKHBsYXlpbmcgPT09IHRydWUpIHx8IChtZXNzaW5nID09PSB0cnVlKSAmJiBwYXR0ZXJuKSB7XG4gICAgICB2aXN1YWxpc2UocGF0dGVybik7XG4gICAgICAkbnVtYmVyRGlzcGxheS5yZW1vdmVDbGFzcygnaGlkZGVuZXInKTtcbiAgICAgICRudW1iZXJEaXNwbGF5Lmh0bWwoZS5rZXkpO1xuICAgICAgc2V0VGltZW91dChoaWRlS2V5LCA1MDApO1xuICAgIH1cbiAgfSk7XG5cblxuICAvL3N3aXRjaGVzIHBsYXlpbmcgdmFyIHRvIHRydWUgYW5kIGluaXRpYWx6ZXMgdGhlIGdhbWUgOilcbiAgLy9oaWRlcyB0aGUgd2VsY29tZSBkaXZcbiAgJGdhbWUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICR3ZWxjb21lLmhpZGUoKTtcbiAgICBwbGF5aW5nID0gdHJ1ZTtcbiAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIpO1xuICAgIHNldFRpbWVvdXQoZ2FtZUluaXQsIDMwMDApO1xuICB9KTtcblxuICAkcGxheWdyb3VuZC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgJHdlbGNvbWUuaGlkZSgpO1xuICAgIG1lc3NpbmcgPSB0cnVlO1xuICAgICRlbmRHYW1lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gdXBkYXRlUGxheWVyICgpIHtcbiAgICBpZiAoY3VycmVudFBsYXllck51bSAlIDIgPT09IDApIHtcbiAgICAgIGN1cnJlbnRQbGF5ZXIgPSAnUGxheWVyIDInO1xuICAgICAgLy8gY29uc29sZS5sb2coY3VycmVudFJvdW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFBsYXllciA9ICdQbGF5ZXIgMSc7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGlkZUtleSgpIHtcbiAgICAkbnVtYmVyRGlzcGxheS5hZGRDbGFzcygnaGlkZGVuZXInKTtcbiAgfVxuXG5cbiAgLy9pbml0aWFsaXplcyB0aGUgYnVpbGRpbmcgb2YgdGhlIHByb2dyYW0gYXJyYXlcbiAgZnVuY3Rpb24gZ2FtZUluaXQgKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudFJvdW5kOyBpKyspe1xuICAgICAgY29uc3QgcmFuZCA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqOCkpO1xuICAgICAgcHJvZ3JhbVNlcXVlbmNlLnB1c2godmlzdWFsc1tzb3VuZHNbcmFuZF1dKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ2luaXRpYWxpemluZyEnKTtcbiAgICBwbGF5QmFjaygpO1xuICB9XG5cblxuICAvLyBoZXJlIGRvZXMgdGhlcmUgbmVlZCB0byBiZSBhIGdhbWUgYWRkIHJhbmRvbSBhZGRpdGlvbiB0byBhcnJheSBPUiBhIHdheSBvZiB1c2luZyB0aGUgYWJvdmUgZnVuY3Rpb24ganVzdCB0byBhZGQgb25lP1xuXG4gIC8vdGhpcyBwbGF5cyBiYWNrIHRoZSBjb25zdHJ1Y3RlZCBwcm9ncmFtIGFycmF5XG4gIGxldCBzZXF1ZW5jZUluZGV4ID0gMDtcblxuXG4gIGZ1bmN0aW9uIHBsYXlCYWNrKCkge1xuICAgIHVzZXJTZXF1ZW5jZSA9IFtdO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNlcXVlbmNlSW5kZXggPCBjdXJyZW50Um91bmQpIHtcbiAgICAgICAgcGxheUJhY2soKTtcbiAgICAgICAgdmlzdWFsaXNlKHByb2dyYW1TZXF1ZW5jZVtzZXF1ZW5jZUluZGV4XSk7XG4gICAgICAgICRmZWVkYmFjay5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIpO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9ncmFtU2VxdWVuY2Vbc2VxdWVuY2VJbmRleF0uYXVkaW8pO1xuICAgICAgICBzZXF1ZW5jZUluZGV4Kys7XG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIHNlcXVlbmNlSW5kZXggPSAwO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9LCAxMDAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZpc3VhbGlzZSAocGF0dGVybikge1xuICAgIC8vICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIpO1xuICAgIGF1ZGlvLnNyYyA9IGBzcmMvYXNzZXRzL2F1ZGlvLyR7cGF0dGVybi5hdWRpb30ud2F2YDtcbiAgICBhdWRpby5wbGF5KCk7XG4gICAgY29uc3QgJGVsZW1lbnQgPSBwYXR0ZXJuLmVsZW1lbnQuY2xvbmUoKTtcbiAgICAkZWxlbWVudC5hcHBlbmRUbygnbWFpbicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5hZGRDbGFzcyhwYXR0ZXJuLmFuaW1hdGlvbkluKS5yZW1vdmVDbGFzcyhwYXR0ZXJuLmFuaW1hdGlvbk91dCk7XG4gICAgJG51bWJlckRpc3BsYXkuaHRtbChwYXR0ZXJuLmtleSk7XG4gICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MocGF0dGVybi5hbmltYXRpb25JbikuYWRkQ2xhc3MocGF0dGVybi5hbmltYXRpb25PdXQpO1xuICAgIH0sIDEyMDApO1xuICAgIHNldFRpbWVvdXQoICgpID0+IHtcbiAgICAgICRlbGVtZW50LnJlbW92ZSgpO1xuICAgIH0sIDE5MDApO1xuXG5cbiAgICAvLyBjb25zdCAkbmV3ZGl2ID0gJCggJzxkaXYgaWQ9XCJlYXN5XCI+PC9kaXY+JyApO1xuICAgIC8vIGlmICgkc3dpdGNoLmNoZWNrZWQpIHtcbiAgICAvLyAgIGNvbnNvbGUubG9nKCdzd2l0Y2h5IGNoZWNrZWQhIScpO1xuICAgIC8vICAgLy8gJG5ld2Rpdi5hcHBlbmRUbygnbWFpbicpXG4gICAgLy8gfVxuXG4gIH1cblxuICAvL0Z1bmN0aW9uIHB1c2hlcyBrZXkgY2hhcmNvZGVzIHRoZSB1c2VyIGlucHV0cyB0byB0aGUgdXNlclNlcXVlbmNlIGFycmF5LlxuICBmdW5jdGlvbiBsaXN0ZW4oKSB7XG4gICAgLy8gaWYgKHBsYXlpbmcgPT09IHRydWUpIHtcbiAgICBjb25zb2xlLmxvZygnbGlzdGVuaW5nLi4uJyk7XG4gICAgJGRvY3VtZW50LmtleXByZXNzKGZ1bmN0aW9uKGUpIHtcbiAgICAgIHVzZXJTZXF1ZW5jZS5wdXNoKGUuY2hhckNvZGUpO1xuICAgICAgLy8gY29uc29sZS5sb2codXNlclNlcXVlbmNlKTtcbiAgICAgIGNvbXBhcmVBcnJheXMoKTtcbiAgICB9KTtcblxuICB9XG5cbiAgbGlzdGVuKCk7XG5cbiAgbGV0IGxvc3NlcyA9IDA7XG4gIGxldCBjb3VudCAgPSAwO1xuXG5cblxuICAvLyBjb21wYXJlcyB0aGUgdHdvIGFycmF5cyB3aGVuIHRoZSBsZW5ndGggbWF0Y2hlcyB0aGUgY3VycmVudCByb3VuZC5cbiAgLy8gbm90IHN1cGVyIHNpY2ssY291bGRudCBnZXQgaXQgc3RvcCB0cmlnZ2VyaW5nIG9uIGV2ZXJ5IGtleXByZXNzXG4gIC8vIGlmIHBsYXllciBwYXNzZXMgdGVzdCArMSBpcyBhZGRlZCB0byByb3VuZCBsZW5ndGggYW5kIHBsYXliYWNrIHN0YXJ0cyBhZ2Fpbi5cbiAgZnVuY3Rpb24gY29tcGFyZUFycmF5cygpIHtcbiAgICBjb25zdCB0aGVTYW1lID0gdXNlclNlcXVlbmNlLmxlbmd0aCA9PT0gcHJvZ3JhbVNlcXVlbmNlLmxlbmd0aCAmJiB1c2VyU2VxdWVuY2UuZXZlcnkoKHYsaSkgPT4gdiA9PT0gcHJvZ3JhbVNlcXVlbmNlW2ldLmF1ZGlvKTtcbiAgICBjb3VudCArPSAxO1xuICAgIGlmICgoY291bnQgPT09IGN1cnJlbnRSb3VuZCkgJiYgKGxvc3NlcyA9PT0gMCkgJiYgKG1lc3NpbmcgIT09IHRydWUpKSB7XG4gICAgICBjb25zb2xlLmxvZyh0aGVTYW1lKTtcbiAgICAgIGlmICh0aGVTYW1lID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IHJhbmQgPSAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjgpKTtcbiAgICAgICAgcHJvZ3JhbVNlcXVlbmNlLnB1c2godmlzdWFsc1tzb3VuZHNbcmFuZF1dKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvZ3JhbVNlcXVlbmNlKTtcbiAgICAgICAgdXNlclNlcXVlbmNlID0gW107XG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgY3VycmVudFJvdW5kICs9IDE7XG4gICAgICAgIGN1cnJlbnRQbGF5ZXJOdW0gKz0gMTtcbiAgICAgICAgdXBkYXRlUGxheWVyKCk7XG4gICAgICAgICRmZWVkYmFjay5odG1sKCdQYXNzISAtIG5leHQgdXAgJyArIGN1cnJlbnRQbGF5ZXIpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICBzZXRUaW1lb3V0KHBsYXlCYWNrLCAzMDAwKTtcbiAgICAgIH0gZWxzZSBpZiAoKHRoZVNhbWUgPT09IGZhbHNlKSAmJiAobWVzc2luZyAhPT0gdHJ1ZSkpIHtcbiAgICAgICAgdXNlclNlcXVlbmNlID0gW107XG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgbG9zc2VzICs9IDE7XG4gICAgICAgIGN1cnJlbnRQbGF5ZXJOdW0gKz0gMTtcbiAgICAgICAgc2V0VGltZW91dChwbGF5QmFjaywgMzAwMCk7XG4gICAgICAgIHVwZGF0ZVBsYXllcigpO1xuICAgICAgICAkZmVlZGJhY2suaHRtbCgnRmFpbCEgc3VkZGVuIGRlYXRoISEgLW5leHQgdXAgJyArIGN1cnJlbnRQbGF5ZXIpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXG5cblxuICAgICAgICAvL3RoaXMgYm90dG9tIHBhcnQgb2YgdGhlIGlmIGVsc2UgYWN0cyBhcyB0aGUgc3VkZGVuIGRlYXRoIGNhbGN1bGF0b3IgcG9ydGlvbiBvZiB0aGUgZ2FtZSwgd29ya3Mgb24gd2hldGhlciBhIGxvc3Mgd2FzIHN0b3JlZCBpbiB0aGUgJ2xvc3NlcycgdmFyLlxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKGNvdW50ID09PSBjdXJyZW50Um91bmQpICYmIChsb3NzZXMgIT09IDApICYmIChtZXNzaW5nICE9PSB0cnVlKSl7XG4gICAgICBpZiAodGhlU2FtZSA9PT0gdHJ1ZSkge1xuICAgICAgICAkZmVlZGJhY2suaHRtbChjdXJyZW50UGxheWVyICsgJyBXaW5zIScpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAkZW5kR2FtZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2UgaWYgKCh0aGVTYW1lID09PSBmYWxzZSkgJiYgKG1lc3NpbmcgIT09IHRydWUpKSB7XG4gICAgICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIgKyAnIEZhaWxzISEgLS0tLSBUSUUhJyk7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRlbmRHYW1lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICRlbmRHYW1lLm9uKCdjbGljaycsICgpID0+IHtcbiAgICBjdXJyZW50Um91bmQgPSAzO1xuICAgIGN1cnJlbnRQbGF5ZXJOdW0gPSBjdXJyZW50Um91bmQ7XG4gICAgcHJvZ3JhbVNlcXVlbmNlID0gW107XG4gICAgdXNlclNlcXVlbmNlID0gW107XG4gICAgcGxheWluZyA9IGZhbHNlO1xuICAgIG1lc3NpbmcgPSBmYWxzZTtcbiAgICB1cGRhdGVQbGF5ZXIoKTtcbiAgICBsb3NzZXMgPSAwO1xuICAgIGNvdW50ID0gMDtcbiAgICAkZmVlZGJhY2suaHRtbCgnJyk7XG4gICAgJHdlbGNvbWUuc2hvdygpO1xuICAgICRlbmRHYW1lLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgfSk7XG5cblxufSk7XG4iXX0=
