"use strict";$(function(){function e(){p=v%2==0?"Player 2":"Player 1"}function n(){for(var e=0;e<c;e++){var n=Math.floor(8*Math.random());O.push(f[h[n]])}console.log("initializing!"),i()}function i(){g=[],setTimeout(function(){if(!(y<c))return void(y=0);i(),a(O[y]),m.addClass("hidden"),m.html(p),console.log(O[y].audio),y++},1e3)}function a(e){s.src="audio/"+e.audio+".wav",s.play();var n=e.element.clone();n.appendTo("main").removeClass("hidden").addClass(e.animationIn).removeClass(e.animationOut),setTimeout(function(){n.removeClass(e.animationIn).addClass(e.animationOut)},1200),setTimeout(function(){n.remove()},1900)}function o(){var n=g.length===O.length&&g.every(function(e,n){return e===O[n].audio});if((k+=1)===c&&0===T&&!0!==C)if(console.log(n),!0===n){var a=Math.floor(8*Math.random());O.push(f[h[a]]),console.log(O),g=[],k=0,c+=1,v+=1,e(),m.html("Pass! - next up "+p),m.removeClass("hidden"),setTimeout(i,3e3)}else!1===n&&!0!==C&&(g=[],k=0,T+=1,v+=1,setTimeout(i,3e3),e(),m.html("Fail! sudden death!! -next up "+p),m.removeClass("hidden"));else k===c&&0!==T&&!0!==C&&(!0===n?(m.html(p+" Wins!"),m.removeClass("hidden"),r.removeClass("hidden")):!1===n&&!0!==C&&(m.html(p+" Fails!! ---- TIE!"),m.removeClass("hidden"),r.removeClass("hidden")))}console.log("JS yo");var t=$(document),s=$("audio")[0],d=$(".welcome"),l=$("#game"),u=$("#playground"),m=$(".feedback"),r=($(".reset"),$(".endgame")),h=[49,50,51,52,53,54,55,56],f={49:{element:$(".first"),animationIn:"fadeInDownBig",animationOut:"zoomOut",audio:49},50:{element:$(".second"),animationIn:"zoomIn",animationOut:"fadeOut",audio:50},51:{element:$(".third"),animationIn:"flash",animationOut:"fadeOut",audio:51},52:{element:$(".fourth"),animationIn:"rotateIn",animationOut:"rotateOut",audio:52},53:{element:$(".fifth"),animationIn:"flashtwo",animationOut:"fadeOut",audio:53},54:{element:$(".sixth"),animationIn:"fadeInUpBig",animationOut:"lightSpeedOut",audio:54},55:{element:$(".seventh"),animationIn:"shake",animationOut:"fadeOut",audio:55},56:{element:$(".eighth"),animationIn:"slideInLeft",animationOut:"fadeOut",audio:56}},c=3,v=c,O=[],g=[],C=!1,I=!1,p="player 1";t.keypress(function(e){if(!0===I||!0===C){a(f[""+e.charCode])}}),l.on("click",function(){d.hide(),I=!0,m.removeClass("hidden"),m.html(p),setTimeout(n,3e3)}),u.on("click",function(){d.hide(),C=!0,r.removeClass("hidden")});var y=0;!function(){console.log("listening..."),t.keypress(function(e){g.push(e.charCode),o()})}();var T=0,k=0;r.on("click",function(){c=3,v=c,O=[],g=[],I=!1,C=!1,e(),T=0,k=0,m.html(""),d.show(),r.addClass("hidden")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwidXBkYXRlUGxheWVyIiwiY3VycmVudFBsYXllciIsImdhbWVJbml0IiwiY29uc29sZSIsImxvZyIsImkiLCJjdXJyZW50Um91bmQiLCJwbGF5QmFjayIsInByb2dyYW1TZXF1ZW5jZSIsInB1c2giLCJ2aXN1YWxzIiwic291bmRzIiwicmFuZCIsIiRmZWVkYmFjayIsInNlcXVlbmNlSW5kZXgiLCJ2aXN1YWxpc2UiLCJodG1sIiwiYXVkaW8iLCJzZXRUaW1lb3V0IiwicGF0dGVybiIsInNyYyIsIiRlbGVtZW50IiwiZWxlbWVudCIsImNsb25lIiwiYXBwZW5kVG8iLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiYW5pbWF0aW9uSW4iLCJhbmltYXRpb25PdXQiLCJsaXN0ZW4iLCJyZW1vdmUiLCJsZW5ndGgiLCJ1c2VyU2VxdWVuY2UiLCJldmVyeSIsInYiLCJjb3VudCIsImxvc3NlcyIsIm1lc3NpbmciLCJjdXJyZW50UGxheWVyTnVtIiwidGhlU2FtZSIsIiRlbmRHYW1lIiwiZG9jdW1lbnQiLCIkZG9jdW1lbnQiLCIkd2VsY29tZSIsIiRnYW1lIiwiJHBsYXlncm91bmQiLCI0OSIsIjUwIiwiNTEiLCI1MiIsIjUzIiwiNTQiLCI1NSIsIjU2IiwicGxheWluZyIsImUiLCJjaGFyQ29kZSIsIm9uIiwiaGlkZSIsImNvbXBhcmVBcnJheXMiLCJrZXlwcmVzcyIsInNob3ciXSwibWFwcGluZ3MiOiJZQUFBQSxHQUFFLFdBcUhHLFFBQU1DLEtBRU5DLEVBRENBLEVBQWdCLEdBQWhCLEVBQ0QsV0FHa0IsV0FJbEIsUUFBQUMsS0FDREMsSUFBQUEsR0FBUUMsR0FBSSxFQUFBQyxFQUFBQyxFQUFaRCxJQUFBLENBQ0FFLEdBQUFBLEdBQUFBLEtBQUFBLE1BQUFBLEVBQUFBLEtBQUFBLFNBQ0RDLEdBQUFDLEtBQUFDLEVBQUFDLEVBQUFDLEtBR0RULFFBQUFDLElBQUEsaUJBSkVHLElBZ0JJTSxRQUFBQSxLQUNBQSxLQUNBVixXQUFBQSxXQUNBVyxLQUFBQSxFQUFBQSxHQVdKLFlBUklBLEVBQWdCLEVBVGxCUCxLQUVFUSxFQUFVUCxFQUFnQk0sSUFPMUJBLEVBQUFBLFNBQUEsVUFMQUQsRUFBVUcsS0FBS2YsR0FPZkUsUUFBQUMsSUFBQUksRUFBQU0sR0FBQUcsT0FDREgsS0FPSEcsS0FHQUMsUUFBQUEsR0FBWUMsR0FFWEYsRUFBRUcsSUFBRixTQUZERCxFQUFBRixNQUVDLE9BQ0RDLEVBQUFBLE1BQ0VHLElBQUFBLEdBQUFGLEVBQUFHLFFBQUFDLE9BQ0RGLEdBRkRHLFNBQUEsUUFBQUMsWUFBQSxVQUFBQyxTQUFBUCxFQUFBUSxhQUFBRixZQUFBTixFQUFBUyxjQUdEVixXQUFBLFdBTEdHLEVBQVNJLFlBQVlOLEVBQVFRLGFBQWFELFNBQVNQLEVBQVFTLGVBTy9ELE1BQ0FWLFdBQVNXLFdBQ1BSLEVBQUFTLFVBQ0EzQixNQTBCSUssUUFBQUEsS0FDQUwsR0FBQUEsR0FBWUssRUFBQUEsU0FBWkEsRUFBQXVCLFFBQUFDLEVBQUFDLE1BQUEsU0FBQUMsRUFBQTdCLEdBQUEsTUFBQTZCLEtBQUExQixFQUFBSCxHQUFBWSxPQUVBa0IsS0FEQUgsR0FBQUEsS0FDQTFCLEdBQUEsSUFBQThCLElBQUEsSUFBQUMsRUFFQUMsR0FEQWhDLFFBQUFBLElBQUFBLElBQ0FnQyxJQUFBQSxFQUFvQixDQUNwQnRDLEdBQUFBLEdBQUFBLEtBQUFBLE1BQUFBLEVBQUFBLEtBQUFBLFNBQ0FhLEdBQWVKLEtBQUFDLEVBQUFDLEVBQXFCVixLQUNwQ1ksUUFBQUEsSUFBVVksR0FDVlAsS0FYRmlCLEVBWU8sRUFDTEgsR0FBZSxFQUNmRyxHQUFBLEVBQ0FDLElBQ0FFLEVBQUFBLEtBQUFBLG1CQUFBckMsR0FDQWlCLEVBQUFBLFlBQXFCLFVBQ3JCbEIsV0FBQUEsRUFBQUEsVUFDZSxJQUFMZ0IsSUFBSyxJQUFBcUIsSUFDZnhCLEtBTkFzQixFQUFRLEVBVVJDLEdBQUEsRUFDREUsR0FBQSxFQTNCSHBCLFdBNEJZaUIsRUFBVTdCLEtBQ3BCTixJQUNFYSxFQUFVRyxLQUFLZixpQ0FBZkEsR0FDQVksRUFBVVksWUFBWSxlQU92QlUsS0FBQTdCLEdBQUEsSUFBQThCLElBQUEsSUFBQUMsS0FDRixJQUFBRSxHQUNGMUIsRUFBQUcsS0FBQWYsRUFBQSxVQVRLWSxFQUFVWSxZQUFZLFVBVzVCZSxFQUFZZixZQUFTLFlBQ25CLElBQUFuQixJQUFBLElBQUErQixJQUNBQyxFQUFBQSxLQUFtQmhDLEVBQW5CLHNCQUNBRSxFQUFBQSxZQUFBLFVBQ0F3QixFQUFBQSxZQUFBLFlBalBGN0IsUUFBUUMsSUFBSSxRQUFaRCxJQUFBQSxHQUFZSixFQUFaMEMsVUFHTXhCLEVBQVFsQixFQUFFLFNBQVMsR0FEbkIyQyxFQUFZM0MsRUFBRTBDLFlBQ2R4QixFQUFVbEIsRUFBQSxTQUNWNEMsRUFBYTVDLEVBQUEsZUFDYjZDLEVBQVU3QyxFQUFBLGFBRVZjLEdBREFnQyxFQUFBQSxVQUNZOUMsRUFBRSxhQUVkeUMsR0FBV3pDLEdBQUUsR0FBQSxHQUFuQixHQUFBLEdBQUEsR0FBQSxHQUFBLElBS01XLEdBQU5vQyxJQUNFeEIsUUFBSXZCLEVBQUEsVUFDRnVCLFlBQVcsZ0JBQ1hLLGFBQWEsVUFDYkMsTUFBQUEsSUFIRW1CLElBTUp6QixRQUFJdkIsRUFBQSxXQUNGdUIsWUFBVyxTQUNYSyxhQUFhLFVBQ2JDLE1BQUFBLElBSEVvQixJQU1KMUIsUUFBSXZCLEVBQUEsVUFDRnVCLFlBQVcsUUFDWEssYUFBYSxVQUNiQyxNQUFBQSxJQUhFcUIsSUFNSjNCLFFBQUl2QixFQUFBLFdBQ0Z1QixZQUFXLFdBQ1hLLGFBQWEsWUFDYkMsTUFBQUEsSUFIRXNCLElBTUo1QixRQUFJdkIsRUFBQSxVQUNGdUIsWUFBVyxXQUNYSyxhQUFhLFVBQ2JDLE1BQUFBLElBSEV1QixJQU1KN0IsUUFBSXZCLEVBQUEsVUFDRnVCLFlBQVcsY0FDWEssYUFBYSxnQkFDYkMsTUFBQUEsSUFIRXdCLElBTUo5QixRQUFJdkIsRUFBQSxZQUNGdUIsWUFBVyxRQUNYSyxhQUFhLFVBQ2JDLE1BQUFBLElBSEV5QixJQU1KL0IsUUFBSXZCLEVBQUEsV0FDRnVCLFlBQVcsY0FDWEssYUFBYSxVQUNiQyxNQUFBQSxLQVVBdEIsRUFBZSxFQUFmQSxFQUFKQSxFQUlJRSxLQUNBd0IsS0FNQXNCLEdBQVUsRUFBVkEsR0FBVSxFQU1kckQsRUFBQSxVQUlJYyxHQUFBQSxTQUFVSSxTQUFWb0MsR0FDRCxJQUFBLElBQUFELElBQUEsSUFBQWpCLEVBQUEsQ0FEQ3RCLEVBSEpMLEVBQUFBLEdBQUE2QyxFQUFBQyxjQWNFM0MsRUFBQUEsR0FBQUEsUUFBZVosV0FDZmlCLEVBQUFBLE9BTEZvQyxHQUFBLEVBR0V6QyxFQUFVWSxZQUFZLFVBS3hCb0IsRUFBWVksS0FBR3hELEdBQ2IwQyxXQUFTZSxFQUFULE9BR0RiLEVBSkRZLEdBQUEsUUFBQSxXQUNFZCxFQUFTZSxPQUtYckIsR0FBU3JDLEVBQ1B3QyxFQUFJRixZQUFBQSxXQTJCRixJQUFBeEIsR0FBSUEsR0FxQ0o2QyxXQUdIeEQsUUFBQUMsSUFBQSxnQkFOQ3NDLEVBQVVrQixTQUFTLFNBQVNMLEdBUTlCMUIsRUFBQUEsS0FBQUEsRUFBQUEsVUFFSU8sUUFTRixJQUFBQSxHQUFNRyxFQUErRUosRUFBU0QsQ0FzRDlGckIsR0FBQUEsR0FBVUcsUUFBVixXQUNBMkIsRUFBQSxFQUNBSCxFQUFrQmxDLEVBWnBCRSxLQTlPRndCLEtBbVBJc0IsR0FBVSxFQUNWakIsR0FBVSxFQUNWckMsSUFDQW9DLEVBQVMsRUFDVEQsRUFBUSxFQUNSdEIsRUFBVUcsS0FBSyxJQUNmMkIsRUFBU2tCLE9BQ1RyQixFQUFTZCxTQUFTIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xuICBjb25zb2xlLmxvZygnSlMgeW8nKTtcblxuICBjb25zdCAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcbiAgY29uc3QgYXVkaW8gPSAkKCdhdWRpbycpWzBdO1xuICBjb25zdCAkd2VsY29tZSA9ICQoJy53ZWxjb21lJyk7XG4gIGNvbnN0ICRnYW1lID0gJCgnI2dhbWUnKTtcbiAgY29uc3QgJHBsYXlncm91bmQgPSAkKCcjcGxheWdyb3VuZCcpO1xuICBjb25zdCAkZmVlZGJhY2sgPSAkKCcuZmVlZGJhY2snKTtcbiAgY29uc3QgJHJlc2V0ID0gJCgnLnJlc2V0Jyk7XG4gIGNvbnN0ICRlbmRHYW1lID0gJCgnLmVuZGdhbWUnKVxuXG4gIGNvbnN0IHNvdW5kcyA9IFs0OSwgNTAsIDUxLCA1MiwgNTMsIDU0LCA1NSwgNTZdO1xuXG5cbiAgY29uc3QgdmlzdWFscyA9IHtcbiAgICA0OToge1xuICAgICAgZWxlbWVudDogJCgnLmZpcnN0JyksXG4gICAgICBhbmltYXRpb25JbjogJ2ZhZGVJbkRvd25CaWcnLFxuICAgICAgYW5pbWF0aW9uT3V0OiAnem9vbU91dCcsXG4gICAgICBhdWRpbzogNDlcbiAgICB9LFxuICAgIDUwOiB7XG4gICAgICBlbGVtZW50OiAkKCcuc2Vjb25kJyksXG4gICAgICBhbmltYXRpb25JbjogJ3pvb21JbicsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA1MFxuICAgIH0sXG4gICAgNTE6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy50aGlyZCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmbGFzaCcsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA1MVxuICAgIH0sXG4gICAgNTI6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5mb3VydGgnKSxcbiAgICAgIGFuaW1hdGlvbkluOiAncm90YXRlSW4nLFxuICAgICAgYW5pbWF0aW9uT3V0OiAncm90YXRlT3V0JyxcbiAgICAgIGF1ZGlvOiA1MlxuICAgIH0sXG4gICAgNTM6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5maWZ0aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmbGFzaHR3bycsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA1M1xuICAgIH0sXG4gICAgNTQ6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5zaXh0aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdmYWRlSW5VcEJpZycsXG4gICAgICBhbmltYXRpb25PdXQ6ICdsaWdodFNwZWVkT3V0JyxcbiAgICAgIGF1ZGlvOiA1NFxuICAgIH0sXG4gICAgNTU6IHtcbiAgICAgIGVsZW1lbnQ6ICQoJy5zZXZlbnRoJyksXG4gICAgICBhbmltYXRpb25JbjogJ3NoYWtlJyxcbiAgICAgIGFuaW1hdGlvbk91dDogJ2ZhZGVPdXQnLFxuICAgICAgYXVkaW86IDU1XG4gICAgfSxcbiAgICA1Njoge1xuICAgICAgZWxlbWVudDogJCgnLmVpZ2h0aCcpLFxuICAgICAgYW5pbWF0aW9uSW46ICdzbGlkZUluTGVmdCcsXG4gICAgICBhbmltYXRpb25PdXQ6ICdmYWRlT3V0JyxcbiAgICAgIGF1ZGlvOiA1NlxuICAgIH1cblxuICB9O1xuXG4gIC8vIGN1cnJlbnQgcm91bmQuIGVtcHR5IHByb2dyYW1TZXF1ZW5jZSBhcnJheSxcbiAgLy9nZXRzIGZpbGxlZCB4MyBhdCBzdGFydCB0aGVuIGlzICsxIHBlciByb3VuZFxuXG5cbiAgbGV0IGN1cnJlbnRSb3VuZCA9IDM7XG4gIGxldCBjdXJyZW50UGxheWVyTnVtID0gY3VycmVudFJvdW5kO1xuXG5cbiAgbGV0IHByb2dyYW1TZXF1ZW5jZSA9IFtdO1xuICBsZXQgdXNlclNlcXVlbmNlID0gW107XG4gIGxldCBudW1Db2RlID0gbnVsbDtcblxuXG4gIC8vUGxheWluZyB5ZXMvIG5vIHN3aXRjaFxuICBsZXQgbWVzc2luZyA9IGZhbHNlO1xuICBsZXQgcGxheWluZyA9IGZhbHNlO1xuXG5cbiAgbGV0IGN1cnJlbnRQbGF5ZXIgPSAncGxheWVyIDEnO1xuXG5cbiAgLy9hc3NpZ25zIHRoZSBhdWRpbyBzcmMgYWNjb3JkaW5nIHRvIGtleXByZXNzIGlkIG9mIGtleXMgMS04LlxuICAkZG9jdW1lbnQua2V5cHJlc3MoZnVuY3Rpb24oZSkge1xuICAgIGlmICgocGxheWluZyA9PT0gdHJ1ZSkgfHwgKG1lc3NpbmcgPT09IHRydWUpKSB7XG4gICAgICBjb25zdCBwYXR0ZXJuID0gdmlzdWFsc1tgJHtlLmNoYXJDb2RlfWBdO1xuICAgICAgdmlzdWFsaXNlKHBhdHRlcm4pO1xuICAgIH1cbiAgfSk7XG5cblxuICAvL3N3aXRjaGVzIHBsYXlpbmcgdmFyIHRvIHRydWUgYW5kIGluaXRpYWx6ZXMgdGhlIGdhbWUgOilcbiAgLy9oaWRlcyB0aGUgd2VsY29tZSBkaXZcbiAgJGdhbWUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICR3ZWxjb21lLmhpZGUoKTtcbiAgICBwbGF5aW5nID0gdHJ1ZTtcbiAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIpO1xuICAgIHNldFRpbWVvdXQoZ2FtZUluaXQsIDMwMDApO1xuICB9KTtcblxuICAkcGxheWdyb3VuZC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgJHdlbGNvbWUuaGlkZSgpO1xuICAgIG1lc3NpbmcgPSB0cnVlO1xuICAgICRlbmRHYW1lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gdXBkYXRlUGxheWVyICgpIHtcbiAgICBpZiAoY3VycmVudFBsYXllck51bSAlIDIgPT09IDApIHtcbiAgICAgIGN1cnJlbnRQbGF5ZXIgPSAnUGxheWVyIDInO1xuICAgICAgLy8gY29uc29sZS5sb2coY3VycmVudFJvdW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFBsYXllciA9ICdQbGF5ZXIgMSc7XG4gICAgfVxuICB9XG4gIC8vaW5pdGlhbGl6ZXMgdGhlIGJ1aWxkaW5nIG9mIHRoZSBwcm9ncmFtIGFycmF5XG4gIGZ1bmN0aW9uIGdhbWVJbml0ICgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRSb3VuZDsgaSsrKXtcbiAgICAgIGNvbnN0IHJhbmQgPSAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjgpKTtcbiAgICAgIHByb2dyYW1TZXF1ZW5jZS5wdXNoKHZpc3VhbHNbc291bmRzW3JhbmRdXSk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdpbml0aWFsaXppbmchJyk7XG4gICAgcGxheUJhY2soKTtcbiAgfVxuXG5cbiAgLy8gaGVyZSBkb2VzIHRoZXJlIG5lZWQgdG8gYmUgYSBnYW1lIGFkZCByYW5kb20gYWRkaXRpb24gdG8gYXJyYXkgT1IgYSB3YXkgb2YgdXNpbmcgdGhlIGFib3ZlIGZ1bmN0aW9uIGp1c3QgdG8gYWRkIG9uZT9cblxuICAvL3RoaXMgcGxheXMgYmFjayB0aGUgY29uc3RydWN0ZWQgcHJvZ3JhbSBhcnJheVxuICBsZXQgc2VxdWVuY2VJbmRleCA9IDA7XG5cblxuICBmdW5jdGlvbiBwbGF5QmFjaygpIHtcbiAgICB1c2VyU2VxdWVuY2UgPSBbXTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZXF1ZW5jZUluZGV4IDwgY3VycmVudFJvdW5kKSB7XG4gICAgICAgIHBsYXlCYWNrKCk7XG4gICAgICAgIHZpc3VhbGlzZShwcm9ncmFtU2VxdWVuY2Vbc2VxdWVuY2VJbmRleF0pO1xuICAgICAgICAkZmVlZGJhY2suYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAkZmVlZGJhY2suaHRtbChjdXJyZW50UGxheWVyKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvZ3JhbVNlcXVlbmNlW3NlcXVlbmNlSW5kZXhdLmF1ZGlvKTtcbiAgICAgICAgc2VxdWVuY2VJbmRleCsrO1xuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBzZXF1ZW5jZUluZGV4ID0gMDtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSwgMTAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiB2aXN1YWxpc2UgKHBhdHRlcm4pIHtcbiAgICAvLyAkZmVlZGJhY2suaHRtbChjdXJyZW50UGxheWVyKTtcbiAgICBhdWRpby5zcmMgPSBgYXVkaW8vJHtwYXR0ZXJuLmF1ZGlvfS53YXZgO1xuICAgIGF1ZGlvLnBsYXkoKTtcbiAgICBjb25zdCAkZWxlbWVudCA9IHBhdHRlcm4uZWxlbWVudC5jbG9uZSgpO1xuICAgICRlbGVtZW50LmFwcGVuZFRvKCdtYWluJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmFkZENsYXNzKHBhdHRlcm4uYW5pbWF0aW9uSW4pLnJlbW92ZUNsYXNzKHBhdHRlcm4uYW5pbWF0aW9uT3V0KTtcbiAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcyhwYXR0ZXJuLmFuaW1hdGlvbkluKS5hZGRDbGFzcyhwYXR0ZXJuLmFuaW1hdGlvbk91dCk7XG4gICAgfSwgMTIwMCk7XG4gICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgJGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfSwgMTkwMCk7XG4gIH1cblxuICAvL0Z1bmN0aW9uIHB1c2hlcyBrZXkgY2hhcmNvZGVzIHRoZSB1c2VyIGlucHV0cyB0byB0aGUgdXNlclNlcXVlbmNlIGFycmF5LlxuICBmdW5jdGlvbiBsaXN0ZW4oKSB7XG4gICAgLy8gaWYgKHBsYXlpbmcgPT09IHRydWUpIHtcbiAgICBjb25zb2xlLmxvZygnbGlzdGVuaW5nLi4uJyk7XG4gICAgJGRvY3VtZW50LmtleXByZXNzKGZ1bmN0aW9uKGUpIHtcbiAgICAgIHVzZXJTZXF1ZW5jZS5wdXNoKGUuY2hhckNvZGUpO1xuICAgICAgLy8gY29uc29sZS5sb2codXNlclNlcXVlbmNlKTtcbiAgICAgIGNvbXBhcmVBcnJheXMoKTtcbiAgICB9KTtcblxuICB9XG5cbiAgbGlzdGVuKCk7XG5cbiAgbGV0IGxvc3NlcyA9IDA7XG4gIGxldCBjb3VudCAgPSAwO1xuXG5cblxuICAvLyBjb21wYXJlcyB0aGUgdHdvIGFycmF5cyB3aGVuIHRoZSBsZW5ndGggbWF0Y2hlcyB0aGUgY3VycmVudCByb3VuZC5cbiAgLy8gbm90IHN1cGVyIHNpY2ssY291bGRudCBnZXQgaXQgc3RvcCB0cmlnZ2VyaW5nIG9uIGV2ZXJ5IGtleXByZXNzXG4gIC8vIGlmIHBsYXllciBwYXNzZXMgdGVzdCArMSBpcyBhZGRlZCB0byByb3VuZCBsZW5ndGggYW5kIHBsYXliYWNrIHN0YXJ0cyBhZ2Fpbi5cbiAgZnVuY3Rpb24gY29tcGFyZUFycmF5cygpIHtcbiAgICBjb25zdCB0aGVTYW1lID0gdXNlclNlcXVlbmNlLmxlbmd0aCA9PT0gcHJvZ3JhbVNlcXVlbmNlLmxlbmd0aCAmJiB1c2VyU2VxdWVuY2UuZXZlcnkoKHYsaSkgPT4gdiA9PT0gcHJvZ3JhbVNlcXVlbmNlW2ldLmF1ZGlvKTtcbiAgICBjb3VudCArPSAxO1xuICAgIGlmICgoY291bnQgPT09IGN1cnJlbnRSb3VuZCkgJiYgKGxvc3NlcyA9PT0gMCkgJiYgKG1lc3NpbmcgIT09IHRydWUpKSB7XG4gICAgICBjb25zb2xlLmxvZyh0aGVTYW1lKTtcbiAgICAgIGlmICh0aGVTYW1lID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IHJhbmQgPSAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjgpKTtcbiAgICAgICAgcHJvZ3JhbVNlcXVlbmNlLnB1c2godmlzdWFsc1tzb3VuZHNbcmFuZF1dKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvZ3JhbVNlcXVlbmNlKTtcbiAgICAgICAgdXNlclNlcXVlbmNlID0gW107XG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgY3VycmVudFJvdW5kICs9IDE7XG4gICAgICAgIGN1cnJlbnRQbGF5ZXJOdW0gKz0gMTtcbiAgICAgICAgdXBkYXRlUGxheWVyKCk7XG4gICAgICAgICRmZWVkYmFjay5odG1sKCdQYXNzISAtIG5leHQgdXAgJyArIGN1cnJlbnRQbGF5ZXIpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICBzZXRUaW1lb3V0KHBsYXlCYWNrLCAzMDAwKTtcbiAgICAgIH0gZWxzZSBpZiAoKHRoZVNhbWUgPT09IGZhbHNlKSAmJiAobWVzc2luZyAhPT0gdHJ1ZSkpIHtcbiAgICAgICAgdXNlclNlcXVlbmNlID0gW107XG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgbG9zc2VzICs9IDE7XG4gICAgICAgIGN1cnJlbnRQbGF5ZXJOdW0gKz0gMTtcbiAgICAgICAgc2V0VGltZW91dChwbGF5QmFjaywgMzAwMCk7XG4gICAgICAgIHVwZGF0ZVBsYXllcigpO1xuICAgICAgICAkZmVlZGJhY2suaHRtbCgnRmFpbCEgc3VkZGVuIGRlYXRoISEgLW5leHQgdXAgJyArIGN1cnJlbnRQbGF5ZXIpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXG5cblxuICAgICAgICAvL3RoaXMgYm90dG9tIHBhcnQgb2YgdGhlIGlmIGVsc2UgYWN0cyBhcyB0aGUgc3VkZGVuIGRlYXRoIGNhbGN1bGF0b3IgcG9ydGlvbiBvZiB0aGUgZ2FtZSwgd29ya3Mgb24gd2hldGhlciBhIGxvc3Mgd2FzIHN0b3JlZCBpbiB0aGUgJ2xvc3NlcycgdmFyLlxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKGNvdW50ID09PSBjdXJyZW50Um91bmQpICYmIChsb3NzZXMgIT09IDApICYmIChtZXNzaW5nICE9PSB0cnVlKSl7XG4gICAgICBpZiAodGhlU2FtZSA9PT0gdHJ1ZSkge1xuICAgICAgICAkZmVlZGJhY2suaHRtbChjdXJyZW50UGxheWVyICsgJyBXaW5zIScpO1xuICAgICAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAkZW5kR2FtZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2UgaWYgKCh0aGVTYW1lID09PSBmYWxzZSkgJiYgKG1lc3NpbmcgIT09IHRydWUpKSB7XG4gICAgICAgICRmZWVkYmFjay5odG1sKGN1cnJlbnRQbGF5ZXIgKyAnIEZhaWxzISEgLS0tLSBUSUUhJyk7XG4gICAgICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRlbmRHYW1lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICRlbmRHYW1lLm9uKCdjbGljaycsICgpID0+IHtcbiAgICBjdXJyZW50Um91bmQgPSAzO1xuICAgIGN1cnJlbnRQbGF5ZXJOdW0gPSBjdXJyZW50Um91bmQ7XG4gICAgcHJvZ3JhbVNlcXVlbmNlID0gW107XG4gICAgdXNlclNlcXVlbmNlID0gW107XG4gICAgcGxheWluZyA9IGZhbHNlO1xuICAgIG1lc3NpbmcgPSBmYWxzZTtcbiAgICB1cGRhdGVQbGF5ZXIoKTtcbiAgICBsb3NzZXMgPSAwO1xuICAgIGNvdW50ID0gMDtcbiAgICAkZmVlZGJhY2suaHRtbCgnJyk7XG4gICAgJHdlbGNvbWUuc2hvdygpO1xuICAgICRlbmRHYW1lLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgfSk7XG5cblxufSk7XG4iXX0=
